window.Modernizr=function(e,t,i){function n(e){y.cssText=e}function r(e,t){return n(C.join(e+";")+(t||""))}function s(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function a(e,t){for(var n in e){var r=e[n];if(!o(r,"-")&&y[r]!==i)return"pfx"==t?r:!0}return!1}function l(e,t,n){for(var r in e){var o=t[e[r]];if(o!==i)return n===!1?e[r]:s(o,"function")?o.bind(n||t):o}return!1}function c(e,t,i){var n=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+E.join(n+" ")+n).split(" ");return s(t,"string")||s(t,"undefined")?a(r,t):(r=(e+" "+S.join(n+" ")+n).split(" "),l(r,t,i))}function u(){f.input=function(i){for(var n=0,r=i.length;r>n;n++)N[i[n]]=!!(i[n]in k);return N.list&&(N.list=!(!t.createElement("datalist")||!e.HTMLDataListElement)),N}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),f.inputtypes=function(e){for(var n,r,s,o=0,a=e.length;a>o;o++)k.setAttribute("type",r=e[o]),n="text"!==k.type,n&&(k.value=x,k.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(r)&&k.style.WebkitAppearance!==i?(m.appendChild(k),s=t.defaultView,n=s.getComputedStyle&&"textfield"!==s.getComputedStyle(k,null).WebkitAppearance&&0!==k.offsetHeight,m.removeChild(k)):/^(search|tel)$/.test(r)||(n=/^(url|email)$/.test(r)?k.checkValidity&&k.checkValidity()===!1:k.value!=x)),_[e[o]]=!!n;return _}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var d,h,p="2.8.3",f={},g=!0,m=t.documentElement,v="modernizr",b=t.createElement(v),y=b.style,k=t.createElement("input"),x=":)",w={}.toString,C=" -webkit- -moz- -o- -ms- ".split(" "),T="Webkit Moz O ms",E=T.split(" "),S=T.toLowerCase().split(" "),$={svg:"http://www.w3.org/2000/svg"},A={},_={},N={},P=[],D=P.slice,L=function(e,i,n,r){var s,o,a,l,c=t.createElement("div"),u=t.body,d=u||t.createElement("body");if(parseInt(n,10))for(;n--;)a=t.createElement("div"),a.id=r?r[n]:v+(n+1),c.appendChild(a);return s=["&#173;",'<style id="s',v,'">',e,"</style>"].join(""),c.id=v,(u?c:d).innerHTML+=s,d.appendChild(c),u||(d.style.background="",d.style.overflow="hidden",l=m.style.overflow,m.style.overflow="hidden",m.appendChild(d)),o=i(c,e),u?c.parentNode.removeChild(c):(d.parentNode.removeChild(d),m.style.overflow=l),!!o},F=function(t){var i=e.matchMedia||e.msMatchMedia;if(i)return i(t)&&i(t).matches||!1;var n;return L("@media "+t+" { #"+v+" { position: absolute; } }",function(t){n="absolute"==(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position}),n},R=function(){function e(e,r){r=r||t.createElement(n[e]||"div"),e="on"+e;var o=e in r;return o||(r.setAttribute||(r=t.createElement("div")),r.setAttribute&&r.removeAttribute&&(r.setAttribute(e,""),o=s(r[e],"function"),s(r[e],"undefined")||(r[e]=i),r.removeAttribute(e))),r=null,o}var n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),O={}.hasOwnProperty;h=s(O,"undefined")||s(O.call,"undefined")?function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined")}:function(e,t){return O.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var i=D.call(arguments,1),n=function(){if(this instanceof n){var r=function(){};r.prototype=t.prototype;var s=new r,o=t.apply(s,i.concat(D.call(arguments)));return Object(o)===o?o:s}return t.apply(e,i.concat(D.call(arguments)))};return n}),A.flexbox=function(){return c("flexWrap")},A.flexboxlegacy=function(){return c("boxDirection")},A.canvas=function(){var e=t.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},A.canvastext=function(){return!(!f.canvas||!s(t.createElement("canvas").getContext("2d").fillText,"function"))},A.webgl=function(){return!!e.WebGLRenderingContext},A.touch=function(){var i;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?i=!0:L(["@media (",C.join("touch-enabled),("),v,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){i=9===e.offsetTop}),i},A.geolocation=function(){return"geolocation"in navigator},A.postmessage=function(){return!!e.postMessage},A.websqldatabase=function(){return!!e.openDatabase},A.indexedDB=function(){return!!c("indexedDB",e)},A.hashchange=function(){return R("hashchange",e)&&(t.documentMode===i||t.documentMode>7)},A.history=function(){return!(!e.history||!history.pushState)},A.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},A.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},A.rgba=function(){return n("background-color:rgba(150,255,150,.5)"),o(y.backgroundColor,"rgba")},A.hsla=function(){return n("background-color:hsla(120,40%,100%,.5)"),o(y.backgroundColor,"rgba")||o(y.backgroundColor,"hsla")},A.multiplebgs=function(){return n("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(y.background)},A.backgroundsize=function(){return c("backgroundSize")},A.borderimage=function(){return c("borderImage")},A.borderradius=function(){return c("borderRadius")},A.boxshadow=function(){return c("boxShadow")},A.textshadow=function(){return""===t.createElement("div").style.textShadow},A.opacity=function(){return r("opacity:.55"),/^0.55$/.test(y.opacity)},A.cssanimations=function(){return c("animationName")},A.csscolumns=function(){return c("columnCount")},A.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",i="linear-gradient(left top,#9f9, white);";return n((e+"-webkit- ".split(" ").join(t+e)+C.join(i+e)).slice(0,-e.length)),o(y.backgroundImage,"gradient")},A.cssreflections=function(){return c("boxReflect")},A.csstransforms=function(){return!!c("transform")},A.csstransforms3d=function(){var e=!!c("perspective");return e&&"webkitPerspective"in m.style&&L("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,i){e=9===t.offsetLeft&&3===t.offsetHeight}),e},A.csstransitions=function(){return c("transition")},A.fontface=function(){var e;return L('@font-face {font-family:"font";src:url("https://")}',function(i,n){var r=t.getElementById("smodernizr"),s=r.sheet||r.styleSheet,o=s?s.cssRules&&s.cssRules[0]?s.cssRules[0].cssText:s.cssText||"":"";e=/src/i.test(o)&&0===o.indexOf(n.split(" ")[0])}),e},A.generatedcontent=function(){var e;return L(["#",v,"{font:0/0 a}#",v,':after{content:"',x,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},A.video=function(){var e=t.createElement("video"),i=!1;try{(i=!!e.canPlayType)&&(i=new Boolean(i),i.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),i.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),i.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(n){}return i},A.audio=function(){var e=t.createElement("audio"),i=!1;try{(i=!!e.canPlayType)&&(i=new Boolean(i),i.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),i.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),i.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),i.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(n){}return i},A.localstorage=function(){try{return localStorage.setItem(v,v),localStorage.removeItem(v),!0}catch(e){return!1}},A.sessionstorage=function(){try{return sessionStorage.setItem(v,v),sessionStorage.removeItem(v),!0}catch(e){return!1}},A.webworkers=function(){return!!e.Worker},A.applicationcache=function(){return!!e.applicationCache},A.svg=function(){return!!t.createElementNS&&!!t.createElementNS($.svg,"svg").createSVGRect},A.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==$.svg},A.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(w.call(t.createElementNS($.svg,"animate")))},A.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(w.call(t.createElementNS($.svg,"clipPath")))};for(var H in A)h(A,H)&&(d=H.toLowerCase(),f[d]=A[H](),P.push((f[d]?"":"no-")+d));return f.input||u(),f.addTest=function(e,t){if("object"==typeof e)for(var n in e)h(e,n)&&f.addTest(n,e[n]);else{if(e=e.toLowerCase(),f[e]!==i)return f;t="function"==typeof t?t():t,"undefined"!=typeof g&&g&&(m.className+=" "+(t?"":"no-")+e),f[e]=t}return f},n(""),b=k=null,function(e,t){function i(e,t){var i=e.createElement("p"),n=e.getElementsByTagName("head")[0]||e.documentElement;return i.innerHTML="x<style>"+t+"</style>",n.insertBefore(i.lastChild,n.firstChild)}function n(){var e=b.elements;return"string"==typeof e?e.split(" "):e}function r(e){var t=v[e[g]];return t||(t={},m++,e[g]=m,v[m]=t),t}function s(e,i,n){if(i||(i=t),u)return i.createElement(e);n||(n=r(i));var s;return s=n.cache[e]?n.cache[e].cloneNode():f.test(e)?(n.cache[e]=n.createElem(e)).cloneNode():n.createElem(e),!s.canHaveChildren||p.test(e)||s.tagUrn?s:n.frag.appendChild(s)}function o(e,i){if(e||(e=t),u)return e.createDocumentFragment();i=i||r(e);for(var s=i.frag.cloneNode(),o=0,a=n(),l=a.length;l>o;o++)s.createElement(a[o]);return s}function a(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(i){return b.shivMethods?s(i,e,t):t.createElem(i)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(b,t.frag)}function l(e){e||(e=t);var n=r(e);return!b.shivCSS||c||n.hasCSS||(n.hasCSS=!!i(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),u||a(e,n),e}var c,u,d="3.7.0",h=e.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g="_html5shiv",m=0,v={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",c="hidden"in e,u=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(i){c=!0,u=!0}}();var b={elements:h.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:d,shivCSS:h.shivCSS!==!1,supportsUnknownElements:u,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:l,createElement:s,createDocumentFragment:o};e.html5=b,l(t)}(this,t),f._version=p,f._prefixes=C,f._domPrefixes=S,f._cssomPrefixes=E,f.mq=F,f.hasEvent=R,f.testProp=function(e){return a([e])},f.testAllProps=c,f.testStyles=L,f.prefixed=function(e,t,i){return t?c(e,t,i):c(e,"pfx")},m.className=m.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(g?" js "+P.join(" "):""),f}(this,this.document),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function i(e){var t="length"in e&&e.length,i=J.type(e);return"function"===i||J.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}function n(e,t,i){if(J.isFunction(t))return J.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return J.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(ae.test(t))return J.filter(t,e,i);t=J.filter(t,e)}return J.grep(e,function(e){return V.call(t,e)>=0!==i})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function s(e){var t=fe[e]={};return J.each(e.match(pe)||[],function(e,i){t[i]=!0}),t}function o(){Q.removeEventListener("DOMContentLoaded",o,!1),e.removeEventListener("load",o,!1),J.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=J.expando+a.uid++}function l(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(ke,"-$1").toLowerCase(),i=e.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:ye.test(i)?J.parseJSON(i):i}catch(r){}be.set(e,t,i)}else i=void 0;return i}function c(){return!0}function u(){return!1}function d(){try{return Q.activeElement}catch(e){}}function h(e,t){return J.nodeName(e,"table")&&J.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=Oe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var i=0,n=e.length;n>i;i++)ve.set(e[i],"globalEval",!t||ve.get(t[i],"globalEval"))}function m(e,t){var i,n,r,s,o,a,l,c;if(1===t.nodeType){if(ve.hasData(e)&&(s=ve.access(e),o=ve.set(t,s),c=s.events)){delete o.handle,o.events={};for(r in c)for(i=0,n=c[r].length;n>i;i++)J.event.add(t,r,c[r][i])}be.hasData(e)&&(a=be.access(e),l=J.extend({},a),be.set(t,l))}}function v(e,t){var i=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&J.nodeName(e,t)?J.merge([e],i):i}function b(e,t){var i=t.nodeName.toLowerCase();"input"===i&&Te.test(e.type)?t.checked=e.checked:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}function y(t,i){var n,r=J(i.createElement(t)).appendTo(i.body),s=e.getDefaultComputedStyle&&(n=e.getDefaultComputedStyle(r[0]))?n.display:J.css(r[0],"display");return r.detach(),s}function k(e){var t=Q,i=je[e];return i||(i=y(e,t),"none"!==i&&i||(Me=(Me||J("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Me[0].contentDocument,t.write(),t.close(),i=y(e,t),Me.detach()),je[e]=i),i}function x(e,t,i){var n,r,s,o,a=e.style;return i=i||ze(e),i&&(o=i.getPropertyValue(t)||i[t]),i&&(""!==o||J.contains(e.ownerDocument,e)||(o=J.style(e,t)),Ie.test(o)&&qe.test(t)&&(n=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=i.width,a.width=n,a.minWidth=r,a.maxWidth=s)),void 0!==o?o+"":o}function w(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function C(e,t){if(t in e)return t;for(var i=t[0].toUpperCase()+t.slice(1),n=t,r=Ye.length;r--;)if(t=Ye[r]+i,t in e)return t;return n}function T(e,t,i){var n=Ue.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function E(e,t,i,n,r){for(var s=i===(n?"border":"content")?4:"width"===t?1:0,o=0;4>s;s+=2)"margin"===i&&(o+=J.css(e,i+we[s],!0,r)),n?("content"===i&&(o-=J.css(e,"padding"+we[s],!0,r)),"margin"!==i&&(o-=J.css(e,"border"+we[s]+"Width",!0,r))):(o+=J.css(e,"padding"+we[s],!0,r),"padding"!==i&&(o+=J.css(e,"border"+we[s]+"Width",!0,r)));return o}function S(e,t,i){var n=!0,r="width"===t?e.offsetWidth:e.offsetHeight,s=ze(e),o="border-box"===J.css(e,"boxSizing",!1,s);if(0>=r||null==r){if(r=x(e,t,s),(0>r||null==r)&&(r=e.style[t]),Ie.test(r))return r;n=o&&(G.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+E(e,t,i||(o?"border":"content"),n,s)+"px"}function $(e,t){for(var i,n,r,s=[],o=0,a=e.length;a>o;o++)n=e[o],n.style&&(s[o]=ve.get(n,"olddisplay"),i=n.style.display,t?(s[o]||"none"!==i||(n.style.display=""),""===n.style.display&&Ce(n)&&(s[o]=ve.access(n,"olddisplay",k(n.nodeName)))):(r=Ce(n),"none"===i&&r||ve.set(n,"olddisplay",r?i:J.css(n,"display"))));for(o=0;a>o;o++)n=e[o],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?s[o]||"":"none"));return e}function A(e,t,i,n,r){return new A.prototype.init(e,t,i,n,r)}function _(){return setTimeout(function(){Ge=void 0}),Ge=J.now()}function N(e,t){var i,n=0,r={height:e};for(t=t?1:0;4>n;n+=2-t)i=we[n],r["margin"+i]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function P(e,t,i){for(var n,r=(it[t]||[]).concat(it["*"]),s=0,o=r.length;o>s;s++)if(n=r[s].call(i,t,e))return n}function D(e,t,i){var n,r,s,o,a,l,c,u,d=this,h={},p=e.style,f=e.nodeType&&Ce(e),g=ve.get(e,"fxshow");i.queue||(a=J._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,J.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],c=J.css(e,"display"),u="none"===c?ve.get(e,"olddisplay")||k(e.nodeName):c,"inline"===u&&"none"===J.css(e,"float")&&(p.display="inline-block")),i.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in t)if(r=t[n],Ze.exec(r)){if(delete t[n],s=s||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!g||void 0===g[n])continue;f=!0}h[n]=g&&g[n]||J.style(e,n)}else c=void 0;if(J.isEmptyObject(h))"inline"===("none"===c?k(e.nodeName):c)&&(p.display=c);else{g?"hidden"in g&&(f=g.hidden):g=ve.access(e,"fxshow",{}),s&&(g.hidden=!f),f?J(e).show():d.done(function(){J(e).hide()}),d.done(function(){var t;ve.remove(e,"fxshow");for(t in h)J.style(e,t,h[t])});for(n in h)o=P(f?g[n]:0,n,d),n in g||(g[n]=o.start,f&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}}function L(e,t){var i,n,r,s,o;for(i in e)if(n=J.camelCase(i),r=t[n],s=e[i],J.isArray(s)&&(r=s[1],s=e[i]=s[0]),i!==n&&(e[n]=s,delete e[i]),o=J.cssHooks[n],o&&"expand"in o){s=o.expand(s),delete e[n];for(i in s)i in e||(e[i]=s[i],t[i]=r)}else t[n]=r}function F(e,t,i){var n,r,s=0,o=tt.length,a=J.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=Ge||_(),i=Math.max(0,c.startTime+c.duration-t),n=i/c.duration||0,s=1-n,o=0,l=c.tweens.length;l>o;o++)c.tweens[o].run(s);return a.notifyWith(e,[c,s,i]),1>s&&l?i:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:J.extend({},t),opts:J.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Ge||_(),duration:i.duration,tweens:[],createTween:function(t,i){var n=J.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)c.tweens[i].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),u=c.props;for(L(u,c.opts.specialEasing);o>s;s++)if(n=tt[s].call(c,e,u,c.opts))return n;return J.map(u,P,c),J.isFunction(c.opts.start)&&c.opts.start.call(e,c),J.fx.timer(J.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function R(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,s=t.toLowerCase().match(pe)||[];if(J.isFunction(i))for(;n=s[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function O(e,t,i,n){function r(a){var l;return s[a]=!0,J.each(e[a]||[],function(e,a){var c=a(t,i,n);return"string"!=typeof c||o||s[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)}),l}var s={},o=e===yt;return r(t.dataTypes[0])||!s["*"]&&r("*")}function H(e,t){var i,n,r=J.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&J.extend(!0,e,n),e}function B(e,t,i){for(var n,r,s,o,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){l.unshift(r);break}if(l[0]in i)s=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){s=r;break}o||(o=r)}s=s||o}return s?(s!==l[0]&&l.unshift(s),i[s]):void 0}function M(e,t,i,n){var r,s,o,a,l,c={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(s=u.shift();s;)if(e.responseFields[s]&&(i[e.responseFields[s]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(o=c[l+" "+s]||c["* "+s],!o)for(r in c)if(a=r.split(" "),a[1]===s&&(o=c[l+" "+a[0]]||c["* "+a[0]])){o===!0?o=c[r]:c[r]!==!0&&(s=a[0],u.unshift(a[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(d){return{state:"parsererror",error:o?d:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}function j(e,t,i,n){var r;if(J.isArray(t))J.each(t,function(t,r){i||Tt.test(e)?n(e,r):j(e+"["+("object"==typeof r?t:"")+"]",r,i,n)});else if(i||"object"!==J.type(t))n(e,t);else for(r in t)j(e+"["+r+"]",t[r],i,n)}function q(e){return J.isWindow(e)?e:9===e.nodeType&&e.defaultView}var I=[],z=I.slice,W=I.concat,U=I.push,V=I.indexOf,K={},X=K.toString,Y=K.hasOwnProperty,G={},Q=e.document,Z="2.1.4",J=function(e,t){return new J.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ie=/-([\da-z])/gi,ne=function(e,t){return t.toUpperCase()};J.fn=J.prototype={jquery:Z,constructor:J,selector:"",length:0,toArray:function(){return z.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:z.call(this)},pushStack:function(e){var t=J.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return J.each(this,e,t)},map:function(e){return this.pushStack(J.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:U,sort:I.sort,splice:I.splice},J.extend=J.fn.extend=function(){var e,t,i,n,r,s,o=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[a]||{},a++),"object"==typeof o||J.isFunction(o)||(o={}),a===l&&(o=this,a--);l>a;a++)if(null!=(e=arguments[a]))for(t in e)i=o[t],n=e[t],o!==n&&(c&&n&&(J.isPlainObject(n)||(r=J.isArray(n)))?(r?(r=!1,s=i&&J.isArray(i)?i:[]):s=i&&J.isPlainObject(i)?i:{},o[t]=J.extend(c,s,n)):void 0!==n&&(o[t]=n));return o},J.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===J.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!J.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==J.type(e)||e.nodeType||J.isWindow(e)?!1:e.constructor&&!Y.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?K[X.call(e)]||"object":typeof e},globalEval:function(e){var t,i=eval;e=J.trim(e),e&&(1===e.indexOf("use strict")?(t=Q.createElement("script"),t.text=e,Q.head.appendChild(t).parentNode.removeChild(t)):i(e))},camelCase:function(e){return e.replace(te,"ms-").replace(ie,ne)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,s=0,o=e.length,a=i(e);if(n){if(a)for(;o>s&&(r=t.apply(e[s],n),r!==!1);s++);else for(s in e)if(r=t.apply(e[s],n),r===!1)break}else if(a)for(;o>s&&(r=t.call(e[s],s,e[s]),r!==!1);s++);else for(s in e)if(r=t.call(e[s],s,e[s]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?J.merge(n,"string"==typeof e?[e]:e):U.call(n,e)),n},inArray:function(e,t,i){return null==t?-1:V.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;i>n;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n,r=[],s=0,o=e.length,a=!i;o>s;s++)n=!t(e[s],s),n!==a&&r.push(e[s]);return r},map:function(e,t,n){var r,s=0,o=e.length,a=i(e),l=[];if(a)for(;o>s;s++)r=t(e[s],s,n),null!=r&&l.push(r);else for(s in e)r=t(e[s],s,n),null!=r&&l.push(r);return W.apply([],l)},guid:1,proxy:function(e,t){var i,n,r;return"string"==typeof t&&(i=e[t],t=e,e=i),J.isFunction(e)?(n=z.call(arguments,2),r=function(){return e.apply(t||this,n.concat(z.call(arguments)))},r.guid=e.guid=e.guid||J.guid++,r):void 0},now:Date.now,support:G}),J.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){K["[object "+t+"]"]=t.toLowerCase()});var re=function(e){function t(e,t,i,n){var r,s,o,a,l,c,d,p,f,g;if((t?t.ownerDocument||t:j)!==D&&P(t),t=t||D,i=i||[],a=t.nodeType,"string"!=typeof e||!e||1!==a&&9!==a&&11!==a)return i;if(!n&&F){if(11!==a&&(r=be.exec(e)))if(o=r[1]){if(9===a){if(s=t.getElementById(o),!s||!s.parentNode)return i;if(s.id===o)return i.push(s),i}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&B(t,s)&&s.id===o)return i.push(s),i}else{if(r[2])return Z.apply(i,t.getElementsByTagName(e)),i;if((o=r[3])&&x.getElementsByClassName)return Z.apply(i,t.getElementsByClassName(o)),i}if(x.qsa&&(!R||!R.test(e))){if(p=d=M,f=t,g=1!==a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=E(e),(d=t.getAttribute("id"))?p=d.replace(ke,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+h(c[l]);f=ye.test(e)&&u(t.parentNode)||t,g=c.join(",")}if(g)try{return Z.apply(i,f.querySelectorAll(g)),i}catch(m){}finally{d||t.removeAttribute("id")}}}return $(e.replace(le,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>w.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[M]=!0,e}function r(e){var t=D.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var i=e.split("|"),n=e.length;n--;)w.attrHandle[i[n]]=t}function o(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||K)-(~e.sourceIndex||K);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function a(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function l(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function c(e){return n(function(t){return t=+t,n(function(i,n){for(var r,s=e([],i.length,t),o=s.length;o--;)i[r=s[o]]&&(i[r]=!(n[r]=i[r]))})})}function u(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function h(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function p(e,t,i){var n=t.dir,r=i&&"parentNode"===n,s=I++;return t.first?function(t,i,s){for(;t=t[n];)if(1===t.nodeType||r)return e(t,i,s)}:function(t,i,o){var a,l,c=[q,s];if(o){for(;t=t[n];)if((1===t.nodeType||r)&&e(t,i,o))return!0}else for(;t=t[n];)if(1===t.nodeType||r){if(l=t[M]||(t[M]={}),(a=l[n])&&a[0]===q&&a[1]===s)return c[2]=a[2];if(l[n]=c,c[2]=e(t,i,o))return!0}}}function f(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function g(e,i,n){for(var r=0,s=i.length;s>r;r++)t(e,i[r],n);return n}function m(e,t,i,n,r){for(var s,o=[],a=0,l=e.length,c=null!=t;l>a;a++)(s=e[a])&&(!i||i(s,n,r))&&(o.push(s),c&&t.push(a));return o}function v(e,t,i,r,s,o){return r&&!r[M]&&(r=v(r)),s&&!s[M]&&(s=v(s,o)),n(function(n,o,a,l){var c,u,d,h=[],p=[],f=o.length,v=n||g(t||"*",a.nodeType?[a]:a,[]),b=!e||!n&&t?v:m(v,h,e,a,l),y=i?s||(n?e:f||r)?[]:o:b;if(i&&i(b,y,a,l),r)for(c=m(y,p),r(c,[],a,l),u=c.length;u--;)(d=c[u])&&(y[p[u]]=!(b[p[u]]=d));if(n){if(s||e){if(s){for(c=[],u=y.length;u--;)(d=y[u])&&c.push(b[u]=d);s(null,y=[],c,l)}for(u=y.length;u--;)(d=y[u])&&(c=s?ee(n,d):h[u])>-1&&(n[c]=!(o[c]=d))}}else y=m(y===o?y.splice(f,y.length):y),s?s(null,o,y,l):Z.apply(o,y)})}function b(e){for(var t,i,n,r=e.length,s=w.relative[e[0].type],o=s||w.relative[" "],a=s?1:0,l=p(function(e){return e===t},o,!0),c=p(function(e){return ee(t,e)>-1},o,!0),u=[function(e,i,n){var r=!s&&(n||i!==A)||((t=i).nodeType?l(e,i,n):c(e,i,n));return t=null,r}];r>a;a++)if(i=w.relative[e[a].type])u=[p(f(u),i)];else{if(i=w.filter[e[a].type].apply(null,e[a].matches),i[M]){for(n=++a;r>n&&!w.relative[e[n].type];n++);return v(a>1&&f(u),a>1&&h(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(le,"$1"),i,n>a&&b(e.slice(a,n)),r>n&&b(e=e.slice(n)),r>n&&h(e))}u.push(i)}return f(u)}function y(e,i){var r=i.length>0,s=e.length>0,o=function(n,o,a,l,c){var u,d,h,p=0,f="0",g=n&&[],v=[],b=A,y=n||s&&w.find.TAG("*",c),k=q+=null==b?1:Math.random()||.1,x=y.length;for(c&&(A=o!==D&&o);f!==x&&null!=(u=y[f]);f++){if(s&&u){for(d=0;h=e[d++];)if(h(u,o,a)){l.push(u);break}c&&(q=k)}r&&((u=!h&&u)&&p--,n&&g.push(u))}if(p+=f,r&&f!==p){for(d=0;h=i[d++];)h(g,v,o,a);if(n){if(p>0)for(;f--;)g[f]||v[f]||(v[f]=G.call(l));v=m(v)}Z.apply(l,v),c&&!n&&v.length>0&&p+i.length>1&&t.uniqueSort(l)}return c&&(q=k,A=b),g};return r?n(o):o}var k,x,w,C,T,E,S,$,A,_,N,P,D,L,F,R,O,H,B,M="sizzle"+1*new Date,j=e.document,q=0,I=0,z=i(),W=i(),U=i(),V=function(e,t){return e===t&&(N=!0),0},K=1<<31,X={}.hasOwnProperty,Y=[],G=Y.pop,Q=Y.push,Z=Y.push,J=Y.slice,ee=function(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re=ne.replace("w","w#"),se="\\["+ie+"*("+ne+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ie+"*\\]",oe=":("+ne+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+se+")*)|.*)\\)|)",ae=new RegExp(ie+"+","g"),le=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),ce=new RegExp("^"+ie+"*,"+ie+"*"),ue=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),de=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),he=new RegExp(oe),pe=new RegExp("^"+re+"$"),fe={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),TAG:new RegExp("^("+ne.replace("w","w*")+")"),ATTR:new RegExp("^"+se),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,be=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,ke=/'|\\/g,xe=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),we=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},Ce=function(){P()};try{Z.apply(Y=J.call(j.childNodes),j.childNodes),Y[j.childNodes.length].nodeType}catch(Te){Z={apply:Y.length?function(e,t){Q.apply(e,J.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}x=t.support={},T=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},P=t.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:j;return n!==D&&9===n.nodeType&&n.documentElement?(D=n,L=n.documentElement,i=n.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",Ce,!1):i.attachEvent&&i.attachEvent("onunload",Ce)),F=!T(n),x.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=r(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=ve.test(n.getElementsByClassName),x.getById=r(function(e){return L.appendChild(e).id=M,!n.getElementsByName||!n.getElementsByName(M).length}),x.getById?(w.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&F){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},w.filter.ID=function(e){var t=e.replace(xe,we);return function(e){return e.getAttribute("id")===t}}):(delete w.find.ID,w.filter.ID=function(e){var t=e.replace(xe,we);return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}}),w.find.TAG=x.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0;

}:function(e,t){var i,n=[],r=0,s=t.getElementsByTagName(e);if("*"===e){for(;i=s[r++];)1===i.nodeType&&n.push(i);return n}return s},w.find.CLASS=x.getElementsByClassName&&function(e,t){return F?t.getElementsByClassName(e):void 0},O=[],R=[],(x.qsa=ve.test(n.querySelectorAll))&&(r(function(e){L.appendChild(e).innerHTML="<a id='"+M+"'></a><select id='"+M+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||R.push("\\["+ie+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+M+"-]").length||R.push("~="),e.querySelectorAll(":checked").length||R.push(":checked"),e.querySelectorAll("a#"+M+"+*").length||R.push(".#.+[+~]")}),r(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&R.push("name"+ie+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),R.push(",.*:")})),(x.matchesSelector=ve.test(H=L.matches||L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&r(function(e){x.disconnectedMatch=H.call(e,"div"),H.call(e,"[s!='']:x"),O.push("!=",oe)}),R=R.length&&new RegExp(R.join("|")),O=O.length&&new RegExp(O.join("|")),t=ve.test(L.compareDocumentPosition),B=t||ve.test(L.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return N=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!x.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===j&&B(j,e)?-1:t===n||t.ownerDocument===j&&B(j,t)?1:_?ee(_,e)-ee(_,t):0:4&i?-1:1)}:function(e,t){if(e===t)return N=!0,0;var i,r=0,s=e.parentNode,a=t.parentNode,l=[e],c=[t];if(!s||!a)return e===n?-1:t===n?1:s?-1:a?1:_?ee(_,e)-ee(_,t):0;if(s===a)return o(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)c.unshift(i);for(;l[r]===c[r];)r++;return r?o(l[r],c[r]):l[r]===j?-1:c[r]===j?1:0},n):D},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==D&&P(e),i=i.replace(de,"='$1']"),!(!x.matchesSelector||!F||O&&O.test(i)||R&&R.test(i)))try{var n=H.call(e,i);if(n||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return t(i,D,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==D&&P(e),B(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==D&&P(e);var i=w.attrHandle[t.toLowerCase()],n=i&&X.call(w.attrHandle,t.toLowerCase())?i(e,t,!F):void 0;return void 0!==n?n:x.attributes||!F?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,r=0;if(N=!x.detectDuplicates,_=!x.sortStable&&e.slice(0),e.sort(V),N){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return _=null,e},C=t.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=C(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=C(t);return i},w=t.selectors={cacheLength:50,createPseudo:n,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xe,we),e[3]=(e[3]||e[4]||e[5]||"").replace(xe,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&he.test(i)&&(t=E(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xe,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(r){var s=t.attr(r,e);return null==s?"!="===i:i?(s+="","="===i?s===n:"!="===i?s!==n:"^="===i?n&&0===s.indexOf(n):"*="===i?n&&s.indexOf(n)>-1:"$="===i?n&&s.slice(-n.length)===n:"~="===i?(" "+s.replace(ae," ")+" ").indexOf(n)>-1:"|="===i?s===n||s.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,r){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var c,u,d,h,p,f,g=s!==o?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),b=!l&&!a;if(m){if(s){for(;g;){for(d=t;d=d[g];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&b){for(u=m[M]||(m[M]={}),c=u[e]||[],p=c[0]===q&&c[1],h=c[0]===q&&c[2],d=p&&m.childNodes[p];d=++p&&d&&d[g]||(h=p=0)||f.pop();)if(1===d.nodeType&&++h&&d===t){u[e]=[q,p,h];break}}else if(b&&(c=(t[M]||(t[M]={}))[e])&&c[0]===q)h=c[1];else for(;(d=++p&&d&&d[g]||(h=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(b&&((d[M]||(d[M]={}))[e]=[q,h]),d!==t)););return h-=r,h===n||h%n===0&&h/n>=0}}},PSEUDO:function(e,i){var r,s=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[M]?s(i):s.length>1?(r=[e,e,"",i],w.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,r=s(e,i),o=r.length;o--;)n=ee(e,r[o]),e[n]=!(t[n]=r[o])}):function(e){return s(e,0,r)}):s}},pseudos:{not:n(function(e){var t=[],i=[],r=S(e.replace(le,"$1"));return r[M]?n(function(e,t,i,n){for(var s,o=r(e,null,n,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))}):function(e,n,s){return t[0]=e,r(t,null,s,i),t[0]=null,!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return e=e.replace(xe,we),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:n(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(xe,we).toLowerCase(),function(t){var i;do if(i=F?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===L},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,i){return[0>i?i+t:i]}),even:c(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:c(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:c(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:c(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},w.pseudos.nth=w.pseudos.eq;for(k in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[k]=a(k);for(k in{submit:!0,reset:!0})w.pseudos[k]=l(k);return d.prototype=w.filters=w.pseudos,w.setFilters=new d,E=t.tokenize=function(e,i){var n,r,s,o,a,l,c,u=W[e+" "];if(u)return i?0:u.slice(0);for(a=e,l=[],c=w.preFilter;a;){(!n||(r=ce.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(s=[])),n=!1,(r=ue.exec(a))&&(n=r.shift(),s.push({value:n,type:r[0].replace(le," ")}),a=a.slice(n.length));for(o in w.filter)!(r=fe[o].exec(a))||c[o]&&!(r=c[o](r))||(n=r.shift(),s.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?t.error(e):W(e,l).slice(0)},S=t.compile=function(e,t){var i,n=[],r=[],s=U[e+" "];if(!s){for(t||(t=E(e)),i=t.length;i--;)s=b(t[i]),s[M]?n.push(s):r.push(s);s=U(e,y(r,n)),s.selector=e}return s},$=t.select=function(e,t,i,n){var r,s,o,a,l,c="function"==typeof e&&e,d=!n&&E(e=c.selector||e);if(i=i||[],1===d.length){if(s=d[0]=d[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&x.getById&&9===t.nodeType&&F&&w.relative[s[1].type]){if(t=(w.find.ID(o.matches[0].replace(xe,we),t)||[])[0],!t)return i;c&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(r=fe.needsContext.test(e)?0:s.length;r--&&(o=s[r],!w.relative[a=o.type]);)if((l=w.find[a])&&(n=l(o.matches[0].replace(xe,we),ye.test(s[0].type)&&u(t.parentNode)||t))){if(s.splice(r,1),e=n.length&&h(s),!e)return Z.apply(i,n),i;break}}return(c||S(e,d))(n,t,!F,i,ye.test(e)&&u(t.parentNode)||t),i},x.sortStable=M.split("").sort(V).join("")===M,x.detectDuplicates=!!N,P(),x.sortDetached=r(function(e){return 1&e.compareDocumentPosition(D.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||s(te,function(e,t,i){var n;return i?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);J.find=re,J.expr=re.selectors,J.expr[":"]=J.expr.pseudos,J.unique=re.uniqueSort,J.text=re.getText,J.isXMLDoc=re.isXML,J.contains=re.contains;var se=J.expr.match.needsContext,oe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ae=/^.[^:#\[\.,]*$/;J.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?J.find.matchesSelector(n,e)?[n]:[]:J.find.matches(e,J.grep(t,function(e){return 1===e.nodeType}))},J.fn.extend({find:function(e){var t,i=this.length,n=[],r=this;if("string"!=typeof e)return this.pushStack(J(e).filter(function(){for(t=0;i>t;t++)if(J.contains(r[t],this))return!0}));for(t=0;i>t;t++)J.find(e,r[t],n);return n=this.pushStack(i>1?J.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&se.test(e)?J(e):e||[],!1).length}});var le,ce=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ue=J.fn.init=function(e,t){var i,n;if(!e)return this;if("string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ce.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||le).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof J?t[0]:t,J.merge(this,J.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:Q,!0)),oe.test(i[1])&&J.isPlainObject(t))for(i in t)J.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return n=Q.getElementById(i[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=Q,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):J.isFunction(e)?"undefined"!=typeof le.ready?le.ready(e):e(J):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),J.makeArray(e,this))};ue.prototype=J.fn,le=J(Q);var de=/^(?:parents|prev(?:Until|All))/,he={children:!0,contents:!0,next:!0,prev:!0};J.extend({dir:function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&J(e).is(i))break;n.push(e)}return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),J.fn.extend({has:function(e){var t=J(e,this),i=t.length;return this.filter(function(){for(var e=0;i>e;e++)if(J.contains(this,t[e]))return!0})},closest:function(e,t){for(var i,n=0,r=this.length,s=[],o=se.test(e)||"string"!=typeof e?J(e,t||this.context):0;r>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&J.find.matchesSelector(i,e))){s.push(i);break}return this.pushStack(s.length>1?J.unique(s):s)},index:function(e){return e?"string"==typeof e?V.call(J(e),this[0]):V.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(J.unique(J.merge(this.get(),J(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),J.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return J.dir(e,"parentNode")},parentsUntil:function(e,t,i){return J.dir(e,"parentNode",i)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return J.dir(e,"nextSibling")},prevAll:function(e){return J.dir(e,"previousSibling")},nextUntil:function(e,t,i){return J.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return J.dir(e,"previousSibling",i)},siblings:function(e){return J.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return J.sibling(e.firstChild)},contents:function(e){return e.contentDocument||J.merge([],e.childNodes)}},function(e,t){J.fn[e]=function(i,n){var r=J.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=J.filter(n,r)),this.length>1&&(he[e]||J.unique(r),de.test(e)&&r.reverse()),this.pushStack(r)}});var pe=/\S+/g,fe={};J.Callbacks=function(e){e="string"==typeof e?fe[e]||s(e):J.extend({},e);var t,i,n,r,o,a,l=[],c=!e.once&&[],u=function(s){for(t=e.memory&&s,i=!0,a=r||0,r=0,o=l.length,n=!0;l&&o>a;a++)if(l[a].apply(s[0],s[1])===!1&&e.stopOnFalse){t=!1;break}n=!1,l&&(c?c.length&&u(c.shift()):t?l=[]:d.disable())},d={add:function(){if(l){var i=l.length;!function s(t){J.each(t,function(t,i){var n=J.type(i);"function"===n?e.unique&&d.has(i)||l.push(i):i&&i.length&&"string"!==n&&s(i)})}(arguments),n?o=l.length:t&&(r=i,u(t))}return this},remove:function(){return l&&J.each(arguments,function(e,t){for(var i;(i=J.inArray(t,l,i))>-1;)l.splice(i,1),n&&(o>=i&&o--,a>=i&&a--)}),this},has:function(e){return e?J.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=c=t=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,t||d.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!l||i&&!c||(t=t||[],t=[e,t.slice?t.slice():t],n?c.push(t):u(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d},J.extend({Deferred:function(e){var t=[["resolve","done",J.Callbacks("once memory"),"resolved"],["reject","fail",J.Callbacks("once memory"),"rejected"],["notify","progress",J.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return J.Deferred(function(i){J.each(t,function(t,s){var o=J.isFunction(e[t])&&e[t];r[s[1]](function(){var e=o&&o.apply(this,arguments);e&&J.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s[0]+"With"](this===n?i.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?J.extend(e,n):n}},r={};return n.pipe=n.then,J.each(t,function(e,s){var o=s[2],a=s[3];n[s[1]]=o.add,a&&o.add(function(){i=a},t[1^e][2].disable,t[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?n:this,arguments),this},r[s[0]+"With"]=o.fireWith}),n.promise(r),e&&e.call(r,r),r},when:function(e){var t,i,n,r=0,s=z.call(arguments),o=s.length,a=1!==o||e&&J.isFunction(e.promise)?o:0,l=1===a?e:J.Deferred(),c=function(e,i,n){return function(r){i[e]=this,n[e]=arguments.length>1?z.call(arguments):r,n===t?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(o>1)for(t=new Array(o),i=new Array(o),n=new Array(o);o>r;r++)s[r]&&J.isFunction(s[r].promise)?s[r].promise().done(c(r,n,s)).fail(l.reject).progress(c(r,i,t)):--a;return a||l.resolveWith(n,s),l.promise()}});var ge;J.fn.ready=function(e){return J.ready.promise().done(e),this},J.extend({isReady:!1,readyWait:1,holdReady:function(e){e?J.readyWait++:J.ready(!0)},ready:function(e){(e===!0?--J.readyWait:J.isReady)||(J.isReady=!0,e!==!0&&--J.readyWait>0||(ge.resolveWith(Q,[J]),J.fn.triggerHandler&&(J(Q).triggerHandler("ready"),J(Q).off("ready"))))}}),J.ready.promise=function(t){return ge||(ge=J.Deferred(),"complete"===Q.readyState?setTimeout(J.ready):(Q.addEventListener("DOMContentLoaded",o,!1),e.addEventListener("load",o,!1))),ge.promise(t)},J.ready.promise();var me=J.access=function(e,t,i,n,r,s,o){var a=0,l=e.length,c=null==i;if("object"===J.type(i)){r=!0;for(a in i)J.access(e,t,a,i[a],!0,s,o)}else if(void 0!==n&&(r=!0,J.isFunction(n)||(o=!0),c&&(o?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(J(e),i)})),t))for(;l>a;a++)t(e[a],i,o?n:n.call(e[a],a,t(e[a],i)));return r?e:c?t.call(e):l?t(e[0],i):s};J.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},a.uid=1,a.accepts=J.acceptData,a.prototype={key:function(e){if(!a.accepts(e))return 0;var t={},i=e[this.expando];if(!i){i=a.uid++;try{t[this.expando]={value:i},Object.defineProperties(e,t)}catch(n){t[this.expando]=i,J.extend(e,t)}}return this.cache[i]||(this.cache[i]={}),i},set:function(e,t,i){var n,r=this.key(e),s=this.cache[r];if("string"==typeof t)s[t]=i;else if(J.isEmptyObject(s))J.extend(this.cache[r],t);else for(n in t)s[n]=t[n];return s},get:function(e,t){var i=this.cache[this.key(e)];return void 0===t?i:i[t]},access:function(e,t,i){var n;return void 0===t||t&&"string"==typeof t&&void 0===i?(n=this.get(e,t),void 0!==n?n:this.get(e,J.camelCase(t))):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n,r,s=this.key(e),o=this.cache[s];if(void 0===t)this.cache[s]={};else{J.isArray(t)?n=t.concat(t.map(J.camelCase)):(r=J.camelCase(t),t in o?n=[t,r]:(n=r,n=n in o?[n]:n.match(pe)||[])),i=n.length;for(;i--;)delete o[n[i]]}},hasData:function(e){return!J.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var ve=new a,be=new a,ye=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ke=/([A-Z])/g;J.extend({hasData:function(e){return be.hasData(e)||ve.hasData(e)},data:function(e,t,i){return be.access(e,t,i)},removeData:function(e,t){be.remove(e,t)},_data:function(e,t,i){return ve.access(e,t,i)},_removeData:function(e,t){ve.remove(e,t)}}),J.fn.extend({data:function(e,t){var i,n,r,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(r=be.get(s),1===s.nodeType&&!ve.get(s,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&(n=o[i].name,0===n.indexOf("data-")&&(n=J.camelCase(n.slice(5)),l(s,n,r[n])));ve.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){be.set(this,e)}):me(this,function(t){var i,n=J.camelCase(e);if(s&&void 0===t){if(i=be.get(s,e),void 0!==i)return i;if(i=be.get(s,n),void 0!==i)return i;if(i=l(s,n,void 0),void 0!==i)return i}else this.each(function(){var i=be.get(this,n);be.set(this,n,t),-1!==e.indexOf("-")&&void 0!==i&&be.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){be.remove(this,e)})}}),J.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=ve.get(e,t),i&&(!n||J.isArray(i)?n=ve.access(e,t,J.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=J.queue(e,t),n=i.length,r=i.shift(),s=J._queueHooks(e,t),o=function(){J.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete s.stop,r.call(e,o,s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return ve.get(e,i)||ve.access(e,i,{empty:J.Callbacks("once memory").add(function(){ve.remove(e,[t+"queue",i])})})}}),J.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?J.queue(this[0],e):void 0===t?this:this.each(function(){var i=J.queue(this,e,t);J._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&J.dequeue(this,e)})},dequeue:function(e){return this.each(function(){J.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=J.Deferred(),s=this,o=this.length,a=function(){--n||r.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)i=ve.get(s[o],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(t)}});var xe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,we=["Top","Right","Bottom","Left"],Ce=function(e,t){return e=t||e,"none"===J.css(e,"display")||!J.contains(e.ownerDocument,e)},Te=/^(?:checkbox|radio)$/i;!function(){var e=Q.createDocumentFragment(),t=e.appendChild(Q.createElement("div")),i=Q.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),G.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",G.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ee="undefined";G.focusinBubbles="onfocusin"in e;var Se=/^key/,$e=/^(?:mouse|pointer|contextmenu)|click/,Ae=/^(?:focusinfocus|focusoutblur)$/,_e=/^([^.]*)(?:\.(.+)|)$/;J.event={global:{},add:function(e,t,i,n,r){var s,o,a,l,c,u,d,h,p,f,g,m=ve.get(e);if(m)for(i.handler&&(s=i,i=s.handler,r=s.selector),i.guid||(i.guid=J.guid++),(l=m.events)||(l=m.events={}),(o=m.handle)||(o=m.handle=function(t){return typeof J!==Ee&&J.event.triggered!==t.type?J.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(pe)||[""],c=t.length;c--;)a=_e.exec(t[c])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p&&(d=J.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,d=J.event.special[p]||{},u=J.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&J.expr.match.needsContext.test(r),namespace:f.join(".")},s),(h=l[p])||(h=l[p]=[],h.delegateCount=0,d.setup&&d.setup.call(e,n,f,o)!==!1||e.addEventListener&&e.addEventListener(p,o,!1)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=i.guid)),r?h.splice(h.delegateCount++,0,u):h.push(u),J.event.global[p]=!0)},remove:function(e,t,i,n,r){var s,o,a,l,c,u,d,h,p,f,g,m=ve.hasData(e)&&ve.get(e);if(m&&(l=m.events)){for(t=(t||"").match(pe)||[""],c=t.length;c--;)if(a=_e.exec(t[c])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(d=J.event.special[p]||{},p=(n?d.delegateType:d.bindType)||p,h=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;s--;)u=h[s],!r&&g!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(h.splice(s,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));o&&!h.length&&(d.teardown&&d.teardown.call(e,f,m.handle)!==!1||J.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)J.event.remove(e,p+t[c],i,n,!0);J.isEmptyObject(l)&&(delete m.handle,ve.remove(e,"events"))}},trigger:function(t,i,n,r){var s,o,a,l,c,u,d,h=[n||Q],p=Y.call(t,"type")?t.type:t,f=Y.call(t,"namespace")?t.namespace.split("."):[];if(o=a=n=n||Q,3!==n.nodeType&&8!==n.nodeType&&!Ae.test(p+J.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),c=p.indexOf(":")<0&&"on"+p,t=t[J.expando]?t:new J.Event(p,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:J.makeArray(i,[t]),d=J.event.special[p]||{},r||!d.trigger||d.trigger.apply(n,i)!==!1)){if(!r&&!d.noBubble&&!J.isWindow(n)){for(l=d.delegateType||p,Ae.test(l+p)||(o=o.parentNode);o;o=o.parentNode)h.push(o),a=o;a===(n.ownerDocument||Q)&&h.push(a.defaultView||a.parentWindow||e)}for(s=0;(o=h[s++])&&!t.isPropagationStopped();)t.type=s>1?l:d.bindType||p,u=(ve.get(o,"events")||{})[t.type]&&ve.get(o,"handle"),u&&u.apply(o,i),u=c&&o[c],u&&u.apply&&J.acceptData(o)&&(t.result=u.apply(o,i),t.result===!1&&t.preventDefault());return t.type=p,r||t.isDefaultPrevented()||d._default&&d._default.apply(h.pop(),i)!==!1||!J.acceptData(n)||c&&J.isFunction(n[p])&&!J.isWindow(n)&&(a=n[c],a&&(n[c]=null),J.event.triggered=p,n[p](),J.event.triggered=void 0,a&&(n[c]=a)),t.result}},dispatch:function(e){e=J.event.fix(e);var t,i,n,r,s,o=[],a=z.call(arguments),l=(ve.get(this,"events")||{})[e.type]||[],c=J.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(o=J.event.handlers.call(this,e,l),t=0;(r=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,i=0;(s=r.handlers[i++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,n=((J.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,a),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,r,s,o=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(n=[],i=0;a>i;i++)s=t[i],r=s.selector+" ",void 0===n[r]&&(n[r]=s.needsContext?J(r,this).index(l)>=0:J.find(r,this,null,[l]).length),n[r]&&n.push(s);n.length&&o.push({elem:l,handlers:n})}return a<t.length&&o.push({elem:this,handlers:t.slice(a)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,r,s=t.button;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||Q,n=i.documentElement,r=i.body,e.pageX=t.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[J.expando])return e;var t,i,n,r=e.type,s=e,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=$e.test(r)?this.mouseHooks:Se.test(r)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,e=new J.Event(s),t=n.length;t--;)i=n[t],e[i]=s[i];return e.target||(e.target=Q),3===e.target.nodeType&&(e.target=e.target.parentNode),o.filter?o.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==d()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===d()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&J.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return J.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var r=J.extend(new J.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?J.event.trigger(r,null,t):J.event.dispatch.call(t,r),r.isDefaultPrevented()&&i.preventDefault()}},J.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)},J.Event=function(e,t){return this instanceof J.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?c:u):this.type=e,t&&J.extend(this,t),this.timeStamp=e&&e.timeStamp||J.now(),void(this[J.expando]=!0)):new J.Event(e,t)},J.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=c,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=c,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=c,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},J.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){J.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,s=e.handleObj;return(!r||r!==n&&!J.contains(n,r))&&(e.type=s.origType,i=s.handler.apply(this,arguments),e.type=t),i}}}),G.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){J.event.simulate(t,e.target,J.event.fix(e),!0)};J.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=ve.access(n,t);r||n.addEventListener(e,i,!0),ve.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=ve.access(n,t)-1;r?ve.access(n,t,r):(n.removeEventListener(e,i,!0),ve.remove(n,t))}}}),J.fn.extend({on:function(e,t,i,n,r){var s,o;if("object"==typeof e){"string"!=typeof t&&(i=i||t,t=void 0);for(o in e)this.on(o,t,i,e[o],r);return this}if(null==i&&null==n?(n=t,i=t=void 0):null==n&&("string"==typeof t?(n=i,i=void 0):(n=i,i=t,t=void 0)),n===!1)n=u;else if(!n)return this;return 1===r&&(s=n,n=function(e){return J().off(e),s.apply(this,arguments)},n.guid=s.guid||(s.guid=J.guid++)),this.each(function(){J.event.add(this,e,n,i,t)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,J(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(i=t,t=void 0),i===!1&&(i=u),this.each(function(){J.event.remove(this,e,i,t)})},trigger:function(e,t){return this.each(function(){J.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?J.event.trigger(e,t,i,!0):void 0}});var Ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Pe=/<([\w:]+)/,De=/<|&#?\w+;/,Le=/<(?:script|style|link)/i,Fe=/checked\s*(?:[^=]|=\s*.checked.)/i,Re=/^$|\/(?:java|ecma)script/i,Oe=/^true\/(.*)/,He=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Be={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Be.optgroup=Be.option,Be.tbody=Be.tfoot=Be.colgroup=Be.caption=Be.thead,Be.th=Be.td,J.extend({clone:function(e,t,i){var n,r,s,o,a=e.cloneNode(!0),l=J.contains(e.ownerDocument,e);if(!(G.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||J.isXMLDoc(e)))for(o=v(a),s=v(e),n=0,r=s.length;r>n;n++)b(s[n],o[n]);if(t)if(i)for(s=s||v(e),o=o||v(a),n=0,r=s.length;r>n;n++)m(s[n],o[n]);else m(e,a);return o=v(a,"script"),o.length>0&&g(o,!l&&v(e,"script")),a},buildFragment:function(e,t,i,n){for(var r,s,o,a,l,c,u=t.createDocumentFragment(),d=[],h=0,p=e.length;p>h;h++)if(r=e[h],r||0===r)if("object"===J.type(r))J.merge(d,r.nodeType?[r]:r);else if(De.test(r)){for(s=s||u.appendChild(t.createElement("div")),o=(Pe.exec(r)||["",""])[1].toLowerCase(),
a=Be[o]||Be._default,s.innerHTML=a[1]+r.replace(Ne,"<$1></$2>")+a[2],c=a[0];c--;)s=s.lastChild;J.merge(d,s.childNodes),s=u.firstChild,s.textContent=""}else d.push(t.createTextNode(r));for(u.textContent="",h=0;r=d[h++];)if((!n||-1===J.inArray(r,n))&&(l=J.contains(r.ownerDocument,r),s=v(u.appendChild(r),"script"),l&&g(s),i))for(c=0;r=s[c++];)Re.test(r.type||"")&&i.push(r);return u},cleanData:function(e){for(var t,i,n,r,s=J.event.special,o=0;void 0!==(i=e[o]);o++){if(J.acceptData(i)&&(r=i[ve.expando],r&&(t=ve.cache[r]))){if(t.events)for(n in t.events)s[n]?J.event.remove(i,n):J.removeEvent(i,n,t.handle);ve.cache[r]&&delete ve.cache[r]}delete be.cache[i[be.expando]]}}}),J.fn.extend({text:function(e){return me(this,function(e){return void 0===e?J.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?J.filter(e,this):this,r=0;null!=(i=n[r]);r++)t||1!==i.nodeType||J.cleanData(v(i)),i.parentNode&&(t&&J.contains(i.ownerDocument,i)&&g(v(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(J.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return J.clone(this,e,t)})},html:function(e){return me(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Le.test(e)&&!Be[(Pe.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ne,"<$1></$2>");try{for(;n>i;i++)t=this[i]||{},1===t.nodeType&&(J.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,J.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=W.apply([],e);var i,n,r,s,o,a,l=0,c=this.length,u=this,d=c-1,h=e[0],g=J.isFunction(h);if(g||c>1&&"string"==typeof h&&!G.checkClone&&Fe.test(h))return this.each(function(i){var n=u.eq(i);g&&(e[0]=h.call(this,i,n.html())),n.domManip(e,t)});if(c&&(i=J.buildFragment(e,this[0].ownerDocument,!1,this),n=i.firstChild,1===i.childNodes.length&&(i=n),n)){for(r=J.map(v(i,"script"),p),s=r.length;c>l;l++)o=i,l!==d&&(o=J.clone(o,!0,!0),s&&J.merge(r,v(o,"script"))),t.call(this[l],o,l);if(s)for(a=r[r.length-1].ownerDocument,J.map(r,f),l=0;s>l;l++)o=r[l],Re.test(o.type||"")&&!ve.access(o,"globalEval")&&J.contains(a,o)&&(o.src?J._evalUrl&&J._evalUrl(o.src):J.globalEval(o.textContent.replace(He,"")))}return this}}),J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){J.fn[e]=function(e){for(var i,n=[],r=J(e),s=r.length-1,o=0;s>=o;o++)i=o===s?this:this.clone(!0),J(r[o])[t](i),U.apply(n,i.get());return this.pushStack(n)}});var Me,je={},qe=/^margin/,Ie=new RegExp("^("+xe+")(?!px)[a-z%]+$","i"),ze=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o.innerHTML="",r.appendChild(s);var t=e.getComputedStyle(o,null);i="1%"!==t.top,n="4px"===t.width,r.removeChild(s)}var i,n,r=Q.documentElement,s=Q.createElement("div"),o=Q.createElement("div");o.style&&(o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",G.clearCloneStyle="content-box"===o.style.backgroundClip,s.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",s.appendChild(o),e.getComputedStyle&&J.extend(G,{pixelPosition:function(){return t(),i},boxSizingReliable:function(){return null==n&&t(),n},reliableMarginRight:function(){var t,i=o.appendChild(Q.createElement("div"));return i.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",o.style.width="1px",r.appendChild(s),t=!parseFloat(e.getComputedStyle(i,null).marginRight),r.removeChild(s),o.removeChild(i),t}}))}(),J.swap=function(e,t,i,n){var r,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];r=i.apply(e,n||[]);for(s in t)e.style[s]=o[s];return r};var We=/^(none|table(?!-c[ea]).+)/,Ue=new RegExp("^("+xe+")(.*)$","i"),Ve=new RegExp("^([+-])=("+xe+")","i"),Ke={position:"absolute",visibility:"hidden",display:"block"},Xe={letterSpacing:"0",fontWeight:"400"},Ye=["Webkit","O","Moz","ms"];J.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=x(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,o,a=J.camelCase(t),l=e.style;return t=J.cssProps[a]||(J.cssProps[a]=C(l,a)),o=J.cssHooks[t]||J.cssHooks[a],void 0===i?o&&"get"in o&&void 0!==(r=o.get(e,!1,n))?r:l[t]:(s=typeof i,"string"===s&&(r=Ve.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(J.css(e,t)),s="number"),null!=i&&i===i&&("number"!==s||J.cssNumber[a]||(i+="px"),G.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(i=o.set(e,i,n))||(l[t]=i)),void 0)}},css:function(e,t,i,n){var r,s,o,a=J.camelCase(t);return t=J.cssProps[a]||(J.cssProps[a]=C(e.style,a)),o=J.cssHooks[t]||J.cssHooks[a],o&&"get"in o&&(r=o.get(e,!0,i)),void 0===r&&(r=x(e,t,n)),"normal"===r&&t in Xe&&(r=Xe[t]),""===i||i?(s=parseFloat(r),i===!0||J.isNumeric(s)?s||0:r):r}}),J.each(["height","width"],function(e,t){J.cssHooks[t]={get:function(e,i,n){return i?We.test(J.css(e,"display"))&&0===e.offsetWidth?J.swap(e,Ke,function(){return S(e,t,n)}):S(e,t,n):void 0},set:function(e,i,n){var r=n&&ze(e);return T(e,i,n?E(e,t,n,"border-box"===J.css(e,"boxSizing",!1,r),r):0)}}}),J.cssHooks.marginRight=w(G.reliableMarginRight,function(e,t){return t?J.swap(e,{display:"inline-block"},x,[e,"marginRight"]):void 0}),J.each({margin:"",padding:"",border:"Width"},function(e,t){J.cssHooks[e+t]={expand:function(i){for(var n=0,r={},s="string"==typeof i?i.split(" "):[i];4>n;n++)r[e+we[n]+t]=s[n]||s[n-2]||s[0];return r}},qe.test(e)||(J.cssHooks[e+t].set=T)}),J.fn.extend({css:function(e,t){return me(this,function(e,t,i){var n,r,s={},o=0;if(J.isArray(t)){for(n=ze(e),r=t.length;r>o;o++)s[t[o]]=J.css(e,t[o],!1,n);return s}return void 0!==i?J.style(e,t,i):J.css(e,t)},e,t,arguments.length>1)},show:function(){return $(this,!0)},hide:function(){return $(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ce(this)?J(this).show():J(this).hide()})}}),J.Tween=A,A.prototype={constructor:A,init:function(e,t,i,n,r,s){this.elem=e,this.prop=i,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(J.cssNumber[i]?"":"px")},cur:function(){var e=A.propHooks[this.prop];return e&&e.get?e.get(this):A.propHooks._default.get(this)},run:function(e){var t,i=A.propHooks[this.prop];return this.pos=t=this.options.duration?J.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):A.propHooks._default.set(this),this}},A.prototype.init.prototype=A.prototype,A.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=J.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){J.fx.step[e.prop]?J.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[J.cssProps[e.prop]]||J.cssHooks[e.prop])?J.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},A.propHooks.scrollTop=A.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},J.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},J.fx=A.prototype.init,J.fx.step={};var Ge,Qe,Ze=/^(?:toggle|show|hide)$/,Je=new RegExp("^(?:([+-])=|)("+xe+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[D],it={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),r=Je.exec(t),s=r&&r[3]||(J.cssNumber[e]?"":"px"),o=(J.cssNumber[e]||"px"!==s&&+n)&&Je.exec(J.css(i.elem,e)),a=1,l=20;if(o&&o[3]!==s){s=s||o[3],r=r||[],o=+n||1;do a=a||".5",o/=a,J.style(i.elem,e,o+s);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return r&&(o=i.start=+o||+n||0,i.unit=s,i.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),i}]};J.Animation=J.extend(F,{tweener:function(e,t){J.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,r=e.length;r>n;n++)i=e[n],it[i]=it[i]||[],it[i].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),J.speed=function(e,t,i){var n=e&&"object"==typeof e?J.extend({},e):{complete:i||!i&&t||J.isFunction(e)&&e,duration:e,easing:i&&t||t&&!J.isFunction(t)&&t};return n.duration=J.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in J.fx.speeds?J.fx.speeds[n.duration]:J.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){J.isFunction(n.old)&&n.old.call(this),n.queue&&J.dequeue(this,n.queue)},n},J.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Ce).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=J.isEmptyObject(e),s=J.speed(t,i,n),o=function(){var t=F(this,J.extend({},e),s);(r||ve.get(this,"finish"))&&t.stop(!0)};return o.finish=o,r||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",s=J.timers,o=ve.get(this);if(r)o[r]&&o[r].stop&&n(o[r]);else for(r in o)o[r]&&o[r].stop&&et.test(r)&&n(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=e&&s[r].queue!==e||(s[r].anim.stop(i),t=!1,s.splice(r,1));(t||!i)&&J.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=ve.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],s=J.timers,o=n?n.length:0;for(i.finish=!0,J.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),J.each(["toggle","show","hide"],function(e,t){var i=J.fn[t];J.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(N(t,!0),e,n,r)}}),J.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){J.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),J.timers=[],J.fx.tick=function(){var e,t=0,i=J.timers;for(Ge=J.now();t<i.length;t++)e=i[t],e()||i[t]!==e||i.splice(t--,1);i.length||J.fx.stop(),Ge=void 0},J.fx.timer=function(e){J.timers.push(e),e()?J.fx.start():J.timers.pop()},J.fx.interval=13,J.fx.start=function(){Qe||(Qe=setInterval(J.fx.tick,J.fx.interval))},J.fx.stop=function(){clearInterval(Qe),Qe=null},J.fx.speeds={slow:600,fast:200,_default:400},J.fn.delay=function(e,t){return e=J.fx?J.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},function(){var e=Q.createElement("input"),t=Q.createElement("select"),i=t.appendChild(Q.createElement("option"));e.type="checkbox",G.checkOn=""!==e.value,G.optSelected=i.selected,t.disabled=!0,G.optDisabled=!i.disabled,e=Q.createElement("input"),e.value="t",e.type="radio",G.radioValue="t"===e.value}();var nt,rt,st=J.expr.attrHandle;J.fn.extend({attr:function(e,t){return me(this,J.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){J.removeAttr(this,e)})}}),J.extend({attr:function(e,t,i){var n,r,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===Ee?J.prop(e,t,i):(1===s&&J.isXMLDoc(e)||(t=t.toLowerCase(),n=J.attrHooks[t]||(J.expr.match.bool.test(t)?rt:nt)),void 0===i?n&&"get"in n&&null!==(r=n.get(e,t))?r:(r=J.find.attr(e,t),null==r?void 0:r):null!==i?n&&"set"in n&&void 0!==(r=n.set(e,i,t))?r:(e.setAttribute(t,i+""),i):void J.removeAttr(e,t))},removeAttr:function(e,t){var i,n,r=0,s=t&&t.match(pe);if(s&&1===e.nodeType)for(;i=s[r++];)n=J.propFix[i]||i,J.expr.match.bool.test(i)&&(e[n]=!1),e.removeAttribute(i)},attrHooks:{type:{set:function(e,t){if(!G.radioValue&&"radio"===t&&J.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),rt={set:function(e,t,i){return t===!1?J.removeAttr(e,i):e.setAttribute(i,i),i}},J.each(J.expr.match.bool.source.match(/\w+/g),function(e,t){var i=st[t]||J.find.attr;st[t]=function(e,t,n){var r,s;return n||(s=st[t],st[t]=r,r=null!=i(e,t,n)?t.toLowerCase():null,st[t]=s),r}});var ot=/^(?:input|select|textarea|button)$/i;J.fn.extend({prop:function(e,t){return me(this,J.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[J.propFix[e]||e]})}}),J.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,i){var n,r,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return s=1!==o||!J.isXMLDoc(e),s&&(t=J.propFix[t]||t,r=J.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||ot.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),G.optSelected||(J.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),J.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){J.propFix[this.toLowerCase()]=this});var at=/[\t\r\n\f]/g;J.fn.extend({addClass:function(e){var t,i,n,r,s,o,a="string"==typeof e&&e,l=0,c=this.length;if(J.isFunction(e))return this.each(function(t){J(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(pe)||[];c>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(at," "):" ")){for(s=0;r=t[s++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");o=J.trim(n),i.className!==o&&(i.className=o)}return this},removeClass:function(e){var t,i,n,r,s,o,a=0===arguments.length||"string"==typeof e&&e,l=0,c=this.length;if(J.isFunction(e))return this.each(function(t){J(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(pe)||[];c>l;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(at," "):"")){for(s=0;r=t[s++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ");o=e?J.trim(n):"",i.className!==o&&(i.className=o)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):this.each(J.isFunction(e)?function(i){J(this).toggleClass(e.call(this,i,this.className,t),t)}:function(){if("string"===i)for(var t,n=0,r=J(this),s=e.match(pe)||[];t=s[n++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(i===Ee||"boolean"===i)&&(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(at," ").indexOf(t)>=0)return!0;return!1}});var lt=/\r/g;J.fn.extend({val:function(e){var t,i,n,r=this[0];{if(arguments.length)return n=J.isFunction(e),this.each(function(i){var r;1===this.nodeType&&(r=n?e.call(this,i,J(this).val()):e,null==r?r="":"number"==typeof r?r+="":J.isArray(r)&&(r=J.map(r,function(e){return null==e?"":e+""})),t=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=J.valHooks[r.type]||J.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(lt,""):null==i?"":i)}}}),J.extend({valHooks:{option:{get:function(e){var t=J.find.attr(e,"value");return null!=t?t:J.trim(J.text(e))}},select:{get:function(e){for(var t,i,n=e.options,r=e.selectedIndex,s="select-one"===e.type||0>r,o=s?null:[],a=s?r+1:n.length,l=0>r?a:s?r:0;a>l;l++)if(i=n[l],!(!i.selected&&l!==r||(G.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&J.nodeName(i.parentNode,"optgroup"))){if(t=J(i).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var i,n,r=e.options,s=J.makeArray(t),o=r.length;o--;)n=r[o],(n.selected=J.inArray(n.value,s)>=0)&&(i=!0);return i||(e.selectedIndex=-1),s}}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]={set:function(e,t){return J.isArray(t)?e.checked=J.inArray(J(e).val(),t)>=0:void 0}},G.checkOn||(J.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){J.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),J.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var ct=J.now(),ut=/\?/;J.parseJSON=function(e){return JSON.parse(e+"")},J.parseXML=function(e){var t,i;if(!e||"string"!=typeof e)return null;try{i=new DOMParser,t=i.parseFromString(e,"text/xml")}catch(n){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&J.error("Invalid XML: "+e),t};var dt=/#.*$/,ht=/([?&])_=[^&]*/,pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,ft=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,gt=/^(?:GET|HEAD)$/,mt=/^\/\//,vt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,bt={},yt={},kt="*/".concat("*"),xt=e.location.href,wt=vt.exec(xt.toLowerCase())||[];J.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xt,type:"GET",isLocal:ft.test(wt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":kt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?H(H(e,J.ajaxSettings),t):H(J.ajaxSettings,e)},ajaxPrefilter:R(bt),ajaxTransport:R(yt),ajax:function(e,t){function i(e,t,i,o){var l,u,v,b,k,w=t;2!==y&&(y=2,a&&clearTimeout(a),n=void 0,s=o||"",x.readyState=e>0?4:0,l=e>=200&&300>e||304===e,i&&(b=B(d,x,i)),b=M(d,b,x,l),l?(d.ifModified&&(k=x.getResponseHeader("Last-Modified"),k&&(J.lastModified[r]=k),k=x.getResponseHeader("etag"),k&&(J.etag[r]=k)),204===e||"HEAD"===d.type?w="nocontent":304===e?w="notmodified":(w=b.state,u=b.data,v=b.error,l=!v)):(v=w,(e||!w)&&(w="error",0>e&&(e=0))),x.status=e,x.statusText=(t||w)+"",l?f.resolveWith(h,[u,w,x]):f.rejectWith(h,[x,w,v]),x.statusCode(m),m=void 0,c&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,d,l?u:v]),g.fireWith(h,[x,w]),c&&(p.trigger("ajaxComplete",[x,d]),--J.active||J.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,s,o,a,l,c,u,d=J.ajaxSetup({},t),h=d.context||d,p=d.context&&(h.nodeType||h.jquery)?J(h):J.event,f=J.Deferred(),g=J.Callbacks("once memory"),m=d.statusCode||{},v={},b={},y=0,k="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!o)for(o={};t=pt.exec(s);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?s:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return y||(e=b[i]=b[i]||e,v[e]=t),this},overrideMimeType:function(e){return y||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||k;return n&&n.abort(t),i(0,t),this}};if(f.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,d.url=((e||d.url||xt)+"").replace(dt,"").replace(mt,wt[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=J.trim(d.dataType||"*").toLowerCase().match(pe)||[""],null==d.crossDomain&&(l=vt.exec(d.url.toLowerCase()),d.crossDomain=!(!l||l[1]===wt[1]&&l[2]===wt[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(wt[3]||("http:"===wt[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=J.param(d.data,d.traditional)),O(bt,d,t,x),2===y)return x;c=J.event&&d.global,c&&0===J.active++&&J.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!gt.test(d.type),r=d.url,d.hasContent||(d.data&&(r=d.url+=(ut.test(r)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=ht.test(r)?r.replace(ht,"$1_="+ct++):r+(ut.test(r)?"&":"?")+"_="+ct++)),d.ifModified&&(J.lastModified[r]&&x.setRequestHeader("If-Modified-Since",J.lastModified[r]),J.etag[r]&&x.setRequestHeader("If-None-Match",J.etag[r])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+kt+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)x.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(h,x,d)===!1||2===y))return x.abort();k="abort";for(u in{success:1,error:1,complete:1})x[u](d[u]);if(n=O(yt,d,t,x)){x.readyState=1,c&&p.trigger("ajaxSend",[x,d]),d.async&&d.timeout>0&&(a=setTimeout(function(){x.abort("timeout")},d.timeout));try{y=1,n.send(v,i)}catch(w){if(!(2>y))throw w;i(-1,w)}}else i(-1,"No Transport");return x},getJSON:function(e,t,i){return J.get(e,t,i,"json")},getScript:function(e,t){return J.get(e,void 0,t,"script")}}),J.each(["get","post"],function(e,t){J[t]=function(e,i,n,r){return J.isFunction(i)&&(r=r||n,n=i,i=void 0),J.ajax({url:e,type:t,dataType:r,data:i,success:n})}}),J._evalUrl=function(e){return J.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},J.fn.extend({wrapAll:function(e){var t;return J.isFunction(e)?this.each(function(t){J(this).wrapAll(e.call(this,t))}):(this[0]&&(t=J(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(J.isFunction(e)?function(t){J(this).wrapInner(e.call(this,t))}:function(){var t=J(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=J.isFunction(e);return this.each(function(i){J(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()}}),J.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},J.expr.filters.visible=function(e){return!J.expr.filters.hidden(e)};var Ct=/%20/g,Tt=/\[\]$/,Et=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,$t=/^(?:input|select|textarea|keygen)/i;J.param=function(e,t){var i,n=[],r=function(e,t){t=J.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=J.ajaxSettings&&J.ajaxSettings.traditional),J.isArray(e)||e.jquery&&!J.isPlainObject(e))J.each(e,function(){r(this.name,this.value)});else for(i in e)j(i,e[i],t,r);return n.join("&").replace(Ct,"+")},J.fn.extend({serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=J.prop(this,"elements");return e?J.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!J(this).is(":disabled")&&$t.test(this.nodeName)&&!St.test(e)&&(this.checked||!Te.test(e))}).map(function(e,t){var i=J(this).val();return null==i?null:J.isArray(i)?J.map(i,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:i.replace(Et,"\r\n")}}).get()}}),J.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var At=0,_t={},Nt={0:200,1223:204},Pt=J.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in _t)_t[e]()}),G.cors=!!Pt&&"withCredentials"in Pt,G.ajax=Pt=!!Pt,J.ajaxTransport(function(e){var t;return G.cors||Pt&&!e.crossDomain?{send:function(i,n){var r,s=e.xhr(),o=++At;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)s[r]=e.xhrFields[r];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(r in i)s.setRequestHeader(r,i[r]);t=function(e){return function(){t&&(delete _t[o],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?n(s.status,s.statusText):n(Nt[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=_t[o]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(a){if(t)throw a}},abort:function(){t&&t()}}:void 0}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return J.globalEval(e),e}}}),J.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),J.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(n,r){t=J("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),Q.head.appendChild(t[0])},abort:function(){i&&i()}}}});var Dt=[],Lt=/(=)\?(?=&|$)|\?\?/;J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Dt.pop()||J.expando+"_"+ct++;return this[e]=!0,e}}),J.ajaxPrefilter("json jsonp",function(t,i,n){var r,s,o,a=t.jsonp!==!1&&(Lt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Lt.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=J.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Lt,"$1"+r):t.jsonp!==!1&&(t.url+=(ut.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||J.error(r+" was not called"),o[0]},t.dataTypes[0]="json",s=e[r],e[r]=function(){o=arguments},n.always(function(){e[r]=s,t[r]&&(t.jsonpCallback=i.jsonpCallback,Dt.push(r)),o&&J.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),J.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||Q;var n=oe.exec(e),r=!i&&[];return n?[t.createElement(n[1])]:(n=J.buildFragment([e],t,r),r&&r.length&&J(r).remove(),J.merge([],n.childNodes))};var Ft=J.fn.load;J.fn.load=function(e,t,i){if("string"!=typeof e&&Ft)return Ft.apply(this,arguments);var n,r,s,o=this,a=e.indexOf(" ");return a>=0&&(n=J.trim(e.slice(a)),e=e.slice(0,a)),J.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),o.length>0&&J.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){s=arguments,o.html(n?J("<div>").append(J.parseHTML(e)).find(n):e)}).complete(i&&function(e,t){o.each(i,s||[e.responseText,t,e])}),this},J.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){J.fn[t]=function(e){return this.on(t,e)}}),J.expr.filters.animated=function(e){return J.grep(J.timers,function(t){return e===t.elem}).length};var Rt=e.document.documentElement;J.offset={setOffset:function(e,t,i){var n,r,s,o,a,l,c,u=J.css(e,"position"),d=J(e),h={};"static"===u&&(e.style.position="relative"),a=d.offset(),s=J.css(e,"top"),l=J.css(e,"left"),c=("absolute"===u||"fixed"===u)&&(s+l).indexOf("auto")>-1,c?(n=d.position(),o=n.top,r=n.left):(o=parseFloat(s)||0,r=parseFloat(l)||0),J.isFunction(t)&&(t=t.call(e,i,a)),null!=t.top&&(h.top=t.top-a.top+o),null!=t.left&&(h.left=t.left-a.left+r),"using"in t?t.using.call(e,h):d.css(h)}},J.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){J.offset.setOffset(this,e,t)});var t,i,n=this[0],r={top:0,left:0},s=n&&n.ownerDocument;if(s)return t=s.documentElement,J.contains(t,n)?(typeof n.getBoundingClientRect!==Ee&&(r=n.getBoundingClientRect()),i=q(s),{top:r.top+i.pageYOffset-t.clientTop,left:r.left+i.pageXOffset-t.clientLeft}):r},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===J.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),J.nodeName(e[0],"html")||(n=e.offset()),n.top+=J.css(e[0],"borderTopWidth",!0),n.left+=J.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-J.css(i,"marginTop",!0),left:t.left-n.left-J.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Rt;e&&!J.nodeName(e,"html")&&"static"===J.css(e,"position");)e=e.offsetParent;return e||Rt})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var n="pageYOffset"===i;J.fn[t]=function(r){return me(this,function(t,r,s){var o=q(t);return void 0===s?o?o[i]:t[r]:void(o?o.scrollTo(n?e.pageXOffset:s,n?s:e.pageYOffset):t[r]=s)},t,r,arguments.length,null)}}),J.each(["top","left"],function(e,t){J.cssHooks[t]=w(G.pixelPosition,function(e,i){return i?(i=x(e,t),Ie.test(i)?J(e).position()[t]+"px":i):void 0})}),J.each({Height:"height",Width:"width"},function(e,t){J.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){J.fn[n]=function(n,r){var s=arguments.length&&(i||"boolean"!=typeof n),o=i||(n===!0||r===!0?"margin":"border");return me(this,function(t,i,n){var r;return J.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===n?J.css(t,i,o):J.style(t,i,n,o)},t,s?n:void 0,s,null)}})}),J.fn.size=function(){return this.length},J.fn.andSelf=J.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return J});var Ot=e.jQuery,Ht=e.$;return J.noConflict=function(t){return e.$===J&&(e.$=Ht),t&&e.jQuery===J&&(e.jQuery=Ot),J},typeof t===Ee&&(e.jQuery=e.$=J),J}),function(e,t,i){"use strict";function n(e,i,n,r){for(var s=[],o=0;o<e.length;o++){var a=e[o];if(a){var l=tinycolor(a),c=l.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";c+=tinycolor.equals(i,a)?" sp-thumb-active":"";var u=l.toString(r.preferredFormat||"rgb"),d=m?"background-color:"+l.toRgbString():"filter:"+l.toFilter();s.push('<span title="'+u+'" data-color="'+l.toRgbString()+'" class="'+c+'"><span class="sp-thumb-inner" style="'+d+';" /></span>')}else{var h="sp-clear-display";s.push(t("<div />").append(t('<span data-color="" style="background-color:transparent;" class="'+h+'"></span>').attr("title",r.noColorSelectedText)).html())}}return"<div class='sp-cf "+n+"'>"+s.join("")+"</div>"}function r(){for(var e=0;e<f.length;e++)f[e]&&f[e].hide()}function s(e,i){var n=t.extend({},p,e);

return n.callbacks={move:u(n.move,i),change:u(n.change,i),show:u(n.show,i),hide:u(n.hide,i),beforeShow:u(n.beforeShow,i)},n}function o(o,l){function u(){if(W.showPaletteOnly&&(W.showPalette=!0),Re.text(W.showPaletteOnly?W.togglePaletteMoreText:W.togglePaletteLessText),W.palette){ue=W.palette.slice(0),de=t.isArray(ue[0])?ue:[ue],he={};for(var e=0;e<de.length;e++)for(var i=0;i<de[e].length;i++){var n=tinycolor(de[e][i]).toRgbString();he[n]=!0}}ke.toggleClass("sp-flat",U),ke.toggleClass("sp-input-disabled",!W.showInput),ke.toggleClass("sp-alpha-enabled",W.showAlpha),ke.toggleClass("sp-clear-enabled",Xe),ke.toggleClass("sp-buttons-disabled",!W.showButtons),ke.toggleClass("sp-palette-buttons-disabled",!W.togglePaletteOnly),ke.toggleClass("sp-palette-disabled",!W.showPalette),ke.toggleClass("sp-palette-only",W.showPaletteOnly),ke.toggleClass("sp-initial-disabled",!W.showInitial),ke.addClass(W.className).addClass(W.containerClassName),M()}function p(){function e(e){return e.data&&e.data.ignore?(D(t(e.target).closest(".sp-thumb-el").data("color")),R()):(D(t(e.target).closest(".sp-thumb-el").data("color")),R(),B(!0),N()),!1}if(g&&ke.find("*:not(input)").attr("unselectable","on"),u(),Be&&be.after(Me).hide(),Xe||Le.hide(),U)be.after(ke).hide();else{var i="parent"===W.appendTo?be.parent():t(W.appendTo);1!==i.length&&(i=t("body")),i.append(ke)}k(),je.bind("click.spectrum touchstart.spectrum",function(e){ye||A(),e.stopPropagation(),t(e.target).is("input")||e.preventDefault()}),(be.is(":disabled")||W.disabled===!0)&&z(),ke.click(c),_e.change($),_e.bind("paste",function(){setTimeout($,1)}),_e.keydown(function(e){13==e.keyCode&&$()}),De.text(W.cancelText),De.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),N("cancel")}),Le.attr("title",W.clearText),Le.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),Ke=!0,R(),U&&B(!0)}),Fe.text(W.chooseText),Fe.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),F()&&(B(!0),N())}),Re.text(W.showPaletteOnly?W.togglePaletteMoreText:W.togglePaletteLessText),Re.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),W.showPaletteOnly=!W.showPaletteOnly,W.showPaletteOnly||U||ke.css("left","-="+(xe.outerWidth(!0)+5)),u()}),d($e,function(e,t,i){ce=e/ne,Ke=!1,i.shiftKey&&(ce=Math.round(10*ce)/10),R()},E,S),d(Te,function(e,t){oe=parseFloat(t/te),Ke=!1,W.showAlpha||(ce=1),R()},E,S),d(we,function(e,t,i){if(i.shiftKey){if(!me){var n=ae*Z,r=J-le*J,s=Math.abs(e-n)>Math.abs(t-r);me=s?"x":"y"}}else me=null;var o=!me||"x"===me,a=!me||"y"===me;o&&(ae=parseFloat(e/Z)),a&&(le=parseFloat((J-t)/J)),Ke=!1,W.showAlpha||(ce=1),R()},E,S),Ie?(D(Ie),O(),Ue=We||tinycolor(Ie).format,x(Ie)):O(),U&&_();var n=g?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Ne.delegate(".sp-thumb-el",n,e),Pe.delegate(".sp-thumb-el:nth-child(1)",n,{ignore:!0},e)}function k(){if(K&&e.localStorage){try{var i=e.localStorage[K].split(",#");i.length>1&&(delete e.localStorage[K],t.each(i,function(e,t){x(t)}))}catch(n){}try{pe=e.localStorage[K].split(";")}catch(n){}}}function x(i){if(V){var n=tinycolor(i).toRgbString();if(!he[n]&&-1===t.inArray(n,pe))for(pe.push(n);pe.length>fe;)pe.shift();if(K&&e.localStorage)try{e.localStorage[K]=pe.join(";")}catch(r){}}}function w(){var e=[];if(W.showPalette)for(var t=0;t<pe.length;t++){var i=tinycolor(pe[t]).toRgbString();he[i]||e.push(pe[t])}return e.reverse().slice(0,W.maxSelectionSize)}function C(){var e=L(),i=t.map(de,function(t,i){return n(t,e,"sp-palette-row sp-palette-row-"+i,W)});k(),pe&&i.push(n(w(),e,"sp-palette-row sp-palette-row-selection",W)),Ne.html(i.join(""))}function T(){if(W.showInitial){var e=ze,t=L();Pe.html(n([e,t],t,"sp-palette-row-initial",W))}}function E(){(0>=J||0>=Z||0>=te)&&M(),ke.addClass(ge),me=null,be.trigger("dragstart.spectrum",[L()])}function S(){ke.removeClass(ge),be.trigger("dragstop.spectrum",[L()])}function $(){var e=_e.val();if(null!==e&&""!==e||!Xe){var t=tinycolor(e);t.isValid()?(D(t),B(!0)):_e.addClass("sp-validation-error")}else D(null),B(!0)}function A(){Q?N():_()}function _(){var i=t.Event("beforeShow.spectrum");return Q?void M():(be.trigger(i,[L()]),void(Y.beforeShow(L())===!1||i.isDefaultPrevented()||(r(),Q=!0,t(ve).bind("click.spectrum",N),t(e).bind("resize.spectrum",G),Me.addClass("sp-active"),ke.removeClass("sp-hidden"),M(),O(),ze=L(),T(),Y.show(ze),be.trigger("show.spectrum",[ze]))))}function N(i){if((!i||"click"!=i.type||2!=i.button)&&Q&&!U){Q=!1,t(ve).unbind("click.spectrum",N),t(e).unbind("resize.spectrum",G),Me.removeClass("sp-active"),ke.addClass("sp-hidden");var n=!tinycolor.equals(L(),ze);n&&(Ve&&"cancel"!==i?B(!0):P()),Y.hide(L()),be.trigger("hide.spectrum",[L()])}}function P(){D(ze,!0)}function D(e,t){if(tinycolor.equals(e,L()))return void O();var i,n;!e&&Xe?Ke=!0:(Ke=!1,i=tinycolor(e),n=i.toHsv(),oe=n.h%360/360,ae=n.s,le=n.v,ce=n.a),O(),i&&i.isValid()&&!t&&(Ue=We||i.getFormat())}function L(e){return e=e||{},Xe&&Ke?null:tinycolor.fromRatio({h:oe,s:ae,v:le,a:Math.round(100*ce)/100},{format:e.format||Ue})}function F(){return!_e.hasClass("sp-validation-error")}function R(){O(),Y.move(L()),be.trigger("move.spectrum",[L()])}function O(){_e.removeClass("sp-validation-error"),H();var e=tinycolor.fromRatio({h:oe,s:1,v:1});we.css("background-color",e.toHexString());var t=Ue;1>ce&&(0!==ce||"name"!==t)&&("hex"===t||"hex3"===t||"hex6"===t||"name"===t)&&(t="rgb");var i=L({format:t}),n="";if(qe.removeClass("sp-clear-display"),qe.css("background-color","transparent"),!i&&Xe)qe.addClass("sp-clear-display");else{var r=i.toHexString(),s=i.toRgbString();if(m||1===i.alpha?qe.css("background-color",s):(qe.css("background-color","transparent"),qe.css("filter",i.toFilter())),W.showAlpha){var o=i.toRgb();o.a=0;var a=tinycolor(o).toRgbString(),l="linear-gradient(left, "+a+", "+r+")";g?Se.css("filter",tinycolor(a).toFilter({gradientType:1},r)):(Se.css("background","-webkit-"+l),Se.css("background","-moz-"+l),Se.css("background","-ms-"+l),Se.css("background","linear-gradient(to right, "+a+", "+r+")"))}n=i.toString(t)}W.showInput&&_e.val(n),W.showPalette&&C(),T()}function H(){var e=ae,t=le;if(Xe&&Ke)Ae.hide(),Ee.hide(),Ce.hide();else{Ae.show(),Ee.show(),Ce.show();var i=e*Z,n=J-t*J;i=Math.max(-ee,Math.min(Z-ee,i-ee)),n=Math.max(-ee,Math.min(J-ee,n-ee)),Ce.css({top:n+"px",left:i+"px"});var r=ce*ne;Ae.css({left:r-re/2+"px"});var s=oe*te;Ee.css({top:s-se+"px"})}}function B(e){var t=L(),i="",n=!tinycolor.equals(t,ze);t&&(i=t.toString(Ue),x(t)),Oe&&be.val(i),ze=t,e&&n&&(Y.change(t),be.trigger("change",[t]))}function M(){Z=we.width(),J=we.height(),ee=Ce.height(),ie=Te.width(),te=Te.height(),se=Ee.height(),ne=$e.width(),re=Ae.width(),U||(ke.css("position","absolute"),ke.offset(a(ke,je))),H(),W.showPalette&&C(),be.trigger("reflow.spectrum")}function j(){be.show(),je.unbind("click.spectrum touchstart.spectrum"),ke.remove(),Me.remove(),f[Ye.id]=null}function q(e,n){return e===i?t.extend({},W):n===i?W[e]:(W[e]=n,void u())}function I(){ye=!1,be.attr("disabled",!1),je.removeClass("sp-disabled")}function z(){N(),ye=!0,be.attr("disabled",!0),je.addClass("sp-disabled")}var W=s(l,o),U=W.flat,V=W.showSelectionPalette,K=W.localStorageKey,X=W.theme,Y=W.callbacks,G=h(M,10),Q=!1,Z=0,J=0,ee=0,te=0,ie=0,ne=0,re=0,se=0,oe=0,ae=0,le=0,ce=1,ue=[],de=[],he={},pe=W.selectionPalette.slice(0),fe=W.maxSelectionSize,ge="sp-dragging",me=null,ve=o.ownerDocument,be=(ve.body,t(o)),ye=!1,ke=t(y,ve).addClass(X),xe=ke.find(".sp-picker-container"),we=ke.find(".sp-color"),Ce=ke.find(".sp-dragger"),Te=ke.find(".sp-hue"),Ee=ke.find(".sp-slider"),Se=ke.find(".sp-alpha-inner"),$e=ke.find(".sp-alpha"),Ae=ke.find(".sp-alpha-handle"),_e=ke.find(".sp-input"),Ne=ke.find(".sp-palette"),Pe=ke.find(".sp-initial"),De=ke.find(".sp-cancel"),Le=ke.find(".sp-clear"),Fe=ke.find(".sp-choose"),Re=ke.find(".sp-palette-toggle"),Oe=be.is("input"),He=Oe&&v&&"color"===be.attr("type"),Be=Oe&&!U,Me=Be?t(b).addClass(X).addClass(W.className).addClass(W.replacerClassName):t([]),je=Be?Me:be,qe=Me.find(".sp-preview-inner"),Ie=W.color||Oe&&be.val(),ze=!1,We=W.preferredFormat,Ue=We,Ve=!W.showButtons||W.clickoutFiresChange,Ke=!Ie,Xe=W.allowEmpty&&!He;p();var Ye={show:_,hide:N,toggle:A,reflow:M,option:q,enable:I,disable:z,set:function(e){D(e),B()},get:L,destroy:j,container:ke};return Ye.id=f.push(Ye)-1,Ye}function a(e,i){var n=0,r=e.outerWidth(),s=e.outerHeight(),o=i.outerHeight(),a=e[0].ownerDocument,l=a.documentElement,c=l.clientWidth+t(a).scrollLeft(),u=l.clientHeight+t(a).scrollTop(),d=i.offset();return d.top+=o,d.left-=Math.min(d.left,d.left+r>c&&c>r?Math.abs(d.left+r-c):0),d.top-=Math.min(d.top,d.top+s>u&&u>s?Math.abs(s+o-n):n),d}function l(){}function c(e){e.stopPropagation()}function u(e,t){var i=Array.prototype.slice,n=i.call(arguments,2);return function(){return e.apply(t,n.concat(i.call(arguments)))}}function d(i,n,r,s){function o(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function a(e){if(d){if(g&&document.documentMode<9&&!e.button)return c();var t=e.originalEvent.touches,r=t?t[0].pageX:e.pageX,s=t?t[0].pageY:e.pageY,a=Math.max(0,Math.min(r-h.left,f)),l=Math.max(0,Math.min(s-h.top,p));m&&o(e),n.apply(i,[a,l,e])}}function l(e){{var n=e.which?3==e.which:2==e.button;e.originalEvent.touches}n||d||r.apply(i,arguments)!==!1&&(d=!0,p=t(i).height(),f=t(i).width(),h=t(i).offset(),t(u).bind(v),t(u.body).addClass("sp-dragging"),m||a(e),o(e))}function c(){d&&(t(u).unbind(v),t(u.body).removeClass("sp-dragging"),s.apply(i,arguments)),d=!1}n=n||function(){},r=r||function(){},s=s||function(){};var u=i.ownerDocument||document,d=!1,h={},p=0,f=0,m="ontouchstart"in e,v={};v.selectstart=o,v.dragstart=o,v["touchmove mousemove"]=a,v["touchend mouseup"]=c,t(i).bind("touchstart mousedown",l)}function h(e,t,i){var n;return function(){var r=this,s=arguments,o=function(){n=null,e.apply(r,s)};i&&clearTimeout(n),(i||!n)&&(n=setTimeout(o,t))}}var p={beforeShow:l,move:l,change:l,show:l,hide:l,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!1,showInitial:!1,showPalette:!1,showPaletteOnly:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1},f=[],g=!!/msie/i.exec(e.navigator.userAgent),m=function(){function e(e,t){return!!~(""+e).indexOf(t)}var t=document.createElement("div"),i=t.style;return i.cssText="background-color:rgba(0,0,0,.5)",e(i.backgroundColor,"rgba")||e(i.backgroundColor,"hsla")}(),v=function(){var e=t("<input type='color' value='!' />")[0];return"color"===e.type&&"!"!==e.value}(),b=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),y=function(){var e="";if(g)for(var t=1;6>=t;t++)e+="<div class='sp-"+t+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),k="spectrum.id";t.fn.spectrum=function(e,i){if("string"==typeof e){var n=this,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=f[t(this).data(k)];if(i){var s=i[e];if(!s)throw new Error("Spectrum: no such method: '"+e+"'");"get"==e?n=i.get():"container"==e?n=i.container:"option"==e?n=i.option.apply(i,r):"destroy"==e?(i.destroy(),t(this).removeData(k)):s.apply(i,r)}}),n}return this.spectrum("destroy").each(function(){var i=t.extend({},e,t(this).data()),n=o(this,i);t(this).data(k,n.id)})},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=d,t.fn.spectrum.defaults=p,t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){v||t("input[type=color]").spectrum({preferredFormat:"hex6"})},function(){function t(e){var t={r:0,g:0,b:0},n=1,s=!1,a=!1;return"string"==typeof e&&(e=L(e)),"object"==typeof e&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(t=i(e.r,e.g,e.b),s=!0,a="%"===String(e.r).substr(-1)?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=N(e.s),e.v=N(e.v),t=o(e.h,e.s,e.v),s=!0,a="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=N(e.s),e.l=N(e.l),t=r(e.h,e.s,e.l),s=!0,a="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=C(n),{ok:s,format:e.format||a,r:M(255,j(t.r,0)),g:M(255,j(t.g,0)),b:M(255,j(t.b,0)),a:n}}function i(e,t,i){return{r:255*T(e,255),g:255*T(t,255),b:255*T(i,255)}}function n(e,t,i){e=T(e,255),t=T(t,255),i=T(i,255);var n,r,s=j(e,t,i),o=M(e,t,i),a=(s+o)/2;if(s==o)n=r=0;else{var l=s-o;switch(r=a>.5?l/(2-s-o):l/(s+o),s){case e:n=(t-i)/l+(i>t?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4}n/=6}return{h:n,s:r,l:a}}function r(e,t,i){function n(e,t,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?e+6*(t-e)*i:.5>i?t:2/3>i?e+(t-e)*(2/3-i)*6:e}var r,s,o;if(e=T(e,360),t=T(t,100),i=T(i,100),0===t)r=s=o=i;else{var a=.5>i?i*(1+t):i+t-i*t,l=2*i-a;r=n(l,a,e+1/3),s=n(l,a,e),o=n(l,a,e-1/3)}return{r:255*r,g:255*s,b:255*o}}function s(e,t,i){e=T(e,255),t=T(t,255),i=T(i,255);var n,r,s=j(e,t,i),o=M(e,t,i),a=s,l=s-o;if(r=0===s?0:l/s,s==o)n=0;else{switch(s){case e:n=(t-i)/l+(i>t?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4}n/=6}return{h:n,s:r,v:a}}function o(e,t,i){e=6*T(e,360),t=T(t,100),i=T(i,100);var n=H.floor(e),r=e-n,s=i*(1-t),o=i*(1-r*t),a=i*(1-(1-r)*t),l=n%6,c=[i,o,s,s,a,i][l],u=[a,i,i,o,s,s][l],d=[s,s,a,i,i,o][l];return{r:255*c,g:255*u,b:255*d}}function a(e,t,i,n){var r=[_(B(e).toString(16)),_(B(t).toString(16)),_(B(i).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function l(e,t,i,n){var r=[_(P(n)),_(B(e).toString(16)),_(B(t).toString(16)),_(B(i).toString(16))];return r.join("")}function c(e,t){t=0===t?0:t||10;var i=I(e).toHsl();return i.s-=t/100,i.s=E(i.s),I(i)}function u(e,t){t=0===t?0:t||10;var i=I(e).toHsl();return i.s+=t/100,i.s=E(i.s),I(i)}function d(e){return I(e).desaturate(100)}function h(e,t){t=0===t?0:t||10;var i=I(e).toHsl();return i.l+=t/100,i.l=E(i.l),I(i)}function p(e,t){t=0===t?0:t||10;var i=I(e).toRgb();return i.r=j(0,M(255,i.r-B(255*-(t/100)))),i.g=j(0,M(255,i.g-B(255*-(t/100)))),i.b=j(0,M(255,i.b-B(255*-(t/100)))),I(i)}function f(e,t){t=0===t?0:t||10;var i=I(e).toHsl();return i.l-=t/100,i.l=E(i.l),I(i)}function g(e,t){var i=I(e).toHsl(),n=(B(i.h)+t)%360;return i.h=0>n?360+n:n,I(i)}function m(e){var t=I(e).toHsl();return t.h=(t.h+180)%360,I(t)}function v(e){var t=I(e).toHsl(),i=t.h;return[I(e),I({h:(i+120)%360,s:t.s,l:t.l}),I({h:(i+240)%360,s:t.s,l:t.l})]}function b(e){var t=I(e).toHsl(),i=t.h;return[I(e),I({h:(i+90)%360,s:t.s,l:t.l}),I({h:(i+180)%360,s:t.s,l:t.l}),I({h:(i+270)%360,s:t.s,l:t.l})]}function y(e){var t=I(e).toHsl(),i=t.h;return[I(e),I({h:(i+72)%360,s:t.s,l:t.l}),I({h:(i+216)%360,s:t.s,l:t.l})]}function k(e,t,i){t=t||6,i=i||30;var n=I(e).toHsl(),r=360/i,s=[I(e)];for(n.h=(n.h-(r*t>>1)+720)%360;--t;)n.h=(n.h+r)%360,s.push(I(n));return s}function x(e,t){t=t||6;for(var i=I(e).toHsv(),n=i.h,r=i.s,s=i.v,o=[],a=1/t;t--;)o.push(I({h:n,s:r,v:s})),s=(s+a)%1;return o}function w(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[e[i]]=i);return t}function C(e){return e=parseFloat(e),(isNaN(e)||0>e||e>1)&&(e=1),e}function T(e,t){$(e)&&(e="100%");var i=A(e);return e=M(t,j(0,parseFloat(e))),i&&(e=parseInt(e*t,10)/100),H.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function E(e){return M(1,j(0,e))}function S(e){return parseInt(e,16)}function $(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function A(e){return"string"==typeof e&&-1!=e.indexOf("%")}function _(e){return 1==e.length?"0"+e:""+e}function N(e){return 1>=e&&(e=100*e+"%"),e}function P(e){return Math.round(255*parseFloat(e)).toString(16)}function D(e){return S(e)/255}function L(e){e=e.replace(F,"").replace(R,"").toLowerCase();var t=!1;if(z[e])e=z[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var i;return(i=U.rgb.exec(e))?{r:i[1],g:i[2],b:i[3]}:(i=U.rgba.exec(e))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=U.hsl.exec(e))?{h:i[1],s:i[2],l:i[3]}:(i=U.hsla.exec(e))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=U.hsv.exec(e))?{h:i[1],s:i[2],v:i[3]}:(i=U.hex8.exec(e))?{a:D(i[1]),r:S(i[2]),g:S(i[3]),b:S(i[4]),format:t?"name":"hex8"}:(i=U.hex6.exec(e))?{r:S(i[1]),g:S(i[2]),b:S(i[3]),format:t?"name":"hex"}:(i=U.hex3.exec(e))?{r:S(i[1]+""+i[1]),g:S(i[2]+""+i[2]),b:S(i[3]+""+i[3]),format:t?"name":"hex"}:!1}var F=/^[\s,#]+/,R=/\s+$/,O=0,H=Math,B=H.round,M=H.min,j=H.max,q=H.random,I=function V(e,i){if(e=e?e:"",i=i||{},e instanceof V)return e;if(!(this instanceof V))return new V(e,i);var n=t(e);this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=B(100*this._a)/100,this._format=i.format||n.format,this._gradientType=i.gradientType,this._r<1&&(this._r=B(this._r)),this._g<1&&(this._g=B(this._g)),this._b<1&&(this._b=B(this._b)),this._ok=n.ok,this._tc_id=O++};I.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},setAlpha:function(e){return this._a=C(e),this._roundA=B(100*this._a)/100,this},toHsv:function(){var e=s(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=s(this._r,this._g,this._b),t=B(360*e.h),i=B(100*e.s),n=B(100*e.v);return 1==this._a?"hsv("+t+", "+i+"%, "+n+"%)":"hsva("+t+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=n(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=n(this._r,this._g,this._b),t=B(360*e.h),i=B(100*e.s),r=B(100*e.l);return 1==this._a?"hsl("+t+", "+i+"%, "+r+"%)":"hsla("+t+", "+i+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return a(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return l(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:B(this._r),g:B(this._g),b:B(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+B(this._r)+", "+B(this._g)+", "+B(this._b)+")":"rgba("+B(this._r)+", "+B(this._g)+", "+B(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:B(100*T(this._r,255))+"%",g:B(100*T(this._g,255))+"%",b:B(100*T(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+B(100*T(this._r,255))+"%, "+B(100*T(this._g,255))+"%, "+B(100*T(this._b,255))+"%)":"rgba("+B(100*T(this._r,255))+"%, "+B(100*T(this._g,255))+"%, "+B(100*T(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:W[a(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+l(this._r,this._g,this._b,this._a),i=t,n=this._gradientType?"GradientType = 1, ":"";if(e){var r=I(e);i=r.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+i+")"},toString:function(e){var t=!!e;e=e||this._format;var i=!1,n=this._a<1&&this._a>=0,r=!t&&n&&("hex"===e||"hex6"===e||"hex3"===e||"name"===e);return r?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(i=this.toRgbString()),"prgb"===e&&(i=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(i=this.toHexString()),"hex3"===e&&(i=this.toHexString(!0)),"hex8"===e&&(i=this.toHex8String()),"name"===e&&(i=this.toName()),"hsl"===e&&(i=this.toHslString()),"hsv"===e&&(i=this.toHsvString()),i||this.toHexString())},_applyModification:function(e,t){var i=e.apply(null,[this].concat([].slice.call(t)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(h,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(u,arguments)},greyscale:function(){return this._applyModification(d,arguments)},spin:function(){return this._applyModification(g,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(k,arguments)},complement:function(){return this._applyCombination(m,arguments)},monochromatic:function(){return this._applyCombination(x,arguments)},splitcomplement:function(){return this._applyCombination(y,arguments)},triad:function(){return this._applyCombination(v,arguments)},tetrad:function(){return this._applyCombination(b,arguments)}},I.fromRatio=function(e,t){if("object"==typeof e){var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]="a"===n?e[n]:N(e[n]));e=i}return I(e,t)},I.equals=function(e,t){return e&&t?I(e).toRgbString()==I(t).toRgbString():!1},I.random=function(){return I.fromRatio({r:q(),g:q(),b:q()})},I.mix=function(e,t,i){i=0===i?0:i||50;var n,r=I(e).toRgb(),s=I(t).toRgb(),o=i/100,a=2*o-1,l=s.a-r.a;n=a*l==-1?a:(a+l)/(1+a*l),n=(n+1)/2;var c=1-n,u={r:s.r*n+r.r*c,g:s.g*n+r.g*c,b:s.b*n+r.b*c,a:s.a*o+r.a*(1-o)};return I(u)},I.readability=function(e,t){var i=I(e),n=I(t),r=i.toRgb(),s=n.toRgb(),o=i.getBrightness(),a=n.getBrightness(),l=Math.max(r.r,s.r)-Math.min(r.r,s.r)+Math.max(r.g,s.g)-Math.min(r.g,s.g)+Math.max(r.b,s.b)-Math.min(r.b,s.b);return{brightness:Math.abs(o-a),color:l}},I.isReadable=function(e,t){var i=I.readability(e,t);return i.brightness>125&&i.color>500},I.mostReadable=function(e,t){for(var i=null,n=0,r=!1,s=0;s<t.length;s++){var o=I.readability(e,t[s]),a=o.brightness>125&&o.color>500,l=3*(o.brightness/125)+o.color/500;(a&&!r||a&&r&&l>n||!a&&!r&&l>n)&&(r=a,n=l,i=I(t[s]))}return i};var z=I.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},W=I.hexNames=w(z),U=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",i="(?:"+t+")|(?:"+e+")",n="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?",r="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+n),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();e.tinycolor=I}(),t(function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()})}(window,jQuery),function(){"use strict";function e(t,n){function r(e,t){return function(){return e.apply(t,arguments)}}var s;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=t,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700,!e.notNeeded(t)){for(var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,l=0,c=o.length;c>l;l++)a[o[l]]=r(a[o[l]],a);i&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,i,n){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,i.hijacked||i,n):r.call(t,e,i,n)},t.addEventListener=function(e,i,n){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,i.hijacked||(i.hijacked=function(e){e.propagationStopped||i(e)}),n):r.call(t,e,i,n)}),"function"==typeof t.onclick&&(s=t.onclick,t.addEventListener("click",function(e){s(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!t,n=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,r=n&&/OS 4_\d(_\d)?/.test(navigator.userAgent),s=n&&/OS [6-7]_\d/.test(navigator.userAgent),o=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(n&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var i,n;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),n=t.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent(this.determineEventType(e),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,e.dispatchEvent(i)},e.prototype.determineEventType=function(e){return i&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;n&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,i;if(t=e.fastClickScrollParent,!t||!t.contains(e)){i=e;do{if(i.scrollHeight>i.offsetHeight){t=i,e.fastClickScrollParent=i;break}i=i.parentElement}while(i)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,i,s;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),i=e.targetTouches[0],n){if(s=window.getSelection(),s.rangeCount&&!s.isCollapsed)return!0;if(!r){if(i.identifier&&i.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=i.pageX,this.touchStartY=i.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],i=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>i||Math.abs(t.pageY-this.touchStartY)>i?!0:!1},e.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,o,a,l,c,u=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,o=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,s&&(c=e.changedTouches[0],u=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),a=u.tagName.toLowerCase(),"label"===a){if(t=this.findControl(u)){if(this.focus(u),i)return!1;u=t}}else if(this.needsFocus(u))return e.timeStamp-o>100||n&&window.top!==window&&"input"===a?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,e),n&&"select"===a||(this.targetElement=null,e.preventDefault()),!1);return n&&!r&&(l=u.fastClickScrollParent,l&&l.fastClickLastScrollTop!==l.scrollTop)?!0:(this.needsClick(u)||(e.preventDefault(),this.sendClick(u,e)),
!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;i&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,n,r,s;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(o&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction?!0:(s=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],s>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===e.style.touchAction||"manipulation"===e.style.touchAction?!0:!1)},e.attach=function(t,i){return new e(t,i)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),function(e,t,i,n){"use strict";function r(e){return("string"==typeof e||e instanceof String)&&(e=e.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"")),e}var s=function(t){for(var i=t.length,n=e("head");i--;)0===n.has("."+t[i]).length&&n.append('<meta class="'+t[i]+'" />')};s(["foundation-mq-small","foundation-mq-small-only","foundation-mq-medium","foundation-mq-medium-only","foundation-mq-large","foundation-mq-large-only","foundation-mq-xlarge","foundation-mq-xlarge-only","foundation-mq-xxlarge","foundation-data-attribute-namespace"]),e(function(){"undefined"!=typeof FastClick&&"undefined"!=typeof i.body&&FastClick.attach(i.body)});var o=function(t,n){if("string"==typeof t){if(n){var r;if(n.jquery){if(r=n[0],!r)return n}else r=n;return e(r.querySelectorAll(t))}return e(i.querySelectorAll(t))}return e(t,n)},a=function(e){var t=[];return e||t.push("data"),this.namespace.length>0&&t.push(this.namespace),t.push(this.name),t.join("-")},l=function(e){for(var t=e.split("-"),i=t.length,n=[];i--;)0!==i?n.push(t[i]):this.namespace.length>0?n.push(this.namespace,t[i]):n.push(t[i]);return n.reverse().join("-")},c=function(t,i){var n=this,r=function(){var r=o(this),s=!r.data(n.attr_name(!0)+"-init");r.data(n.attr_name(!0)+"-init",e.extend({},n.settings,i||t,n.data_options(r))),s&&n.events(this)};return o(this.scope).is("["+this.attr_name()+"]")?r.call(this.scope):o("["+this.attr_name()+"]",this.scope).each(r),"string"==typeof t?this[t].call(this,i):void 0},u=function(e,t){function i(){t(e[0])}function n(){if(this.one("load",i),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var e=this.attr("src"),t=e.match(/\?/)?"&":"?";t+="random="+(new Date).getTime(),this.attr("src",e+t)}}return e.attr("src")?void(e[0].complete||4===e[0].readyState?i():n.call(e)):void i()};t.matchMedia||(t.matchMedia=function(){var e=t.styleMedia||t.media;if(!e){var n=i.createElement("style"),r=i.getElementsByTagName("script")[0],s=null;n.type="text/css",n.id="matchmediajs-test",r.parentNode.insertBefore(n,r),s="getComputedStyle"in t&&t.getComputedStyle(n,null)||n.currentStyle,e={matchMedium:function(e){var t="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return n.styleSheet?n.styleSheet.cssText=t:n.textContent=t,"1px"===s.width}}}return function(t){return{matches:e.matchMedium(t||"all"),media:t||"all"}}}()),function(e){function i(){n&&(o(i),l&&e.fx.tick())}for(var n,r=0,s=["webkit","moz"],o=t.requestAnimationFrame,a=t.cancelAnimationFrame,l="undefined"!=typeof e.fx;r<s.length&&!o;r++)o=t[s[r]+"RequestAnimationFrame"],a=a||t[s[r]+"CancelAnimationFrame"]||t[s[r]+"CancelRequestAnimationFrame"];o?(t.requestAnimationFrame=o,t.cancelAnimationFrame=a,l&&(e.fx.timer=function(t){t()&&e.timers.push(t)&&!n&&(n=!0,i())},e.fx.stop=function(){n=!1})):(t.requestAnimationFrame=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-r)),s=t.setTimeout(function(){e(i+n)},n);return r=i+n,s},t.cancelAnimationFrame=function(e){clearTimeout(e)})}(e),t.Foundation={name:"Foundation",version:"5.5.2",media_queries:{small:o(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"small-only":o(".foundation-mq-small-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:o(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"medium-only":o(".foundation-mq-medium-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:o(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"large-only":o(".foundation-mq-large-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:o(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"xlarge-only":o(".foundation-mq-xlarge-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:o(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:e("<style></style>").appendTo("head")[0].sheet,global:{namespace:n},init:function(e,i,n,r,s){var a=[e,n,r,s],l=[];if(this.rtl=/rtl/i.test(o("html").attr("dir")),this.scope=e||this.scope,this.set_namespace(),i&&"string"==typeof i&&!/reflow/i.test(i))this.libs.hasOwnProperty(i)&&l.push(this.init_lib(i,a));else for(var c in this.libs)l.push(this.init_lib(c,i));return o(t).load(function(){o(t).trigger("resize.fndtn.clearing").trigger("resize.fndtn.dropdown").trigger("resize.fndtn.equalizer").trigger("resize.fndtn.interchange").trigger("resize.fndtn.joyride").trigger("resize.fndtn.magellan").trigger("resize.fndtn.topbar").trigger("resize.fndtn.slider")}),e},init_lib:function(t,i){return this.libs.hasOwnProperty(t)?(this.patch(this.libs[t]),i&&i.hasOwnProperty(t)?("undefined"!=typeof this.libs[t].settings?e.extend(!0,this.libs[t].settings,i[t]):"undefined"!=typeof this.libs[t].defaults&&e.extend(!0,this.libs[t].defaults,i[t]),this.libs[t].init.apply(this.libs[t],[this.scope,i[t]])):(i=i instanceof Array?i:new Array(i),this.libs[t].init.apply(this.libs[t],i))):function(){}},patch:function(e){e.scope=this.scope,e.namespace=this.global.namespace,e.rtl=this.rtl,e.data_options=this.utils.data_options,e.attr_name=a,e.add_namespace=l,e.bindings=c,e.S=this.utils.S},inherit:function(e,t){for(var i=t.split(" "),n=i.length;n--;)this.utils.hasOwnProperty(i[n])&&(e[i[n]]=this.utils[i[n]])},set_namespace:function(){var t=this.global.namespace===n?e(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=t===n||/false/i.test(t)?"":t},libs:{},utils:{S:o,throttle:function(e,t){var i=null;return function(){var n=this,r=arguments;null==i&&(i=setTimeout(function(){e.apply(n,r),i=null},t))}},debounce:function(e,t,i){var n,r;return function(){var s=this,o=arguments,a=function(){n=null,i||(r=e.apply(s,o))},l=i&&!n;return clearTimeout(n),n=setTimeout(a,t),l&&(r=e.apply(s,o)),r}},data_options:function(t,i){function n(e){return!isNaN(e-0)&&null!==e&&""!==e&&e!==!1&&e!==!0}function r(t){return"string"==typeof t?e.trim(t):t}i=i||"options";var s,o,a,l={},c=function(e){var t=Foundation.global.namespace;return e.data(t.length>0?t+"-"+i:i)},u=c(t);if("object"==typeof u)return u;for(a=(u||":").split(";"),s=a.length;s--;)o=a[s].split(":"),o=[o[0],o.slice(1).join(":")],/true/i.test(o[1])&&(o[1]=!0),/false/i.test(o[1])&&(o[1]=!1),n(o[1])&&(o[1]=-1===o[1].indexOf(".")?parseInt(o[1],10):parseFloat(o[1])),2===o.length&&o[0].length>0&&(l[r(o[0])]=r(o[1]));return l},register_media:function(t,i){Foundation.media_queries[t]===n&&(e("head").append('<meta class="'+i+'"/>'),Foundation.media_queries[t]=r(e("."+i).css("font-family")))},add_custom_rule:function(e,t){if(t===n&&Foundation.stylesheet)Foundation.stylesheet.insertRule(e,Foundation.stylesheet.cssRules.length);else{var i=Foundation.media_queries[t];i!==n&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[t]+"{ "+e+" }",Foundation.stylesheet.cssRules.length)}},image_loaded:function(e,t){function i(e){for(var t=e.length,i=t-1;i>=0;i--)if(e.attr("height")===n)return!1;return!0}var r=this,s=e.length;(0===s||i(e))&&t(e),e.each(function(){u(r.S(this),function(){s-=1,0===s&&t(e)})})},random_str:function(){return this.fidx||(this.fidx=0),this.prefix=this.prefix||[this.name||"F",(+new Date).toString(36)].join("-"),this.prefix+(this.fidx++).toString(36)},match:function(e){return t.matchMedia(e).matches},is_small_up:function(){return this.match(Foundation.media_queries.small)},is_medium_up:function(){return this.match(Foundation.media_queries.medium)},is_large_up:function(){return this.match(Foundation.media_queries.large)},is_xlarge_up:function(){return this.match(Foundation.media_queries.xlarge)},is_xxlarge_up:function(){return this.match(Foundation.media_queries.xxlarge)},is_small_only:function(){return!(this.is_medium_up()||this.is_large_up()||this.is_xlarge_up()||this.is_xxlarge_up())},is_medium_only:function(){return this.is_medium_up()&&!this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_large_only:function(){return this.is_medium_up()&&this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xxlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&this.is_xxlarge_up()}}},e.fn.foundation=function(){var e=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(e)),this})}}(jQuery,window,window.document),function(e,t,i,n){"use strict";function r(e){var t=/fade/i.test(e),i=/pop/i.test(e);return{animate:t||i,pop:i,fade:t}}Foundation.libs.reveal={name:"reveal",version:"5.5.2",locked:!1,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!0,dismiss_modal_class:"close-reveal-modal",multiple_opened:!1,bg_class:"reveal-modal-bg",root_element:"body",open:function(){},opened:function(){},close:function(){},closed:function(){},on_ajax_error:e.noop,bg:e(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(t,i,n){e.extend(!0,this.settings,i,n),this.bindings(i,n)},events:function(e){var t=this,n=t.S;return n(this.scope).off(".reveal").on("click.fndtn.reveal","["+this.add_namespace("data-reveal-id")+"]:not([disabled])",function(e){if(e.preventDefault(),!t.locked){var i=n(this),r=i.data(t.data_attr("reveal-ajax")),s=i.data(t.data_attr("reveal-replace-content"));if(t.locked=!0,"undefined"==typeof r)t.open.call(t,i);else{var o=r===!0?i.attr("href"):r;t.open.call(t,i,{url:o},{replaceContentSel:s})}}}),n(i).on("click.fndtn.reveal",this.close_targets(),function(e){if(e.preventDefault(),!t.locked){var i=n("["+t.attr_name()+"].open").data(t.attr_name(!0)+"-init")||t.settings,r=n(e.target)[0]===n("."+i.bg_class)[0];if(r){if(!i.close_on_background_click)return;e.stopPropagation()}t.locked=!0,t.close.call(t,r?n("["+t.attr_name()+"].open:not(.toback)"):n(this).closest("["+t.attr_name()+"]"))}}),n("["+t.attr_name()+"]",this.scope).length>0?n(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video):n(this.scope).on("open.fndtn.reveal","["+t.attr_name()+"]",this.settings.open).on("opened.fndtn.reveal","["+t.attr_name()+"]",this.settings.opened).on("opened.fndtn.reveal","["+t.attr_name()+"]",this.open_video).on("close.fndtn.reveal","["+t.attr_name()+"]",this.settings.close).on("closed.fndtn.reveal","["+t.attr_name()+"]",this.settings.closed).on("closed.fndtn.reveal","["+t.attr_name()+"]",this.close_video),!0},key_up_on:function(e){var t=this;return t.S("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(e){var i=t.S("["+t.attr_name()+"].open"),n=i.data(t.attr_name(!0)+"-init")||t.settings;n&&27===e.which&&n.close_on_esc&&!t.locked&&t.close.call(t,i)}),!0},key_up_off:function(e){return this.S("body").off("keyup.fndtn.reveal"),!0},open:function(i,n){var r,s=this;i?"undefined"!=typeof i.selector?r=s.S("#"+i.data(s.data_attr("reveal-id"))).first():(r=s.S(this.scope),n=i):r=s.S(this.scope);var o=r.data(s.attr_name(!0)+"-init");if(o=o||this.settings,r.hasClass("open")&&i.attr("data-reveal-id")==r.attr("id"))return s.close(r);if(!r.hasClass("open")){var a=s.S("["+s.attr_name()+"].open");if("undefined"==typeof r.data("css-top")&&r.data("css-top",parseInt(r.css("top"),10)).data("offset",this.cache_offset(r)),r.attr("tabindex","0").attr("aria-hidden","false"),this.key_up_on(r),r.on("open.fndtn.reveal",function(e){"fndtn.reveal"!==e.namespace}),r.on("open.fndtn.reveal").trigger("open.fndtn.reveal"),a.length<1&&this.toggle_bg(r,!0),"string"==typeof n&&(n={url:n}),"undefined"!=typeof n&&n.url){var l="undefined"!=typeof n.success?n.success:null;e.extend(n,{success:function(t,i,n){if(e.isFunction(l)){var c=l(t,i,n);"string"==typeof c&&(t=c)}"undefined"!=typeof options&&"undefined"!=typeof options.replaceContentSel?r.find(options.replaceContentSel).html(t):r.html(t),s.S(r).foundation("section","reflow"),s.S(r).children().foundation(),a.length>0&&(o.multiple_opened?s.to_back(a):s.hide(a,o.css.close)),s.show(r,o.css.open)}}),o.on_ajax_error!==e.noop&&e.extend(n,{error:o.on_ajax_error}),e.ajax(n)}else a.length>0&&(o.multiple_opened?s.to_back(a):s.hide(a,o.css.close)),this.show(r,o.css.open)}s.S(t).trigger("resize")},close:function(t){var t=t&&t.length?t:this.S(this.scope),i=this.S("["+this.attr_name()+"].open"),n=t.data(this.attr_name(!0)+"-init")||this.settings,r=this;i.length>0&&(t.removeAttr("tabindex","0").attr("aria-hidden","true"),this.locked=!0,this.key_up_off(t),t.trigger("close.fndtn.reveal"),(n.multiple_opened&&1===i.length||!n.multiple_opened||t.length>1)&&(r.toggle_bg(t,!1),r.to_front(t)),n.multiple_opened?(r.hide(t,n.css.close,n),r.to_front(e(e.makeArray(i).reverse()[1]))):r.hide(i,n.css.close,n))},close_targets:function(){var e="."+this.settings.dismiss_modal_class;return this.settings.close_on_background_click?e+", ."+this.settings.bg_class:e},toggle_bg:function(t,i){0===this.S("."+this.settings.bg_class).length&&(this.settings.bg=e("<div />",{"class":this.settings.bg_class}).appendTo("body").hide());var r=this.settings.bg.filter(":visible").length>0;i!=r&&((i==n?r:!i)?this.hide(this.settings.bg):this.show(this.settings.bg))},show:function(i,n){if(n){var s=i.data(this.attr_name(!0)+"-init")||this.settings,o=s.root_element,a=this;if(0===i.parent(o).length){var l=i.wrap('<div style="display: none;" />').parent();i.on("closed.fndtn.reveal.wrapped",function(){i.detach().appendTo(l),i.unwrap().unbind("closed.fndtn.reveal.wrapped")}),i.detach().appendTo(o)}var c=r(s.animation);if(c.animate||(this.locked=!1),c.pop){n.top=e(t).scrollTop()-i.data("offset")+"px";var u={top:e(t).scrollTop()+i.data("css-top")+"px",opacity:1};return setTimeout(function(){return i.css(n).animate(u,s.animation_speed,"linear",function(){a.locked=!1,i.trigger("opened.fndtn.reveal")}).addClass("open")},s.animation_speed/2)}if(c.fade){n.top=e(t).scrollTop()+i.data("css-top")+"px";var u={opacity:1};return setTimeout(function(){return i.css(n).animate(u,s.animation_speed,"linear",function(){a.locked=!1,i.trigger("opened.fndtn.reveal")}).addClass("open")},s.animation_speed/2)}return i.css(n).show().css({opacity:1}).addClass("open").trigger("opened.fndtn.reveal")}var s=this.settings;return r(s.animation).fade?i.fadeIn(s.animation_speed/2):(this.locked=!1,i.show())},to_back:function(e){e.addClass("toback")},to_front:function(e){e.removeClass("toback")},hide:function(i,n){if(n){var s=i.data(this.attr_name(!0)+"-init"),o=this;s=s||this.settings;var a=r(s.animation);if(a.animate||(this.locked=!1),a.pop){var l={top:-e(t).scrollTop()-i.data("offset")+"px",opacity:0};return setTimeout(function(){return i.animate(l,s.animation_speed,"linear",function(){o.locked=!1,i.css(n).trigger("closed.fndtn.reveal")}).removeClass("open")},s.animation_speed/2)}if(a.fade){var l={opacity:0};return setTimeout(function(){return i.animate(l,s.animation_speed,"linear",function(){o.locked=!1,i.css(n).trigger("closed.fndtn.reveal")}).removeClass("open")},s.animation_speed/2)}return i.hide().css(n).removeClass("open").trigger("closed.fndtn.reveal")}var s=this.settings;return r(s.animation).fade?i.fadeOut(s.animation_speed/2):i.hide()},close_video:function(t){var i=e(".flex-video",t.target),n=e("iframe",i);n.length>0&&(n.attr("data-src",n[0].src),n.attr("src",n.attr("src")),i.hide())},open_video:function(t){var i=e(".flex-video",t.target),r=i.find("iframe");if(r.length>0){var s=r.attr("data-src");if("string"==typeof s)r[0].src=r.attr("data-src");else{var o=r[0].src;r[0].src=n,r[0].src=o}i.show()}},data_attr:function(e){return this.namespace.length>0?this.namespace+"-"+e:e},cache_offset:function(e){var t=e.show().height()+parseInt(e.css("top"),10)+e.scrollY;return e.hide(),t},off:function(){e(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(jQuery,window,window.document),function(e){"use strict";function t(e,i){return new t.prototype.init(e,i)}Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;return function(){return t.apply(e)}});var i=0,n=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,r=/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/;e.fn.redactor=function(i){var n=[],r=Array.prototype.slice.call(arguments,1);return this.each("string"==typeof i?function(){var t,s=e.data(this,"redactor");if("-1"!=i.search(/\./)?(t=i.split("."),"undefined"!=typeof s[t[0]]&&(t=s[t[0]][t[1]])):t=s[i],"undefined"!=typeof s&&e.isFunction(t)){var o=t.apply(s,r);void 0!==o&&o!==s&&n.push(o)}else e.error('No such method "'+i+'" for Redactor')}:function(){e.data(this,"redactor",{}),e.data(this,"redactor",t(this,i))}),0===n.length?this:1===n.length?n[0]:n},e.Redactor=t,e.Redactor.VERSION="10.0.9",e.Redactor.modules=["alignment","autosave","block","buffer","build","button","caret","clean","code","core","dropdown","file","focus","image","indent","inline","insert","keydown","keyup","lang","line","link","list","modal","observe","paragraphize","paste","placeholder","progress","selection","shortcuts","tabifier","tidy","toolbar","upload","utils"],e.Redactor.opts={lang:"en",direction:"ltr",plugins:!1,focus:!1,focusEnd:!1,placeholder:!1,visual:!0,tabindex:!1,minHeight:!1,maxHeight:!1,linebreaks:!1,replaceDivs:!0,paragraphize:!0,cleanStyleOnEnter:!1,enterKey:!0,cleanOnPaste:!0,cleanSpaces:!0,pastePlainText:!1,autosave:!1,autosaveName:!1,autosaveInterval:60,autosaveOnChange:!1,autosaveFields:!1,linkTooltip:!0,linkProtocol:"http",linkNofollow:!1,linkSize:50,imageEditable:!0,imageLink:!0,imagePosition:!0,imageFloatMargin:"10px",imageResizable:!0,imageUpload:null,imageUploadParam:"file",uploadImageField:!1,dragImageUpload:!0,fileUpload:null,fileUploadParam:"file",dragFileUpload:!0,s3:!1,convertLinks:!0,convertUrlLinks:!0,convertImageLinks:!0,convertVideoLinks:!0,preSpaces:4,tabAsSpaces:!1,tabKey:!0,scrollTarget:!1,toolbar:!0,toolbarFixed:!0,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarExternal:!1,toolbarOverflow:!1,source:!0,buttons:["html","formatting","bold","italic","deleted","unorderedlist","orderedlist","outdent","indent","image","file","link","alignment","horizontalrule"],buttonsHide:[],buttonsHideOnMobile:[],formatting:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],formattingAdd:!1,tabifier:!0,deniedTags:["script","style"],allowedTags:!1,removeComments:!1,replaceTags:[["strike","del"]],replaceStyles:[["font-weight:\\s?bold","strong"],["font-style:\\s?italic","em"],["text-decoration:\\s?underline","u"],["text-decoration:\\s?line-through","del"]],removeDataAttr:!1,removeAttr:!1,allowedAttr:!1,removeWithoutAttr:["span"],removeEmpty:["p"],activeButtons:["deleted","italic","bold","underline","unorderedlist","orderedlist","alignleft","aligncenter","alignright","justify"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",ul:"unorderedlist",ol:"orderedlist",u:"underline"},shortcuts:{"ctrl+shift+m, meta+shift+m":{func:"inline.removeFormat"},"ctrl+b, meta+b":{func:"inline.format",params:["bold"]},"ctrl+i, meta+i":{func:"inline.format",params:["italic"]},"ctrl+h, meta+h":{func:"inline.format",params:["superscript"]},"ctrl+l, meta+l":{func:"inline.format",params:["subscript"]},"ctrl+k, meta+k":{func:"link.show"},"ctrl+shift+7":{func:"list.toggle",params:["orderedlist"]},"ctrl+shift+8":{func:"list.toggle",params:["unorderedlist"]}},shortcutsAdd:!1,buffer:[],rebuffer:[],emptyHtml:"<p>&#x200b;</p>",invisibleSpace:"&#x200b;",imageTypes:["image/png","image/jpeg","image/gif"],indentValue:20,verifiedTags:["a","img","b","strong","sub","sup","i","em","u","small","strike","del","cite","ul","ol","li"],inlineTags:["strong","b","u","em","i","code","del","ins","samp","kbd","sup","sub","mark","var","cite","small"],alignmentTags:["P","H1","H2","H3","H4","H5","H6","DL","DT","DD","DIV","TD","BLOCKQUOTE","OUTPUT","FIGCAPTION","ADDRESS","SECTION","HEADER","FOOTER","ASIDE","ARTICLE"],blockLevelElements:["PRE","UL","OL","LI"],langs:{en:{html:"HTML",video:"Insert Video",image:"Insert Image",table:"Table",link:"Link",link_insert:"Insert link",link_edit:"Edit link",unlink:"Unlink",formatting:"Formatting",paragraph:"Normal text",quote:"Quote",code:"Code",header1:"Header 1",header2:"Header 2",header3:"Header 3",header4:"Header 4",header5:"Header 5",bold:"Bold",italic:"Italic",fontcolor:"Font Color",backcolor:"Back Color",unorderedlist:"Unordered List",orderedlist:"Ordered List",outdent:"Outdent",indent:"Indent",cancel:"Cancel",insert:"Insert",save:"Save",_delete:"Delete",insert_table:"Insert Table",insert_row_above:"Add Row Above",insert_row_below:"Add Row Below",insert_column_left:"Add Column Left",insert_column_right:"Add Column Right",delete_column:"Delete Column",delete_row:"Delete Row",delete_table:"Delete Table",rows:"Rows",columns:"Columns",add_head:"Add Head",delete_head:"Delete Head",title:"Title",image_position:"Position",none:"None",left:"Left",right:"Right",center:"Center",image_web_link:"Image Web Link",text:"Text",mailto:"Email",web:"URL",video_html_code:"Video Embed Code or Youtube/Vimeo Link",file:"Insert File",upload:"Upload",download:"Download",choose:"Choose",or_choose:"Or choose",drop_file_here:"Drop file here",align_left:"Align text to the left",align_center:"Center text",align_right:"Align text to the right",align_justify:"Justify text",horizontalrule:"Insert Horizontal Rule",deleted:"Deleted",anchor:"Anchor",link_new_tab:"Open link in new tab",underline:"Underline",alignment:"Alignment",filename:"Name (optional)",edit:"Edit",upload_label:"Drop file here or "}}},t.fn=e.Redactor.prototype={keyCode:{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9,CTRL:17,META:91,SHIFT:16,ALT:18,RIGHT:39,LEFT:37,LEFT_WIN:91},init:function(t,n){if(this.$element=e(t),this.uuid=i++,this.rtePaste=!1,this.$pasteBox=!1,this.loadOptions(n),this.loadModules(),this.formatting={},e.merge(this.opts.blockLevelElements,this.opts.alignmentTags),this.reIsBlock=new RegExp("^("+this.opts.blockLevelElements.join("|")+")$","i"),this.tidy.setupAllowed(),this.opts.deniedTags!==!1)for(var r=["html","head","link","body","meta","applet"],s=0;s<r.length;s++)this.opts.deniedTags.push(r[s]);this.lang.load(),e.extend(this.opts.shortcuts,this.opts.shortcutsAdd),this.core.setCallback("start"),this.start=!0,this.build.run()},loadOptions:function(t){this.opts=e.extend({},e.extend(!0,{},e.Redactor.opts),this.$element.data(),t)},getModuleMethods:function(e){return Object.getOwnPropertyNames(e).filter(function(t){return"function"==typeof e[t]})},loadModules:function(){for(var t=e.Redactor.modules.length,i=0;t>i;i++)this.bindModuleMethods(e.Redactor.modules[i])},bindModuleMethods:function(e){if("undefined"!=typeof this[e]){this[e]=this[e]();for(var t=this.getModuleMethods(this[e]),i=t.length,n=0;i>n;n++)this[e][t[n]]=this[e][t[n]].bind(this)}},alignment:function(){return{left:function(){this.alignment.set("")},right:function(){this.alignment.set("right")},center:function(){this.alignment.set("center")},justify:function(){this.alignment.set("justify")},set:function(e){this.utils.browser("msie")||this.$editor.focus(),this.buffer.set(),this.selection.save(),this.alignment.blocks=this.selection.getBlocks(),this.alignment.type=e,this.alignment.isLinebreaksOrNoBlocks()?this.alignment.setText():this.alignment.setBlocks(),this.selection.restore(),this.code.sync()},setText:function(){var t=this.selection.wrap("div");e(t).attr("data-tagblock","redactor").css("text-align",this.alignment.type)},setBlocks:function(){e.each(this.alignment.blocks,e.proxy(function(e,t){var i=this.utils.getAlignmentElement(t);i&&(this.alignment.isNeedReplaceElement(i)?this.alignment.replaceElement(i):this.alignment.alignElement(i))},this))},isLinebreaksOrNoBlocks:function(){return this.opts.linebreaks&&this.alignment.blocks[0]===!1},isNeedReplaceElement:function(e){return""===this.alignment.type&&"undefined"!=typeof e.data("tagblock")},replaceElement:function(e){e.replaceWith(e.html())},alignElement:function(e){e.css("text-align",this.alignment.type),this.utils.removeEmptyAttr(e,"style")}}},autosave:function(){return{enable:function(){this.opts.autosave&&(this.autosave.html=!1,this.autosave.name=this.opts.autosaveName?this.opts.autosaveName:this.$textarea.attr("name"),this.opts.autosaveOnChange||(this.autosaveInterval=setInterval(this.autosave.load,1e3*this.opts.autosaveInterval)))},onChange:function(){this.opts.autosaveOnChange&&this.autosave.load()},load:function(){if(this.autosave.source=this.code.get(),this.autosave.html!==this.autosave.source&&!this.utils.isEmpty(this.autosave.source)){var t={};t.name=this.autosave.name,t[this.autosave.name]=this.autosave.source,t=this.auotsave.getHiddenFields(t);var i=e.ajax({url:this.opts.autosave,type:"post",data:t});i.done(this.autosave.success)}},getHiddenFields:function(t){return this.opts.autosaveFields===!1||"object"!=typeof this.opts.autosaveFields?t:(e.each(this.opts.autosaveFields,e.proxy(function(i,n){null!==n&&0===n.toString().indexOf("#")&&(n=e(n).val()),t[i]=n},this)),t)},success:function(t){var i;try{i=e.parseJSON(t)}catch(n){i=t}var r="undefined"==typeof i.error?"autosave":"autosaveError";this.core.setCallback(r,this.autosave.name,i),this.autosave.html=this.autosave.source},disable:function(){clearInterval(this.autosaveInterval)}}},block:function(){return{formatting:function(e){this.block.clearStyle=!1;var t,i;"undefined"!=typeof this.formatting[e].data?t="data":"undefined"!=typeof this.formatting[e].attr?t="attr":"undefined"!=typeof this.formatting[e]["class"]&&(t="class"),"undefined"!=typeof this.formatting[e].clear&&(this.block.clearStyle=!0),t&&(i=this.formatting[e][t]),this.block.format(this.formatting[e].tag,t,i)},format:function(t,i,n){"quote"==t&&(t="blockquote");var r=["p","pre","blockquote","h1","h2","h3","h4","h5","h6"];-1!=e.inArray(t,r)&&(this.block.isRemoveInline="pre"==t||-1!=t.search(/h[1-6]/i),this.utils.browser("msie")||this.$editor.focus(),this.block.blocks=this.selection.getBlocks(),this.block.blocksSize=this.block.blocks.length,this.block.type=i,this.block.value=n,this.buffer.set(),this.selection.save(),this.block.set(t),this.selection.restore(),this.code.sync())},set:function(e){this.selection.get(),this.block.containerTag=this.range.commonAncestorContainer.tagName,this.range.collapsed?this.block.setCollapsed(e):this.block.setMultiple(e)},setCollapsed:function(t){var i=this.block.blocks[0];if(i!==!1){if("LI"==i.tagName){if("blockquote"!=t)return;return void this.block.formatListToBlockquote()}var n="TD"==this.block.containerTag||"TH"==this.block.containerTag;if(n&&!this.opts.linebreaks)document.execCommand("formatblock",!1,"<"+t+">"),i=this.selection.getBlock(),this.block.toggle(e(i));else if(i.tagName.toLowerCase()!=t)if(this.opts.linebreaks&&"p"==t)e(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else{var r=this.utils.replaceToTag(i,t);this.block.toggle(r),"p"!=t&&"blockquote"!=t&&r.find("img").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(r),("p"==t||this.block.headTag)&&r.find("p").contents().unwrap(),this.block.formatTableWrapping(r)}else if("blockquote"==t&&i.tagName.toLowerCase()==t)if(this.opts.linebreaks)e(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else{var s=this.utils.replaceToTag(i,"p");this.block.toggle(s)}else i.tagName.toLowerCase()==t&&this.block.toggle(e(i));"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&e(i).removeAttr("class").removeAttr("style")}},setMultiple:function(t){var i=this.block.blocks[0],n="TD"==this.block.containerTag||"TH"==this.block.containerTag;if(i!==!1&&1===this.block.blocksSize)if(i.tagName.toLowerCase()==t&&"blockquote"==t)if(this.opts.linebreaks)e(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else{var r=this.utils.replaceToTag(i,"p");this.block.toggle(r)}else if("LI"==i.tagName){if("blockquote"!=t)return;this.block.formatListToBlockquote()}else if("BLOCKQUOTE"==this.block.containerTag)this.block.formatBlockquote(t);else if(this.opts.linebreaks&&(n||this.range.commonAncestorContainer!=i))this.block.formatWrap(t);else if(this.opts.linebreaks&&"p"==t)e(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else if("TD"===i.tagName)this.block.formatWrap(t);else{var s=this.utils.replaceToTag(i,t);this.block.toggle(s),this.block.isRemoveInline&&this.utils.removeInlineTags(s),("p"==t||this.block.headTag)&&s.find("p").contents().unwrap()}else if(this.opts.linebreaks||"p"!=t){if("blockquote"==t){for(var o=0,a=0;a<this.block.blocksSize;a++)"BLOCKQUOTE"==this.block.blocks[a].tagName&&o++;if(o==this.block.blocksSize)return void e.each(this.block.blocks,e.proxy(function(t,i){var n=!1;this.opts.linebreaks?(e(i).prepend("<br>").append("<br>"),n=this.utils.replaceWithContents(i)):n=this.utils.replaceToTag(i,"p"),n&&"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&n.removeAttr("class").removeAttr("style")},this))}this.block.formatWrap(t)}else{var l=0,c=!1;"class"==this.block.type&&(c="toggle",l=e(this.block.blocks).filter("."+this.block.value).length,this.block.blocksSize==l?c="toggle":this.block.blocksSize>l?c="set":0===l&&(c="set"));var u=["ul","ol","li","td","th","dl","dt","dd"];e.each(this.block.blocks,e.proxy(function(i,n){if(-1==e.inArray(n.tagName.toLowerCase(),u)){var r=this.utils.replaceToTag(n,t);c?"toggle"==c?this.block.toggle(r):"remove"==c?this.block.remove(r):"set"==c&&this.block.setForce(r):this.block.toggle(r),
"p"!=t&&"blockquote"!=t&&r.find("img").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(r),("p"==t||this.block.headTag)&&r.find("p").contents().unwrap(),"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&r.removeAttr("class").removeAttr("style")}},this))}},setForce:function(e){return this.block.clearStyle&&e.removeAttr("class").removeAttr("style"),"class"==this.block.type?void e.addClass(this.block.value):"attr"==this.block.type||"data"==this.block.type?void e.attr(this.block.value.name,this.block.value.value):void 0},toggle:function(e){return this.block.clearStyle&&e.removeAttr("class").removeAttr("style"),"class"==this.block.type?void e.toggleClass(this.block.value):"attr"==this.block.type||"data"==this.block.type?void(e.attr(this.block.value.name)==this.block.value.value?e.removeAttr(this.block.value.name):e.attr(this.block.value.name,this.block.value.value)):void e.removeAttr("style class")},remove:function(e){e.removeClass(this.block.value)},formatListToBlockquote:function(){var t=e(this.block.blocks[0]).closest("ul, ol");e(t).find("ul, ol").contents().unwrap(),e(t).find("li").append(e("<br>")).contents().unwrap();var i=this.utils.replaceToTag(t,"blockquote");this.block.toggle(i)},formatBlockquote:function(t){document.execCommand("outdent"),document.execCommand("formatblock",!1,t),this.clean.clearUnverified(),this.$editor.find("p:empty").remove();var i=this.selection.getBlock();"p"!=t&&e(i).find("img").remove(),this.opts.linebreaks||this.block.toggle(e(i)),this.$editor.find("ul, ol, tr, blockquote, p").each(e.proxy(this.utils.removeEmpty,this)),this.opts.linebreaks&&"p"==t&&this.utils.replaceWithContents(i)},formatWrap:function(t){if("UL"==this.block.containerTag||"OL"==this.block.containerTag){if("blockquote"!=t)return;this.block.formatListToBlockquote()}var i=this.selection.wrap(t);if(i!==!1){var n=e(i);this.block.formatTableWrapping(n);var r=n.find(this.opts.blockLevelElements.join(",")+", td, table, thead, tbody, tfoot, th, tr");(this.opts.linebreaks&&"p"==t||"pre"==t||"blockquote"==t)&&r.append("<br />"),r.contents().unwrap(),"p"!=t&&"blockquote"!=t&&n.find("img").remove(),e.each(this.block.blocks,e.proxy(this.utils.removeEmpty,this)),n.append(this.selection.getMarker(2)),this.opts.linebreaks||this.block.toggle(n),this.$editor.find("ul, ol, tr, blockquote, p").each(e.proxy(this.utils.removeEmpty,this)),n.find("blockquote:empty").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(n),this.opts.linebreaks&&"p"==t&&this.utils.replaceWithContents(n)}},formatTableWrapping:function(e){0!==e.closest("table").length&&(0===e.closest("tr").length&&e.wrap("<tr>"),0===e.closest("td").length&&0===e.closest("th").length&&e.wrap("<td>"))},removeData:function(t,i){var n=this.selection.getBlocks();e(n).removeAttr("data-"+t),this.code.sync()},setData:function(t,i){var n=this.selection.getBlocks();e(n).attr("data-"+t,i),this.code.sync()},toggleData:function(t,i){var n=this.selection.getBlocks();e.each(n,function(){e(this).attr("data-"+t)?e(this).removeAttr("data-"+t):e(this).attr("data-"+t,i)})},removeAttr:function(t,i){var n=this.selection.getBlocks();e(n).removeAttr(t),this.code.sync()},setAttr:function(t,i){var n=this.selection.getBlocks();e(n).attr(t,i),this.code.sync()},toggleAttr:function(t,i){var n=this.selection.getBlocks();e.each(n,function(){e(this).attr(name)?e(this).removeAttr(name):e(this).attr(name,i)})},removeClass:function(t){var i=this.selection.getBlocks();e(i).removeClass(t),this.utils.removeEmptyAttr(i,"class"),this.code.sync()},setClass:function(t){var i=this.selection.getBlocks();e(i).addClass(t),this.code.sync()},toggleClass:function(t){var i=this.selection.getBlocks();e(i).toggleClass(t),this.code.sync()}}},buffer:function(){return{set:function(e){"undefined"==typeof e||"undo"==e?this.buffer.setUndo():this.buffer.setRedo()},setUndo:function(){this.selection.save(),this.opts.buffer.push(this.$editor.html()),this.selection.restore()},setRedo:function(){this.selection.save(),this.opts.rebuffer.push(this.$editor.html()),this.selection.restore()},getUndo:function(){this.$editor.html(this.opts.buffer.pop())},getRedo:function(){this.$editor.html(this.opts.rebuffer.pop())},add:function(){this.opts.buffer.push(this.$editor.html())},undo:function(){0!==this.opts.buffer.length&&(this.buffer.set("redo"),this.buffer.getUndo(),this.selection.restore(),setTimeout(e.proxy(this.observe.load,this),50))},redo:function(){0!==this.opts.rebuffer.length&&(this.buffer.set("undo"),this.buffer.getRedo(),this.selection.restore(),setTimeout(e.proxy(this.observe.load,this),50))}}},build:function(){return{run:function(){this.build.createContainerBox(),this.build.loadContent(),this.build.loadEditor(),this.build.enableEditor(),this.build.setCodeAndCall()},isTextarea:function(){return"TEXTAREA"===this.$element[0].tagName},createContainerBox:function(){this.$box=e('<div class="redactor-box" />')},createTextarea:function(){this.$textarea=e("<textarea />").attr("name",this.build.getTextareaName())},getTextareaName:function(){return"undefined"==typeof name?"content-"+this.uuid:this.$element.attr("id")},loadContent:function(){var t=this.build.isTextarea()?"val":"html";this.content=e.trim(this.$element[t]())},enableEditor:function(){this.$editor.attr({contenteditable:!0,dir:this.opts.direction})},loadEditor:function(){var e=this.build.isTextarea()?"fromTextarea":"fromElement";this.build[e]()},fromTextarea:function(){this.$editor=e("<div />"),this.$textarea=this.$element,this.$box.insertAfter(this.$element).append(this.$editor).append(this.$element),this.$editor.addClass("redactor-editor"),this.$element.hide()},fromElement:function(){this.$editor=this.$element,this.build.createTextarea(),this.$box.insertAfter(this.$editor).append(this.$editor).append(this.$textarea),this.$editor.addClass("redactor-editor"),this.$textarea.hide()},setCodeAndCall:function(){this.code.set(this.content),this.build.setOptions(),this.build.callEditor(),this.opts.visual||setTimeout(e.proxy(this.code.showCode,this),200)},callEditor:function(){this.build.disableMozillaEditing(),this.build.setEvents(),this.build.setHelpers(),this.opts.toolbar&&(this.opts.toolbar=this.toolbar.init(),this.toolbar.build()),this.modal.loadTemplates(),this.build.plugins(),setTimeout(e.proxy(this.observe.load,this),4),this.core.setCallback("init")},setOptions:function(){e(this.$textarea).attr("dir",this.opts.direction),this.opts.linebreaks&&this.$editor.addClass("redactor-linebreaks"),this.opts.tabindex&&this.$editor.attr("tabindex",this.opts.tabindex),this.opts.minHeight&&this.$editor.css("minHeight",this.opts.minHeight),this.opts.maxHeight&&this.$editor.css("maxHeight",this.opts.maxHeight)},setEventDropUpload:function(e){if(e.preventDefault(),this.opts.dragImageUpload&&this.opts.dragFileUpload){var t=e.dataTransfer.files;this.upload.directUpload(t[0],e)}},setEventDrop:function(e){this.code.sync(),setTimeout(this.clean.clearUnverified,1),this.core.setCallback("drop",e)},setEvents:function(){this.$editor.on("drop.redactor",e.proxy(function(e){return e=e.originalEvent||e,void 0!==window.FormData&&e.dataTransfer?0===e.dataTransfer.files.length?this.build.setEventDrop(e):(this.build.setEventDropUpload(e),setTimeout(this.clean.clearUnverified,1),void this.core.setCallback("drop",e)):!0},this)),this.$editor.on("click.redactor",e.proxy(function(e){var t=this.core.getEvent(),i="click"==t||"arrow"==t?!1:"click";this.core.addEvent(i),this.utils.disableSelectAll(),this.core.setCallback("click",e)},this)),this.$editor.on("paste.redactor",e.proxy(this.paste.init,this)),this.$editor.on("keydown.redactor",e.proxy(this.keydown.init,this)),this.$editor.on("keyup.redactor",e.proxy(this.keyup.init,this)),e.isFunction(this.opts.codeKeydownCallback)&&this.$textarea.on("keydown.redactor-textarea",e.proxy(this.opts.codeKeydownCallback,this)),e.isFunction(this.opts.codeKeyupCallback)&&this.$textarea.on("keyup.redactor-textarea",e.proxy(this.opts.codeKeyupCallback,this)),e.isFunction(this.opts.focusCallback)&&this.$editor.on("focus.redactor",e.proxy(this.opts.focusCallback,this));var t;e(document).on("mousedown",function(e){t=e.target}),this.$editor.on("blur.redactor",e.proxy(function(i){this.rtePaste||this.build.isBlured(t)&&(this.utils.disableSelectAll(),e.isFunction(this.opts.blurCallback)&&this.core.setCallback("blur",i))},this))},isBlured:function(t){var i=e(t);return!i.hasClass("redactor-toolbar, redactor-dropdown")&&!i.is("#redactor-modal")&&0===i.parents(".redactor-toolbar, .redactor-dropdown, #redactor-modal").length},setHelpers:function(){this.autosave.enable(),this.placeholder.enable(),this.opts.focus&&setTimeout(this.focus.setStart,100),this.opts.focusEnd&&setTimeout(this.focus.setEnd,100)},plugins:function(){this.opts.plugins&&RedactorPlugins&&e.each(this.opts.plugins,e.proxy(function(t,i){if("undefined"!=typeof RedactorPlugins[i]){if(-1!==e.inArray(i,e.Redactor.modules))return void e.error('Plugin name "'+i+"\" matches the name of the Redactor's module.");if(e.isFunction(RedactorPlugins[i])){this[i]=RedactorPlugins[i]();for(var n=this.getModuleMethods(this[i]),r=n.length,s=0;r>s;s++)this[i][n[s]]=this[i][n[s]].bind(this);e.isFunction(this[i].init)&&this[i].init()}}},this))},disableMozillaEditing:function(){if(this.utils.browser("mozilla"))try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1)}catch(e){}}}},button:function(){return{build:function(t,i){var n=e('<a href="#" class="re-icon re-'+t+'" rel="'+t+'" />').attr("tabindex","-1");if((i.func||i.command||i.dropdown)&&this.button.setEvent(n,t,i),i.dropdown){var r=e('<div class="redactor-dropdown redactor-dropdown-'+ +this.uuid+" redactor-dropdown-box-"+t+'" style="display: none;">');n.data("dropdown",r),this.dropdown.build(t,r,i.dropdown)}return this.utils.isDesktop()&&this.button.createTooltip(n,t,i.title),n},setEvent:function(t,i,n){t.on("touchstart click",e.proxy(function(e){if(t.hasClass("redactor-button-disabled"))return!1;var r="func",s=n.func;n.command?(r="command",s=n.command):n.dropdown&&(r="dropdown",s=!1),this.button.onClick(e,i,r,s)},this))},createTooltip:function(t,i,n){var r=e("<span>").addClass("redactor-toolbar-tooltip redactor-toolbar-tooltip-"+i).hide().html(n);r.appendTo("body"),t.on("mouseover",function(){if(!e(this).hasClass("redactor-button-disabled")){var i=t.offset();r.show(),r.css({top:i.top+t.innerHeight()+"px",left:i.left+t.innerWidth()/2-r.innerWidth()/2+"px"})}}),t.on("mouseout",function(){r.hide()})},onClick:function(e,t,i,n){this.button.caretOffset=this.caret.getOffset(),e.preventDefault(),this.utils.browser("msie")&&(e.returnValue=!1),"command"==i?this.inline.format(n):"dropdown"==i?this.dropdown.show(e,t):this.button.onClickCallback(e,n,t)},onClickCallback:function(t,i,n){var r;if(e.isFunction(i))i.call(this,n);else if("-1"!=i.search(/\./)){if(r=i.split("."),"undefined"==typeof this[r[0]])return;this[r[0]][r[1]](n)}else this[i](n);this.observe.buttons(t,n)},get:function(e){return this.$toolbar.find("a.re-"+e)},setActive:function(e){this.button.get(e).addClass("redactor-act")},setInactive:function(e){this.button.get(e).removeClass("redactor-act")},setInactiveAll:function(e){"undefined"==typeof e?this.$toolbar.find("a.re-icon").removeClass("redactor-act"):this.$toolbar.find("a.re-icon").not(".re-"+e).removeClass("redactor-act")},setActiveInVisual:function(){this.$toolbar.find("a.re-icon").not("a.re-html").removeClass("redactor-button-disabled")},setInactiveInCode:function(){this.$toolbar.find("a.re-icon").not("a.re-html").addClass("redactor-button-disabled")},changeIcon:function(e,t){this.button.get(e).addClass("re-"+t)},removeIcon:function(e,t){this.button.get(e).removeClass("re-"+t)},setAwesome:function(e,t){var i=this.button.get(e);i.removeClass("redactor-btn-image").addClass("fa-redactor-btn"),i.html('<i class="fa '+t+'"></i>')},addCallback:function(t,i){var n="dropdown"==i?"dropdown":"func",r=t.attr("rel");t.on("touchstart click",e.proxy(function(e){return t.hasClass("redactor-button-disabled")?!1:void this.button.onClick(e,r,n,i)},this))},addDropdown:function(t,i){var n=t.attr("rel");this.button.addCallback(t,"dropdown");var r=e('<div class="redactor-dropdown redactor-dropdown-'+ +this.uuid+" redactor-dropdown-box-"+n+'" style="display: none;">');return t.data("dropdown",r),i&&this.dropdown.build(n,r,i),r},add:function(t,i){if(this.opts.toolbar){var n=this.button.build(t,{title:i});return n.addClass("redactor-btn-image"),this.$toolbar.append(e("<li>").append(n)),n}},addFirst:function(t,i){if(this.opts.toolbar){var n=this.button.build(t,{title:i});return n.addClass("redactor-btn-image"),this.$toolbar.prepend(e("<li>").append(n)),n}},addAfter:function(t,i,n){if(this.opts.toolbar){var r=this.button.build(i,{title:n});r.addClass("redactor-btn-image");var s=this.button.get(t);return 0!==s.length?s.parent().after(e("<li>").append(r)):this.$toolbar.append(e("<li>").append(r)),r}},addBefore:function(t,i,n){if(this.opts.toolbar){var r=this.button.build(i,{title:n});r.addClass("redactor-btn-image");var s=this.button.get(t);return 0!==s.length?s.parent().before(e("<li>").append(r)):this.$toolbar.append(e("<li>").append(r)),r}},remove:function(e){this.button.get(e).remove()}}},caret:function(){return{setStart:function(t){if(this.utils.isBlock(t))this.caret.set(t,0,t,0);else{var i=this.utils.createSpaceElement();e(t).prepend(i),this.caret.setEnd(i)}},setEnd:function(e){this.caret.set(e,1,e,1)},set:function(t,i,n,r){if(t=t[0]||t,n=n[0]||n,this.utils.isBlockTag(t.tagName)&&""===t.innerHTML&&(t.innerHTML=this.opts.invisibleSpace),"BR"==t.tagName&&this.opts.linebreaks===!1){var s=e(this.opts.emptyHtml)[0];e(t).replaceWith(s),t=s,n=t}this.selection.get();try{this.range.setStart(t,i),this.range.setEnd(n,r)}catch(o){}this.selection.addRange()},setAfter:function(t){try{var i=e(t)[0].tagName;if("BR"==i||this.utils.isBlock(t))"BR"!=i&&this.utils.browser("msie")?this.caret.setStart(e(t).next()):this.caret.setAfterOrBefore(t,"after");else{var n=this.utils.createSpaceElement();e(t).after(n),this.caret.setEnd(n)}}catch(r){var n=this.utils.createSpaceElement();e(t).after(n),this.caret.setEnd(n)}},setBefore:function(t){this.utils.isBlock(t)?this.caret.setEnd(e(t).prev()):this.caret.setAfterOrBefore(t,"before")},setAfterOrBefore:function(e,t){if(this.utils.browser("msie")||this.$editor.focus(),e=e[0]||e,this.selection.get(),"after"==t)try{this.range.setStartAfter(e),this.range.setEndAfter(e)}catch(i){}else try{this.range.setStartBefore(e),this.range.setEndBefore(e)}catch(i){}this.range.collapse(!1),this.selection.addRange()},getOffsetOfElement:function(t){t=t[0]||t,this.selection.get();var i=this.range.cloneRange();return i.selectNodeContents(t),i.setEnd(this.range.endContainer,this.range.endOffset),e.trim(i.toString()).length},getOffset:function(){var e=0,t=window.getSelection();if(t.rangeCount>0){var i=window.getSelection().getRangeAt(0),n=i.cloneRange();n.selectNodeContents(this.$editor[0]),n.setEnd(i.endContainer,i.endOffset),e=n.toString().length}return e},setOffset:function(e,t){"undefined"==typeof t&&(t=e),this.focus.isFocused()||this.focus.setStart();for(var i,n=(this.selection.get(),0),r=document.createTreeWalker(this.$editor[0],NodeFilter.SHOW_TEXT,null,null);i=r.nextNode();)if(n+=i.nodeValue.length,n>e&&(this.range.setStart(i,i.nodeValue.length+e-n),e=1/0),n>=t){this.range.setEnd(i,i.nodeValue.length+t-n);break}this.range.collapse(!1),this.selection.addRange()},setToPoint:function(e,t){this.caret.setOffset(e,t)},getCoords:function(){return this.caret.getOffset()}}},clean:function(){return{onSet:function(t){t=this.clean.savePreCode(t),t=t.replace(/<script(.*?[^>]?)>([\w\W]*?)<\/script>/gi,'<pre class="redactor-script-tag" style="display: none;" $1>$2</pre>'),t=t.replace(/\$/g,"&#36;"),t=t.replace(/<a href="(.*?[^>]?)®(.*?[^>]?)">/gi,'<a href="$1&reg$2">'),this.opts.replaceDivs&&(t=this.clean.replaceDivs(t)),this.opts.linebreaks&&(t=this.clean.replaceParagraphsToBr(t)),t=this.clean.saveFormTags(t);var i=e("<div>");i.html(t);var n=i.find("font[style]");return 0!==n.length&&(n.replaceWith(function(){var t=e(this),i=e("<span>").attr("style",t.attr("style"));return i.append(t.contents())}),t=i.html()),i.remove(),t=t.replace(/<font(.*?[^<])>/gi,""),t=t.replace(/<\/font>/gi,""),t=this.tidy.load(t),this.opts.paragraphize&&(t=this.paragraphize.load(t)),t=this.clean.setVerified(t),t=this.clean.convertInline(t)},onSync:function(t){if(t=t.replace(/[\u200B-\u200D\uFEFF]/g,""),t=t.replace(/&#x200b;/gi,""),this.opts.cleanSpaces&&(t=t.replace(/&nbsp;/gi," ")),-1!=t.search(/^<p>(||\s||<br\s?\/?>||&nbsp;)<\/p>$/i))return"";t=t.replace(/<pre class="redactor-script-tag" style="display: none;"(.*?[^>]?)>([\w\W]*?)<\/pre>/gi,"<script$1>$2</script>"),t=this.clean.restoreFormTags(t);var i={"™":"&trade;","©":"&copy;","…":"&hellip;","—":"&mdash;","‐":"&dash;"};return e.each(i,function(e,i){t=t.replace(new RegExp(e,"g"),i)}),t=t.replace(new RegExp("<br\\s?/?></li>","gi"),"</li>"),t=t.replace(new RegExp("</li><br\\s?/?>","gi"),"</li>"),t=t.replace(new RegExp('<div(.*?[^>]) data-tagblock="redactor"(.*?[^>])>',"gi"),"<div$1$2>"),t=t.replace(new RegExp('<(.*?) data-verified="redactor"(.*?[^>])>',"gi"),"<$1$2>"),t=t.replace(new RegExp('<span(.*?[^>])srel="(.*?[^>])"(.*?[^>])>',"gi"),"<span$1$3>"),t=t.replace(new RegExp('<img(.*?[^>])srel="(.*?[^>])"(.*?[^>])>',"gi"),"<img$1$3>"),t=t.replace(new RegExp('<img(.*?[^>])sstyle="" (.*?[^>])>',"gi"),"<img$1 $2>"),t=t.replace(new RegExp("<img(.*?[^>])sstyle (.*?[^>])>","gi"),"<img$1 $2>"),t=t.replace(new RegExp('<span class="redactor-invisible-space">(.*?)</span>',"gi"),"$1"),t=t.replace(/ data-save-url="(.*?[^>])"/gi,""),t=t.replace(/<span(.*?)id="redactor-image-box"(.*?[^>])>([\w\W]*?)<img(.*?)><\/span>/gi,"$3<img$4>"),t=t.replace(/<span(.*?)id="redactor-image-resizer"(.*?[^>])>(.*?)<\/span>/gi,""),t=t.replace(/<span(.*?)id="redactor-image-editter"(.*?[^>])>(.*?)<\/span>/gi,""),t=t.replace(/<font(.*?[^<])>/gi,""),t=t.replace(/<\/font>/gi,""),t=this.tidy.load(t),this.opts.linkNofollow&&(t=t.replace(/<a(.*?)rel="nofollow"(.*?[^>])>/gi,"<a$1$2>"),t=t.replace(/<a(.*?[^>])>/gi,'<a$1 rel="nofollow">')),t=t.replace(/\sdata-redactor-(tag|class|style)="(.*?[^>])"/gi,""),t=t.replace(new RegExp('<(.*?) data-verified="redactor"(.*?[^>])>',"gi"),"<$1$2>"),t=t.replace(new RegExp('<(.*?) data-verified="redactor">',"gi"),"<$1>")},onPaste:function(t,i){if(t=e.trim(t),t=t.replace(/\$/g,"&#36;"),t=t.replace(/<span class="s1">/gi,"<span>"),t=t.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),t=t.replace(/<span class="Apple-tab-span"[^>]*>\t<\/span>/gi,"	"),t=t.replace(/<span[^>]*>(\s|&nbsp;)<\/span>/gi," "),this.opts.pastePlainText)return this.clean.getPlainText(t);if(!this.utils.isSelectAll()&&"undefined"==typeof i){if(this.utils.isCurrentOrParent(["FIGCAPTION","A"]))return this.clean.getPlainText(t,!1);if(this.utils.isCurrentOrParent("PRE"))return t=t.replace(/”/g,'"'),t=t.replace(/“/g,'"'),t=t.replace(/‘/g,"'"),t=t.replace(/’/g,"'"),this.clean.getPreCode(t);if(this.utils.isCurrentOrParent(["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"])){if(t=this.clean.getOnlyImages(t),!this.utils.browser("msie")){var n=this.selection.getBlock();n&&"P"==n.tagName&&(t=t.replace(/<img(.*?)>/gi,"<p><img$1></p>"))}return t}if(this.utils.isCurrentOrParent(["TD"]))return t=this.clean.onPasteTidy(t,"td"),this.opts.linebreaks&&(t=this.clean.replaceParagraphsToBr(t)),t=this.clean.replaceDivsToBr(t);if(this.utils.isCurrentOrParent(["LI"]))return this.clean.onPasteTidy(t,"li")}return t=this.clean.isSingleLine(t,i),this.clean.singleLine||(this.opts.linebreaks&&(t=this.clean.replaceParagraphsToBr(t)),this.opts.replaceDivs&&(t=this.clean.replaceDivs(t)),t=this.clean.saveFormTags(t)),t=this.clean.onPasteWord(t),t=this.clean.onPasteExtra(t),t=this.clean.onPasteTidy(t,"all"),!this.clean.singleLine&&this.opts.paragraphize&&(t=this.paragraphize.load(t)),t=this.clean.removeDirtyStyles(t),t=this.clean.onPasteRemoveSpans(t),t=this.clean.onPasteRemoveEmpty(t),t=this.clean.convertInline(t)},onPasteWord:function(e){return e=e.replace(/<!--[\s\S]*?-->/gi,""),e=e.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,""),/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(e)&&(e=this.clean.onPasteIeFixLinks(e),e=e.replace(/<img(.*?)v:shapes=(.*?)>/gi,""),e=e.replace(/src="file\:\/\/(.*?)"/,'src=""'),e=e.replace(/<p(.*?)class="MsoListParagraphCxSpFirst"([\w\W]*?)<\/p>/gi,"<ul><li$2</li>"),e=e.replace(/<p(.*?)class="MsoListParagraphCxSpMiddle"([\w\W]*?)<\/p>/gi,"<li$2</li>"),e=e.replace(/<p(.*?)class="MsoListParagraphCxSpLast"([\w\W]*?)<\/p>/gi,"<li$2</li></ul>"),e=e.replace(/<p(.*?)class="MsoListParagraph"([\w\W]*?)<\/p>/gi,"<ul><li$2</li></ul>"),e=e.replace(/·/g,""),e=e.replace(/<p class="Mso(.*?)"/gi,"<p"),e=e.replace(/ class=\"(mso[^\"]*)\"/gi,""),e=e.replace(/ class=(mso\w+)/gi,""),e=e.replace(/<o:p(.*?)>([\w\W]*?)<\/o:p>/gi,"$2"),e=e.replace(/\n/g," "),e=e.replace(/<p>\n?<li>/gi,"<li>")),this.opts.cleanSpaces&&(e=e.replace(/(\s|&nbsp;)+/g," ")),e},onPasteExtra:function(e){return e=e.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2"),e=e.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi,"$3"),e=e.replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>/gi,'<span style="font-weight: bold;"><span style="font-style: italic;">'),e=e.replace(/<span[^>]*font-style: italic[^>]*>/gi,'<span style="font-style: italic;">'),e=e.replace(/<span[^>]*font-weight: bold[^>]*>/gi,'<span style="font-weight: bold;">'),e=e.replace(/<span[^>]*text-decoration: underline[^>]*>/gi,'<span style="text-decoration: underline;">'),e=e.replace(/<img>/gi,""),e=e.replace(/\n{3,}/gi,"\n"),e=e.replace(/<font(.*?)>([\w\W]*?)<\/font>/gi,"$2"),e=e.replace(/<p><p>/gi,"<p>"),e=e.replace(/<\/p><\/p>/gi,"</p>"),e=e.replace(/<li>(\s*|\t*|\n*)<p>/gi,"<li>"),e=e.replace(/<\/p>(\s*|\t*|\n*)<\/li>/gi,"</li>"),e=e.replace(/<\/p>\s<p/gi,"</p><p"),e=e.replace(/<img src="webkit-fake-url\:\/\/(.*?)"(.*?)>/gi,""),e=e.replace(/<p>•([\w\W]*?)<\/p>/gi,"<li>$1</li>"),this.utils.browser("mozilla")&&(e=e.replace(/<br\s?\/?>$/gi,"")),e},onPasteTidy:function(e,t){var i=["span","a","pre","blockquote","small","em","strong","code","kbd","mark","address","cite","var","samp","dfn","sup","sub","b","i","u","del","ol","ul","li","dl","dt","dd","p","br","video","audio","iframe","embed","param","object","img","table","td","th","tr","tbody","tfoot","thead","h1","h2","h3","h4","h5","h6"],n=!1,r=[["a","*"],["img",["src","alt"]],["span",["class","rel","data-verified"]],["iframe","*"],["video","*"],["audio","*"],["embed","*"],["object","*"],["param","*"],["source","*"]];"all"==t?(n=["p","span","h1","h2","h3","h4","h5","h6"],r=[["table","class"],["td",["colspan","rowspan"]],["a","*"],["img",["src","alt","data-redactor-inserted-image"]],["span",["class","rel","data-verified"]],["iframe","*"],["video","*"],["audio","*"],["embed","*"],["object","*"],["param","*"],["source","*"]]):"td"==t?i=["ul","ol","li","span","a","small","em","strong","code","kbd","mark","cite","var","samp","dfn","sup","sub","b","i","u","del","ol","ul","li","dl","dt","dd","br","iframe","video","audio","embed","param","object","img","h1","h2","h3","h4","h5","h6"]:"li"==t&&(i=["ul","ol","li","span","a","small","em","strong","code","kbd","mark","cite","var","samp","dfn","sup","sub","b","i","u","del","br","iframe","video","audio","embed","param","object","img"]);var s={deniedTags:!1,allowedTags:i,removeComments:!0,removePhp:!0,removeAttr:!1,allowedAttr:r,removeEmpty:n};return this.opts.deniedTags&&(s.deniedTags=this.opts.deniedTags),this.opts.allowedTags&&(s.allowedTags=this.opts.allowedTags),this.tidy.load(e,s)},onPasteRemoveEmpty:function(e){return e=e.replace(/<(p|h[1-6])>(|\s|\n|\t|<br\s?\/?>)<\/(p|h[1-6])>/gi,""),this.opts.linebreaks||(e=e.replace(/<br>$/i,"")),e},onPasteRemoveSpans:function(e){return e=e.replace(/<span>(.*?)<\/span>/gi,"$1"),e=e.replace(/<span[^>]*>\s|&nbsp;<\/span>/gi," ")},onPasteIeFixLinks:function(t){if(!this.utils.browser("msie"))return t;var i=e.trim(t);return 0===i.search(/^<a(.*?)>(.*?)<\/a>$/i)&&(t=t.replace(/^<a(.*?)>(.*?)<\/a>$/i,"$2")),t},isSingleLine:function(e,t){if(this.clean.singleLine=!1,!this.utils.isSelectAll()&&"undefined"==typeof t){var i=this.opts.blockLevelElements.join("|").replace("P|","").replace("DIV|",""),n=e.match(new RegExp("</("+i+")>","gi")),r=e.match(/<\/(p|div)>/gi);if(!n&&(null===r||r&&r.length<=1)){var s=e.match(/<br\s?\/?>/gi),o=e.match(/<img(.*?[^>])>/gi);s||o||(this.clean.singleLine=!0,e=e.replace(/<\/?(p|div)(.*?)>/gi,""))}}return e},stripTags:function(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return e.replace(i,function(e,i){return t.indexOf("<"+i.toLowerCase()+">")>-1?e:""})},savePreCode:function(e){return e=this.clean.savePreFormatting(e),e=this.clean.saveCodeFormatting(e)},savePreFormatting:function(t){var i=t.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);return null!==i&&e.each(i,e.proxy(function(e,i){var n=i.match(/<pre(.*?)>([\w\W]*?)<\/pre>/i);n[2]=n[2].replace(/<br\s?\/?>/g,"\n"),n[2]=n[2].replace(/&nbsp;/g," "),this.opts.preSpaces&&(n[2]=n[2].replace(/\t/g,Array(this.opts.preSpaces+1).join(" "))),n[2]=this.clean.encodeEntities(n[2]),n[2]=n[2].replace(/\$/g,"&#36;"),t=t.replace(i,"<pre"+n[1]+">"+n[2]+"</pre>")},this)),t},saveCodeFormatting:function(t){var i=t.match(/<code(.*?[^>])>(.*?)<\/code>/gi);return null!==i&&e.each(i,e.proxy(function(e,i){var n=i.match(/<code(.*?[^>])>(.*?)<\/code>/i);n[2]=n[2].replace(/&nbsp;/g," "),n[2]=this.clean.encodeEntities(n[2]),n[2]=n[2].replace(/\$/g,"&#36;"),t=t.replace(i,"<code"+n[1]+">"+n[2]+"</code>")},this)),t},getTextFromHtml:function(t){t=t.replace(/<br\s?\/?>|<\/H[1-6]>|<\/p>|<\/div>|<\/li>|<\/td>/gi,"\n");var i=document.createElement("div");return i.innerHTML=t,t=i.textContent||i.innerText,e.trim(t)},getPlainText:function(e,t){return e=this.clean.getTextFromHtml(e),e=e.replace(/\n/g,"<br />"),this.opts.paragraphize&&"undefined"==typeof t&&!this.utils.browser("mozilla")&&(e=this.paragraphize.load(e)),e},getPreCode:function(e){return e=e.replace(/<img(.*?) style="(.*?)"(.*?[^>])>/gi,"<img$1$3>"),e=e.replace(/<img(.*?)>/gi,"&lt;img$1&gt;"),e=this.clean.getTextFromHtml(e),this.opts.preSpaces&&(e=e.replace(/\t/g,Array(this.opts.preSpaces+1).join(" "))),e=this.clean.encodeEntities(e)},getOnlyImages:function(e){return e=e.replace(/<img(.*?)>/gi,"[img$1]"),e=e.replace(/<([Ss]*?)>/gi,""),e=e.replace(/\[img(.*?)\]/gi,"<img$1>")},getOnlyLinksAndImages:function(e){return e=e.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi,'[a href="$2"]$4[/a]'),e=e.replace(/<img(.*?)>/gi,"[img$1]"),e=e.replace(/<(.*?)>/gi,""),e=e.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi,'<a href="$1">$2</a>'),e=e.replace(/\[img(.*?)\]/gi,"<img$1>")},encodeEntities:function(e){return e=String(e).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},removeDirtyStyles:function(t){if(this.utils.browser("msie"))return t;var i=document.createElement("div");return i.innerHTML=t,this.clean.clearUnverifiedRemove(e(i)),t=i.innerHTML,e(i).remove(),t},clearUnverified:function(){if(!this.utils.browser("msie")){this.clean.clearUnverifiedRemove(this.$editor);var e=this.$editor.find("h1, h2, h3, h4, h5, h6");e.find("span").removeAttr("style"),e.find(this.opts.verifiedTags.join(", ")).removeAttr("style"),this.code.sync()}},clearUnverifiedRemove:function(t){t.find(this.opts.verifiedTags.join(", ")).removeAttr("style"),t.find("span").not('[data-verified="redactor"]').removeAttr("style"),t.find('span[data-verified="redactor"], img[data-verified="redactor"]').each(function(t,i){var n=e(i);n.attr("style",n.attr("rel"))})},setVerified:function(e){if(this.utils.browser("msie"))return e;e=e.replace(new RegExp("<img(.*?[^>])>","gi"),'<img$1 data-verified="redactor">'),e=e.replace(new RegExp("<span(.*?[^>])>","gi"),'<span$1 data-verified="redactor">');var t=e.match(new RegExp('<(span|img)(.*?)style="(.*?)"(.*?[^>])>',"gi"));if(t)for(var i=t.length,n=0;i>n;n++)try{var r=t[n].replace(/style="(.*?)"/i,'style="$1" rel="$1"');e=e.replace(t[n],r)}catch(s){}return e},convertInline:function(t){var i=e("<div />").html(t),n=this.opts.inlineTags;return n.push("span"),i.find(n.join(",")).each(function(){var t=e(this),i=this.tagName.toLowerCase();t.attr("data-redactor-tag",i),"span"==i&&(t.attr("style")?t.attr("data-redactor-style",t.attr("style")):t.attr("class")&&t.attr("data-redactor-class",t.attr("class")))}),t=i.html(),i.remove(),t},normalizeLists:function(){this.$editor.find("li").each(function(t,i){var n=e(i).next();0===n.length||"UL"!=n[0].tagName&&"OL"!=n[0].tagName||e(i).append(n)})},removeSpaces:function(e){return e=e.replace(/\n/g,""),e=e.replace(/[\t]*/g,""),e=e.replace(/\n\s*\n/g,"\n"),e=e.replace(/^[\s\n]*/g," "),e=e.replace(/[\s\n]*$/g," "),e=e.replace(/>\s{2,}</g,"> <"),e=e.replace(/\n\n/g,"\n"),e=e.replace(/[\u200B-\u200D\uFEFF]/g,"")},replaceDivs:function(e){return this.opts.linebreaks?(e=e.replace(/<div><br\s?\/?><\/div>/gi,"<br />"),e=e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"$2<br />")):e=e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p$1>$2</p>"),e=e.replace(/<div(.*?[^>])>/gi,""),e=e.replace(/<\/div>/gi,"")},replaceDivsToBr:function(e){return e=e.replace(/<div\s(.*?)>/gi,"<p>"),e=e.replace(/<div><br\s?\/?><\/div>/gi,"<br /><br />"),e=e.replace(/<div>([\w\W]*?)<\/div>/gi,"$1<br /><br />")},replaceParagraphsToBr:function(e){return e=e.replace(/<p\s(.*?)>/gi,"<p>"),e=e.replace(/<p><br\s?\/?><\/p>/gi,"<br />"),e=e.replace(/<p>([\w\W]*?)<\/p>/gi,"$1<br /><br />"),e=e.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>")},saveFormTags:function(e){return e.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi,'<section$1 rel="redactor-form-tag">$2</section>')},restoreFormTags:function(e){return e.replace(/<section(.*?) rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi,"<form$1$2>$3</form>")}}},code:function(){return{set:function(t){t=e.trim(t.toString()),t=this.clean.onSet(t),this.$editor.html(t),this.code.sync(),""!==t&&this.placeholder.remove(),setTimeout(e.proxy(this.buffer.add,this),15),this.start===!1&&this.observe.load()},get:function(){var e=this.$textarea.val();return e=this.tabifier.get(e)},sync:function(){setTimeout(e.proxy(this.code.startSync,this),10)},startSync:function(){var e=this.$editor.html();this.code.syncCode&&this.code.syncCode==e||(this.code.syncCode=e,e=this.core.setCallback("syncBefore",e),e=this.clean.onSync(e),this.$textarea.val(e),this.core.setCallback("sync",e),this.start===!1&&this.core.setCallback("change",e),this.start=!1,this.autosave.onChange())},toggle:function(){this.opts.visual?this.code.showCode():this.code.showVisual()},showCode:function(){this.code.offset=this.caret.getOffset();var t=e(window).scrollTop(),i=this.$editor.innerHeight();this.$editor.hide();var n=this.$textarea.val();this.modified=this.clean.removeSpaces(n),n=this.tabifier.get(n),this.$textarea.val(n).height(i).show().focus(),this.$textarea.on("keydown.redactor-textarea-indenting",this.code.textareaIndenting),e(window).scrollTop(t),this.$textarea[0].setSelectionRange&&this.$textarea[0].setSelectionRange(0,0),this.$textarea[0].scrollTop=0,this.opts.visual=!1,this.button.setInactiveInCode(),this.button.setActive("html"),this.core.setCallback("source",n)},showVisual:function(){if(!this.opts.visual){var e=this.$textarea.hide().val();this.modified!==this.clean.removeSpaces(e)&&this.code.set(e),this.$editor.show(),this.utils.isEmpty(e)||this.placeholder.remove(),this.caret.setOffset(this.code.offset),this.$textarea.off("keydown.redactor-textarea-indenting"),this.button.setActiveInVisual(),this.button.setInactive("html"),this.observe.load(),this.opts.visual=!0,this.core.setCallback("visual",e)}},textareaIndenting:function(e){if(9!==e.keyCode)return!0;var t=this.$textarea,i=t.get(0).selectionStart;return t.val(t.val().substring(0,i)+"	"+t.val().substring(t.get(0).selectionEnd)),
t.get(0).selectionStart=t.get(0).selectionEnd=i+1,!1}}},core:function(){return{getObject:function(){return e.extend({},this)},getEditor:function(){return this.$editor},getBox:function(){return this.$box},getElement:function(){return this.$element},getTextarea:function(){return this.$textarea},getToolbar:function(){return this.$toolbar?this.$toolbar:!1},addEvent:function(e){this.core.event=e},getEvent:function(){return this.core.event},setCallback:function(t,i,n){var r=this.opts[t+"Callback"];return e.isFunction(r)?"undefined"==typeof n?r.call(this,i):r.call(this,i,n):"undefined"==typeof n?i:n},destroy:function(){this.core.setCallback("destroy"),this.$element.off(".redactor").removeData("redactor"),this.$editor.off(".redactor"),e(document).off("click.redactor-image-delete."+this.uuid),e(document).off("click.redactor-image-resize-hide."+this.uuid),e(document).off("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid),e("body").off("scroll.redactor."+this.uuid),e(this.opts.toolbarFixedTarget).off("scroll.redactor."+this.uuid),this.$editor.removeClass("redactor-editor redactor-linebreaks redactor-placeholder"),this.$editor.removeAttr("contenteditable");var t=this.code.get();this.$toolbar.find("a").each(function(){var t=e(this);t.data("dropdown")&&(t.data("dropdown").remove(),t.data("dropdown",{}))}),this.build.isTextarea()?(this.$box.after(this.$element),this.$box.remove(),this.$element.val(t).show()):(this.$box.after(this.$editor),this.$box.remove(),this.$element.html(t).show()),this.$pasteBox&&this.$pasteBox.remove(),this.$modalBox&&this.$modalBox.remove(),this.$modalOverlay&&this.$modalOverlay.remove(),e(".redactor-toolbar-tooltip").remove(),clearInterval(this.autosaveInterval)}}},dropdown:function(){return{build:function(t,i,n){"formatting"==t&&this.opts.formattingAdd&&e.each(this.opts.formattingAdd,e.proxy(function(e,t){var i=t.tag;"undefined"!=typeof t["class"]&&(i=i+"-"+t["class"]),t.type=this.utils.isBlockTag(t.tag)?"block":"inline";var r="inline"==t.type?"inline.formatting":"block.formatting";this.opts.linebreaks&&"block"==t.type&&"p"==t.tag||(this.formatting[i]={tag:t.tag,style:t.style,"class":t["class"],attr:t.attr,data:t.data,clear:t.clear},n[i]={func:r,title:t.title})},this)),e.each(n,e.proxy(function(n,r){var s=e('<a href="#" class="redactor-dropdown-'+n+'">'+r.title+"</a>");"formatting"==t&&s.addClass("redactor-formatting-"+n),s.on("click",e.proxy(function(e){e.preventDefault();var t="func",i=r.func;r.command?(t="command",i=r.command):r.dropdown&&(t="dropdown",i=r.dropdown),this.button.onClick(e,n,t,i),this.dropdown.hideAll()},this)),i.append(s)},this))},show:function(t,i){if(!this.opts.visual)return t.preventDefault(),!1;var n=this.button.get(i),r=n.data("dropdown").appendTo(document.body);if(this.utils.isMobile()&&!this.utils.browser("msie")&&document.activeElement.blur(),n.hasClass("dropact"))this.dropdown.hideAll();else{this.dropdown.hideAll(),this.core.setCallback("dropdownShow",{dropdown:r,key:i,button:n}),this.button.setActive(i),n.addClass("dropact");var s=n.offset(),o=r.width();s.left+o>e(document).width()&&(s.left=Math.max(0,s.left-o));var a=s.left+"px";if(this.$toolbar.hasClass("toolbar-fixed-box")){var l=this.$toolbar.innerHeight()+this.opts.toolbarFixedTopOffset,c="fixed";this.opts.toolbarFixedTarget!==document&&(l=this.$toolbar.innerHeight()+this.$toolbar.offset().top+this.opts.toolbarFixedTopOffset,c="absolute"),r.css({position:c,left:a,top:l+"px"}).show()}else{var l=n.innerHeight()+s.top+"px";r.css({position:"absolute",left:a,top:l}).show()}this.core.setCallback("dropdownShown",{dropdown:r,key:i,button:n})}e(document).one("click",e.proxy(this.dropdown.hide,this)),this.$editor.one("click",e.proxy(this.dropdown.hide,this));var u=e(document.body),d=u.width();r.on("mouseover",function(){u.addClass("body-redactor-hidden"),u.css("margin-right",u.width()-d+"px")}),r.on("mouseout",function(){u.removeClass("body-redactor-hidden").css("margin-right",0)}),t.stopPropagation()},hideAll:function(){this.$toolbar.find("a.dropact").removeClass("redactor-act").removeClass("dropact"),e(document.body).removeClass("body-redactor-hidden").css("margin-right",0),e(".redactor-dropdown-"+this.uuid).hide(),this.core.setCallback("dropdownHide")},hide:function(t){var i=e(t.target);i.hasClass("dropact")||(i.removeClass("dropact"),this.dropdown.hideAll())}}},file:function(){return{show:function(){this.modal.load("file",this.lang.get("file"),700),this.upload.init("#redactor-modal-file-upload",this.opts.fileUpload,this.file.insert),this.selection.save(),this.selection.get();var t=this.sel.toString();e("#redactor-filename").val(t),this.modal.show()},insert:function(t,i,n){if("undefined"!=typeof t.error)return this.modal.close(),this.selection.restore(),void this.core.setCallback("fileUploadError",t);var r;if("string"==typeof t)r=t;else{var s=e("#redactor-filename").val();("undefined"==typeof s||""===s)&&(s=t.filename),r='<a href="'+t.filelink+'" id="filelink-marker">'+s+"</a>"}if(i){this.selection.removeMarkers();var o=this.selection.getMarker();this.insert.nodeToCaretPositionFromPoint(n,o)}else this.modal.close();if(this.selection.restore(),this.buffer.set(),this.insert.htmlWithoutClean(r),"string"!=typeof t){var a=e(this.$editor.find("a#filelink-marker"));0!==a.length?a.removeAttr("id").removeAttr("style"):a=!1,this.core.setCallback("fileUpload",a,t)}}}},focus:function(){return{setStart:function(){this.$editor.focus();var e=this.$editor.children().first();if(0!==e.length&&0!==e[0].length&&"BR"!=e[0].tagName&&3!=e[0].nodeType){if("UL"==e[0].tagName||"OL"==e[0].tagName){var t=e.find("li").first();if(!this.utils.isBlock(t)&&""===t.text())return void this.caret.setStart(t)}return this.opts.linebreaks&&!this.utils.isBlockTag(e[0].tagName)?(this.selection.get(),this.range.setStart(this.$editor[0],0),this.range.setEnd(this.$editor[0],0),void this.selection.addRange()):void this.caret.setStart(e)}},setEnd:function(){if(this.utils.browser("mozilla")||this.utils.browser("msie")){var e=this.$editor.children().last();this.$editor.focus(),this.caret.setEnd(e)}else{this.selection.get();try{this.range.selectNodeContents(this.$editor[0]),this.range.collapse(!1),this.selection.addRange()}catch(t){}}},isFocused:function(){var t=document.getSelection().focusNode;return null===t?!1:this.opts.linebreaks&&e(t.parentNode).hasClass("redactor-linebreaks")?!0:this.utils.isRedactorParent(t.parentNode)?this.$editor.is(":focus"):!1}}},image:function(){return{show:function(){this.modal.load("image",this.lang.get("image"),700),this.upload.init("#redactor-modal-image-droparea",this.opts.imageUpload,this.image.insert),this.selection.save(),this.modal.show()},showEdit:function(t){var i=t.closest("a");if(this.modal.load("imageEdit",this.lang.get("edit"),705),this.modal.createCancelButton(),this.image.buttonDelete=this.modal.createDeleteButton(this.lang.get("_delete")),this.image.buttonSave=this.modal.createActionButton(this.lang.get("save")),this.image.buttonDelete.on("click",e.proxy(function(){this.image.remove(t)},this)),this.image.buttonSave.on("click",e.proxy(function(){this.image.update(t)},this)),e("#redactor-image-title").val(t.attr("alt")),this.opts.imageLink){var n=e("#redactor-image-link");n.attr("href",t.attr("src")),0!==i.length&&(n.val(i.attr("href")),"_blank"==i.attr("target")&&e("#redactor-image-link-blank").prop("checked",!0))}else e(".redactor-image-link-option").hide();if(this.opts.imagePosition){var r="block"==t.css("display")&&"none"==t.css("float")?"center":t.css("float");e("#redactor-image-align").val(r)}else e(".redactor-image-position-option").hide();this.modal.show()},setFloating:function(t){var i=e("#redactor-image-align").val(),n="",r="",s="";switch(i){case"left":n="left",s="0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin+" 0";break;case"right":n="right",s="0 0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin;break;case"center":r="block",s="auto"}t.css({"float":n,display:r,margin:s}),t.attr("rel",t.attr("style"))},update:function(t){this.image.hideResize(),this.buffer.set();var i=t.closest("a");t.attr("alt",e("#redactor-image-title").val()),this.image.setFloating(t);var n=e.trim(e("#redactor-image-link").val());if(""!==n){var r="((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}",s=new RegExp("^(http|ftp|https)://"+r,"i"),o=new RegExp("^"+r,"i");-1==n.search(s)&&0===n.search(o)&&this.opts.linkProtocol&&(n=this.opts.linkProtocol+"://"+n);var a=e("#redactor-image-link-blank").prop("checked")?!0:!1;if(0===i.length){var l=e('<a href="'+n+'">'+this.utils.getOuterHtml(t)+"</a>");a&&l.attr("target","_blank"),t.replaceWith(l)}else i.attr("href",n),a?i.attr("target","_blank"):i.removeAttr("target")}else 0!==i.length&&i.replaceWith(this.utils.getOuterHtml(t));this.modal.close(),this.observe.images(),this.code.sync()},setEditable:function(t){this.opts.imageEditable&&t.on("dragstart",e.proxy(this.image.onDrag,this)),t.on("mousedown",e.proxy(this.image.hideResize,this)),t.on("click.redactor touchstart",e.proxy(function(i){return this.observe.image=t,0!==this.$editor.find("#redactor-image-box").length?!1:(this.image.resizer=this.image.loadEditableControls(t),e(document).on("click.redactor-image-resize-hide."+this.uuid,e.proxy(this.image.hideResize,this)),this.$editor.on("click.redactor-image-resize-hide."+this.uuid,e.proxy(this.image.hideResize,this)),void(this.opts.imageResizable&&this.image.resizer.on("mousedown.redactor touchstart.redactor",e.proxy(function(e){this.image.setResizable(e,t)},this))))},this))},setResizable:function(e,t){e.preventDefault(),this.image.resizeHandle={x:e.pageX,y:e.pageY,el:t,ratio:t.width()/t.height(),h:t.height()},e=e.originalEvent||e,e.targetTouches&&(this.image.resizeHandle.x=e.targetTouches[0].pageX,this.image.resizeHandle.y=e.targetTouches[0].pageY),this.image.startResize()},startResize:function(){e(document).on("mousemove.redactor-image-resize touchmove.redactor-image-resize",e.proxy(this.image.moveResize,this)),e(document).on("mouseup.redactor-image-resize touchend.redactor-image-resize",e.proxy(this.image.stopResize,this))},moveResize:function(e){e.preventDefault(),e=e.originalEvent||e;var t=this.image.resizeHandle.h;t+=e.targetTouches?e.targetTouches[0].pageY-this.image.resizeHandle.y:e.pageY-this.image.resizeHandle.y;var i=Math.round(t*this.image.resizeHandle.ratio);50>t||100>i||(this.image.resizeHandle.el.width(i),this.image.resizeHandle.el.height(this.image.resizeHandle.el.width()/this.image.resizeHandle.ratio),this.code.sync())},stopResize:function(){this.handle=!1,e(document).off(".redactor-image-resize"),this.image.hideResize()},onDrag:function(t){return 0!==this.$editor.find("#redactor-image-box").length?(t.preventDefault(),!1):void this.$editor.on("drop.redactor-image-inside-drop",e.proxy(function(){setTimeout(e.proxy(this.image.onDrop,this),1)},this))},onDrop:function(){this.image.fixImageSourceAfterDrop(),this.observe.images(),this.$editor.off("drop.redactor-image-inside-drop"),this.clean.clearUnverified(),this.code.sync()},fixImageSourceAfterDrop:function(){this.$editor.find("img[data-save-url]").each(function(){var t=e(this);t.attr("src",t.attr("data-save-url")),t.removeAttr("data-save-url")})},hideResize:function(t){if(!t||0===e(t.target).closest("#redactor-image-box").length){if(t&&"IMG"==t.target.tagName){var i=e(t.target);i.attr("data-save-url",i.attr("src"))}var n=this.$editor.find("#redactor-image-box");0!==n.length&&(this.opts.imageEditable&&this.image.editter.remove(),e(this.image.resizer).remove(),n.find("img").css({marginTop:n[0].style.marginTop,marginBottom:n[0].style.marginBottom,marginLeft:n[0].style.marginLeft,marginRight:n[0].style.marginRight}),n.css("margin",""),n.find("img").css("opacity",""),n.replaceWith(function(){return e(this).contents()}),e(document).off("click.redactor-image-resize-hide."+this.uuid),this.$editor.off("click.redactor-image-resize-hide."+this.uuid),"undefined"!=typeof this.image.resizeHandle&&this.image.resizeHandle.el.attr("rel",this.image.resizeHandle.el.attr("style")),this.code.sync())}},loadResizableControls:function(t,i){if(this.opts.imageResizable&&!this.utils.isMobile()){var n=e('<span id="redactor-image-resizer" data-redactor="verified"></span>');return this.utils.isDesktop()||n.css({width:"15px",height:"15px"}),n.attr("contenteditable",!1),i.append(n),i.append(t),n}return i.append(t),!1},loadEditableControls:function(t){var i=e('<span id="redactor-image-box" data-redactor="verified">');if(i.css("float",t.css("float")).attr("contenteditable",!1),"auto"!=t[0].style.margin?(i.css({marginTop:t[0].style.marginTop,marginBottom:t[0].style.marginBottom,marginLeft:t[0].style.marginLeft,marginRight:t[0].style.marginRight}),t.css("margin","")):i.css({display:"block",margin:"auto"}),t.css("opacity",".5").after(i),this.opts.imageEditable){this.image.editter=e('<span id="redactor-image-editter" data-redactor="verified">'+this.lang.get("edit")+"</span>"),this.image.editter.attr("contenteditable",!1),this.image.editter.on("click",e.proxy(function(){this.image.showEdit(t)},this)),i.append(this.image.editter);var n=this.image.editter.innerWidth();this.image.editter.css("margin-left","-"+n/2+"px")}return this.image.loadResizableControls(t,i)},remove:function(t){var i=e(t),n=i.closest("a"),r=i.closest("figure"),s=i.parent();0!==e("#redactor-image-box").length&&(s=e("#redactor-image-box").parent());var o;0!==r.length?(o=r.next(),r.remove()):0!==n.length?(s=n.parent(),n.remove()):i.remove(),e("#redactor-image-box").remove(),this.caret.setStart(0!==r.length?o:s),this.core.setCallback("imageDelete",i[0].src,i),this.modal.close(),this.code.sync()},insert:function(t,i,n){if("undefined"!=typeof t.error)return this.modal.close(),this.selection.restore(),void this.core.setCallback("imageUploadError",t);var r;"string"==typeof t?r=e(t).attr("data-redactor-inserted-image","true"):(r=e("<img>"),r.attr("src",t.filelink).attr("data-redactor-inserted-image","true"));var s=r,o=this.utils.isCurrentOrParent("P");if(o&&(s=e("<blockquote />").append(r)),i){this.selection.removeMarkers();var a=this.selection.getMarker();this.insert.nodeToCaretPositionFromPoint(n,a)}else this.modal.close();this.selection.restore(),this.buffer.set(),this.insert.html(this.utils.getOuterHtml(s),!1);var l=this.$editor.find("img[data-redactor-inserted-image=true]").removeAttr("data-redactor-inserted-image");o?l.parent().contents().unwrap().wrap("<p />"):this.opts.linebreaks&&l.before("<br>").after("<br>"),"string"!=typeof t&&this.core.setCallback("imageUpload",l,t)}}},indent:function(){return{increase:function(){this.utils.browser("msie")||this.$editor.focus(),this.buffer.set(),this.selection.save();var e=this.selection.getBlock();e&&"LI"==e.tagName?this.indent.increaseLists():e===!1&&this.opts.linebreaks?this.indent.increaseText():this.indent.increaseBlocks(),this.selection.restore(),this.code.sync()},increaseLists:function(){document.execCommand("indent"),this.indent.fixEmptyIndent(),this.clean.normalizeLists(),this.clean.clearUnverified()},increaseBlocks:function(){e.each(this.selection.getBlocks(),e.proxy(function(e,t){if("TD"!==t.tagName&&"TH"!==t.tagName){var i=this.utils.getAlignmentElement(t),n=this.utils.normalize(i.css("margin-left"))+this.opts.indentValue;i.css("margin-left",n+"px")}},this))},increaseText:function(){var t=this.selection.wrap("div");e(t).attr("data-tagblock","redactor"),e(t).css("margin-left",this.opts.indentValue+"px")},decrease:function(){this.buffer.set(),this.selection.save();var e=this.selection.getBlock();e&&"LI"==e.tagName?this.indent.decreaseLists():this.indent.decreaseBlocks(),this.selection.restore(),this.code.sync()},decreaseLists:function(){document.execCommand("outdent");var t=this.selection.getCurrent(),i=e(t).closest("li"),n=i.parent();0!==i.length&&0!==n.length&&"LI"==n[0].tagName&&n.after(i),this.indent.fixEmptyIndent(),this.opts.linebreaks||0!==i.length||(document.execCommand("formatblock",!1,"p"),this.$editor.find("ul, ol, blockquote, p").each(e.proxy(this.utils.removeEmpty,this))),this.clean.clearUnverified()},decreaseBlocks:function(){e.each(this.selection.getBlocks(),e.proxy(function(e,t){var i=this.utils.getAlignmentElement(t),n=this.utils.normalize(i.css("margin-left"))-this.opts.indentValue;0>=n?this.opts.linebreaks&&"undefined"!=typeof i.data("tagblock")?i.replaceWith(i.html()+"<br />"):(i.css("margin-left",""),this.utils.removeEmptyAttr(i,"style")):i.css("margin-left",n+"px")},this))},fixEmptyIndent:function(){var t=this.selection.getBlock();if(this.range.collapsed&&t&&"LI"==t.tagName&&this.utils.isEmpty(e(t).text())){var i=e(t);i.find("span").not(".redactor-selection-marker").contents().unwrap(),i.append("<br>")}}}},inline:function(){return{formatting:function(e){var t,i;"undefined"!=typeof this.formatting[e].style?t="style":"undefined"!=typeof this.formatting[e]["class"]&&(t="class"),t&&(i=this.formatting[e][t]),this.inline.format(this.formatting[e].tag,t,i)},format:function(e,t,i){if(!this.utils.isCurrentOrParent("PRE")&&!this.utils.isCurrentOrParentHeader()){for(var n=["b","bold","i","italic","underline","strikethrough","deleted","superscript","subscript"],r=["strong","strong","em","em","u","del","del","sup","sub"],s=0;s<n.length;s++)e==n[s]&&(e=r[s]);this.inline.type=t||!1,this.inline.value=i||!1,this.buffer.set(),this.utils.browser("msie")||this.$editor.focus(),this.selection.get(),this.range.collapsed?this.inline.formatCollapsed(e):this.inline.formatMultiple(e)}},formatCollapsed:function(t){var i=this.selection.getCurrent(),n=e(i).closest(t+"[data-redactor-tag="+t+"]");if(0!==n.length&&"style"!=this.inline.type&&"SPAN"!=n[0].tagName)return void(this.utils.isEmpty(n.text())?(this.caret.setAfter(n[0]),n.remove(),this.code.sync()):this.utils.isEndOfElement(n)&&this.caret.setAfter(n[0]));var r=e("<"+t+">").attr("data-verified","redactor").attr("data-redactor-tag",t);r.html(this.opts.invisibleSpace),r=this.inline.setFormat(r);var r=this.insert.node(r);this.caret.setEnd(r),this.code.sync()},formatMultiple:function(t){if(this.inline.formatConvert(t),this.selection.save(),document.execCommand("strikethrough"),this.$editor.find("strike").each(e.proxy(function(i,n){var r=e(n);this.inline.formatRemoveSameChildren(r,t);var s;if(this.inline.type?(s=e("<span>").attr("data-redactor-tag",t).attr("data-verified","redactor"),s=this.inline.setFormat(s)):s=e("<"+t+">").attr("data-redactor-tag",t).attr("data-verified","redactor"),r.replaceWith(s.html(r.contents())),"span"==t){var o=s.parent();if(o&&"SPAN"==o[0].tagName&&"style"==this.inline.type)for(var a=this.inline.value.split(";"),l=0;l<a.length;l++){if(""===a[l])return;var c=a[l].split(":");o.css(c[0],""),this.utils.removeEmptyAttr(o,"style")&&o.replaceWith(o.contents())}}},this)),"span"!=t&&this.$editor.find(this.opts.inlineTags.join(", ")).each(e.proxy(function(t,i){var n=e(i),r=n.css("text-decoration");"line-through"==r&&(n.css("text-decoration",""),this.utils.removeEmptyAttr(n,"style"))},this)),"del"!=t){var i=this;this.$editor.find("inline").each(function(e,t){i.utils.replaceToTag(t,"del")})}this.selection.restore(),this.code.sync()},formatRemoveSameChildren:function(t,i){var n=this;t.children(i).each(function(){var t=e(this);if(!t.hasClass("redactor-selection-marker"))if("style"==n.inline.type)for(var i=n.inline.value.split(";"),r=0;r<i.length;r++){if(""===i[r])return;var s=i[r].split(":");t.css(s[0],""),n.utils.removeEmptyAttr(t,"style")&&t.replaceWith(t.contents())}else t.contents().unwrap()})},formatConvert:function(t){this.selection.save();var i="";"class"==this.inline.type?i="[data-redactor-class="+this.inline.value+"]":"style"==this.inline.type&&(i='[data-redactor-style="'+this.inline.value+'"]');var n=this;"del"!=t&&this.$editor.find("del").each(function(e,t){n.utils.replaceToTag(t,"inline")}),"span"!=t&&this.$editor.find(t).each(function(){var t=e(this);t.replaceWith(e("<strike />").html(t.contents()))}),this.$editor.find('[data-redactor-tag="'+t+'"]'+i).each(function(){if(""!==i||"span"!=t||this.tagName.toLowerCase()!=t){var n=e(this);n.replaceWith(e("<strike />").html(n.contents()))}}),this.selection.restore()},setFormat:function(e){switch(this.inline.type){case"class":e.hasClass(this.inline.value)?(e.removeClass(this.inline.value),e.removeAttr("data-redactor-class")):(e.addClass(this.inline.value),e.attr("data-redactor-class",this.inline.value));break;case"style":e[0].style.cssText=this.inline.value,e.attr("data-redactor-style",this.inline.value)}return e},removeStyle:function(){this.buffer.set();var t=this.selection.getCurrent(),i=this.selection.getInlines();if(this.selection.save(),t&&"SPAN"===t.tagName){var n=e(t);n.removeAttr("style"),0===n[0].attributes.length&&n.replaceWith(n.contents())}e.each(i,e.proxy(function(t,i){var n=e(i);-1==e.inArray(i.tagName.toLowerCase(),this.opts.inlineTags)||n.hasClass("redactor-selection-marker")||(n.removeAttr("style"),0===n[0].attributes.length&&n.replaceWith(n.contents()))},this)),this.selection.restore(),this.code.sync()},removeStyleRule:function(t){this.buffer.set();var i=this.selection.getParent(),n=this.selection.getInlines();if(this.selection.save(),i&&"SPAN"===i.tagName){var r=e(i);r.css(t,""),this.utils.removeEmptyAttr(r,"style"),0===r[0].attributes.length&&r.replaceWith(r.contents())}e.each(n,e.proxy(function(i,n){var r=e(n);-1==e.inArray(n.tagName.toLowerCase(),this.opts.inlineTags)||r.hasClass("redactor-selection-marker")||(r.css(t,""),this.utils.removeEmptyAttr(r,"style"),0===r[0].attributes.length&&r.replaceWith(r.contents()))},this)),this.selection.restore(),this.code.sync()},removeFormat:function(){this.buffer.set();var t=this.selection.getCurrent();this.selection.save(),document.execCommand("removeFormat"),t&&"SPAN"===t.tagName&&e(t).replaceWith(e(t).contents()),e.each(this.selection.getNodes(),e.proxy(function(t,i){var n=e(i);-1==e.inArray(i.tagName.toLowerCase(),this.opts.inlineTags)||n.hasClass("redactor-selection-marker")||n.replaceWith(n.contents())},this)),this.selection.restore(),this.code.sync()},toggleClass:function(e){this.inline.format("span","class",e)},toggleStyle:function(e){this.inline.format("span","style",e)}}},insert:function(){return{set:function(t,i){this.placeholder.remove(),t=this.clean.setVerified(t),"undefined"==typeof i&&(t=this.clean.onPaste(t,!1)),this.$editor.html(t),this.selection.remove(),this.focus.setEnd(),this.clean.normalizeLists(),this.code.sync(),this.observe.load(),"undefined"==typeof i&&setTimeout(e.proxy(this.clean.clearUnverified,this),10)},text:function(t){if(this.placeholder.remove(),t=t.toString(),t=e.trim(t),t=this.clean.getPlainText(t,!1),this.$editor.focus(),this.utils.browser("msie"))this.insert.htmlIe(t);else{this.selection.get(),this.range.deleteContents();var i=document.createElement("div");i.innerHTML=t;for(var n,r,s=document.createDocumentFragment();n=i.firstChild;)r=s.appendChild(n);if(this.range.insertNode(s),r){var o=this.range.cloneRange();o.setStartAfter(r),o.collapse(!0),this.sel.removeAllRanges(),this.sel.addRange(o)}}this.code.sync(),this.clean.clearUnverified()},htmlWithoutClean:function(e){this.insert.html(e,!1)},html:function(t,i){this.placeholder.remove(),"undefined"==typeof i&&(i=!0),this.$editor.focus(),t=this.clean.setVerified(t),i&&(t=this.clean.onPaste(t)),this.utils.browser("msie")?this.insert.htmlIe(t):(this.clean.singleLine?this.insert.execHtml(t):document.execCommand("insertHTML",!1,t),this.insert.htmlFixMozilla()),this.clean.normalizeLists(),this.opts.linebreaks||this.$editor.find("p").each(e.proxy(this.utils.removeEmpty,this)),this.code.sync(),this.observe.load(),i&&this.clean.clearUnverified()},htmlFixMozilla:function(){if(this.utils.browser("mozilla")){var t=e(this.selection.getBlock()).next();t.length>0&&"P"==t[0].tagName&&""===t.html()&&t.remove()}},htmlIe:function(t){if(this.utils.isIe11()){var i=this.utils.isCurrentOrParent("P"),n=e("<div>").append(t),r=n.contents().is("p, :header, dl, ul, ol, div, table, td, blockquote, pre, address, section, header, footer, aside, article");return void(i&&r?this.insert.ie11FixInserting(i,t):this.insert.ie11PasteFrag(t))}document.selection.createRange().pasteHTML(t)},execHtml:function(e){e=this.clean.setVerified(e),this.selection.get(),this.range.deleteContents();var t=document.createElement("div");t.innerHTML=e;for(var i,n,r=document.createDocumentFragment();i=t.firstChild;)n=r.appendChild(i);this.range.insertNode(r),this.range.collapse(!0),this.caret.setAfter(n)},node:function(t,i){t=t[0]||t;var n=this.utils.getOuterHtml(t);return n=this.clean.setVerified(n),null!==n.match(/</g)&&(t=e(n)[0]),this.selection.get(),i!==!1&&this.range.deleteContents(),this.range.insertNode(t),this.range.collapse(!1),this.selection.addRange(),t},nodeToPoint:function(e,t,i){e=e[0]||e,this.selection.get();var n;if(document.caretPositionFromPoint){var r=document.caretPositionFromPoint(t,i);this.range.setStart(r.offsetNode,r.offset),this.range.collapse(!0),this.range.insertNode(e)}else if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(t,i),n.insertNode(e);else if("undefined"!=typeof document.body.createTextRange){n=document.body.createTextRange(),n.moveToPoint(t,i);var s=n.duplicate();s.moveToPoint(t,i),n.setEndPoint("EndToEnd",s),n.select()}},nodeToCaretPositionFromPoint:function(e,t){t=t[0]||t;var i,n=e.clientX,r=e.clientY;if(document.caretPositionFromPoint){var s=document.caretPositionFromPoint(n,r),o=document.getSelection();i=o.getRangeAt(0),i.setStart(s.offsetNode,s.offset),i.collapse(!0),i.insertNode(t)}else if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(n,r),i.insertNode(t);else if("undefined"!=typeof document.body.createTextRange){i=document.body.createTextRange(),i.moveToPoint(n,r);var a=i.duplicate();a.moveToPoint(n,r),i.setEndPoint("EndToEnd",a),i.select()}},ie11FixInserting:function(t,i){var n=document.createElement("span");n.className="redactor-ie-paste",this.insert.node(n);var r=e(t).html();r="<p>"+r.replace(/<span class="redactor-ie-paste"><\/span>/gi,"</p>"+i+"<p>")+"</p>",e(t).replaceWith(r)},ie11PasteFrag:function(e){this.selection.get(),this.range.deleteContents();var t=document.createElement("div");t.innerHTML=e;for(var i,n,r=document.createDocumentFragment();i=t.firstChild;)n=r.appendChild(i);this.range.insertNode(r),this.range.collapse(!1),this.selection.addRange()}}},keydown:function(){return{init:function(t){if(!this.rtePaste){var i=t.which,n=i>=37&&40>=i;this.keydown.ctrl=t.ctrlKey||t.metaKey,this.keydown.current=this.selection.getCurrent(),this.keydown.parent=this.selection.getParent(),this.keydown.block=this.selection.getBlock(),this.keydown.pre=this.utils.isTag(this.keydown.current,"pre"),this.keydown.blockquote=this.utils.isTag(this.keydown.current,"blockquote"),this.keydown.figcaption=this.utils.isTag(this.keydown.current,"figcaption"),this.shortcuts.init(t,i),this.keydown.checkEvents(n,i),this.keydown.setupBuffer(t,i),this.keydown.addArrowsEvent(n),this.keydown.setupSelectAll(t,i);var r=this.core.setCallback("keydown",t);if(r===!1)return t.preventDefault(),!1;if(this.opts.enterKey&&(this.utils.browser("msie")||this.utils.browser("mozilla"))&&(i===this.keyCode.DOWN||i===this.keyCode.RIGHT)){var s=!1,o=!1;if(this.keydown.block&&"TD"===this.keydown.block.tagName&&(o=e(this.keydown.block).closest("table")),o&&o.find("td").last()[0]===this.keydown.block&&(s=!0),this.utils.isEndOfElement()&&s){var a=e(this.opts.emptyHtml);o.after(a),this.caret.setStart(a)}}if(this.opts.enterKey&&i===this.keyCode.DOWN&&this.keydown.onArrowDown(),!this.opts.enterKey&&i===this.keyCode.ENTER)return t.preventDefault(),void(this.range.collapsed||this.range.deleteContents());if(i==this.keyCode.ENTER&&!t.shiftKey&&!t.ctrlKey&&!t.metaKey){var l=this.core.setCallback("enter",t);if(l===!1)return t.preventDefault(),!1;if(this.keydown.blockquote&&this.keydown.exitFromBlockquote(t)===!0)return!1;var c,u;if(this.keydown.pre)return this.keydown.insertNewLine(t);if(this.keydown.blockquote||this.keydown.figcaption)return c=this.selection.getCurrent(),u=e(c).next(),0!==u.length&&"BR"==u[0].tagName?this.keydown.insertBreakLine(t):this.utils.isEndOfElement()&&c&&"SPAN"!=c?this.keydown.insertDblBreakLine(t):this.keydown.insertBreakLine(t);if(this.opts.linebreaks&&!this.keydown.block)return c=this.selection.getCurrent(),u=e(this.keydown.current).next(),0!==u.length&&"BR"==u[0].tagName?this.keydown.insertBreakLine(t):c!==!1&&e(c).hasClass("redactor-invisible-space")?(this.caret.setAfter(c),e(c).contents().unwrap(),this.keydown.insertDblBreakLine(t)):this.utils.isEndOfEditor()?this.keydown.insertDblBreakLine(t):this.keydown.insertBreakLine(0===u.length&&c===!1&&"undefined"!=typeof u.context?t:t);if(this.opts.linebreaks&&this.keydown.block)setTimeout(e.proxy(this.keydown.replaceDivToBreakLine,this),1);else if(!this.opts.linebreaks&&this.keydown.block)if("LI"!==this.keydown.block.tagName)setTimeout(e.proxy(this.keydown.replaceDivToParagraph,this),1);else{c=this.selection.getCurrent();var d=e(c).closest("li"),h=d.closest("ul,ol");if(0!==d.length&&this.utils.isEmpty(d.html())&&0===h.next().length){var a=e(this.opts.emptyHtml);return h.after(a),this.caret.setStart(a),!1}}else if(!this.opts.linebreaks&&!this.keydown.block)return this.keydown.insertParagraph(t)}if(i===this.keyCode.ENTER&&(t.ctrlKey||t.shiftKey))return this.keydown.onShiftEnter(t);if(i===this.keyCode.TAB||t.metaKey&&221===i||t.metaKey&&219===i)return this.keydown.onTab(t,i);if(i===this.keyCode.BACKSPACE||i===this.keyCode.DELETE){if(this.utils.browser("mozilla")&&this.keydown.current&&"TD"===this.keydown.current.tagName)return t.preventDefault(),!1;var p=this.selection.getNodes();if(p)for(var f,g=p.length,m=0;g>m;m++){var v=e(p[m]).children("img");if(0!==v.length){var b=this;e.each(v,function(t,i){var n=e(i);"none"==n.css("float")&&(b.core.setCallback("imageDelete",i.src,n),f=i)})}else"IMG"==p[m].tagName&&f!=p[m]&&(this.core.setCallback("imageDelete",p[m].src,e(p[m])),f=p[m])}}i===this.keyCode.BACKSPACE&&(this.keydown.removeInvisibleSpace(),this.keydown.removeEmptyListInTable(t)),this.code.sync()}},checkEvents:function(e,t){e||"click"!=this.core.getEvent()&&"arrow"!=this.core.getEvent()||(this.core.addEvent(!1),this.keydown.checkKeyEvents(t)&&this.buffer.set())},checkKeyEvents:function(t){var i=this.keyCode,n=[i.BACKSPACE,i.DELETE,i.ENTER,i.SPACE,i.ESC,i.TAB,i.CTRL,i.META,i.ALT,i.SHIFT];return-1==e.inArray(t,n)?!0:!1},addArrowsEvent:function(e){return e?"click"==this.core.getEvent()||"arrow"==this.core.getEvent()?void this.core.addEvent(!1):void this.core.addEvent("arrow"):void 0},setupBuffer:function(e,t){return this.keydown.ctrl&&90===t&&!e.shiftKey&&!e.altKey&&this.opts.buffer.length?(e.preventDefault(),void this.buffer.undo()):this.keydown.ctrl&&90===t&&e.shiftKey&&!e.altKey&&0!==this.opts.rebuffer.length?(e.preventDefault(),void this.buffer.redo()):void(this.keydown.ctrl||(t==this.keyCode.BACKSPACE||t==this.keyCode.DELETE||t==this.keyCode.ENTER&&!e.ctrlKey&&!e.shiftKey||t==this.keyCode.SPACE)&&this.buffer.set())},setupSelectAll:function(e,t){this.keydown.ctrl&&65===t?this.utils.enableSelectAll():t==this.keyCode.LEFT_WIN||this.keydown.ctrl||this.utils.disableSelectAll()},onArrowDown:function(){for(var e=[this.keydown.blockquote,this.keydown.pre,this.keydown.figcaption],t=0;t<e.length;t++)if(e[t])return this.keydown.insertAfterLastElement(e[t]),!1},onShiftEnter:function(e){return this.buffer.set(),this.utils.isEndOfElement()?this.keydown.insertDblBreakLine(e):this.keydown.insertBreakLine(e)},onTab:function(e,t){if(!this.opts.tabKey)return!0;if(this.utils.isEmpty(this.code.get())&&this.opts.tabAsSpaces===!1)return!0;e.preventDefault();var i;return this.keydown.pre&&!e.shiftKey?(i=document.createTextNode(this.opts.preSpaces?Array(this.opts.preSpaces+1).join(" "):"	"),this.insert.node(i),this.code.sync()):this.opts.tabAsSpaces!==!1?(i=document.createTextNode(Array(this.opts.tabAsSpaces+1).join(" ")),this.insert.node(i),this.code.sync()):e.metaKey&&219===t?this.indent.decrease():e.metaKey&&221===t?this.indent.increase():e.shiftKey?this.indent.decrease():this.indent.increase(),!1},replaceDivToBreakLine:function(){var t=this.selection.getBlock(),i=t.innerHTML.replace(/<br\s?\/?>/gi,"");

if(("DIV"===t.tagName||"P"===t.tagName)&&""===i&&!e(t).hasClass("redactor-editor")){var n=document.createElement("br");return e(t).replaceWith(n),this.caret.setBefore(n),this.code.sync(),!1}},replaceDivToParagraph:function(){var t=this.selection.getBlock(),i=t.innerHTML.replace(/<br\s?\/?>/gi,"");if("DIV"===t.tagName&&""===i&&!e(t).hasClass("redactor-editor")){var n=document.createElement("p");return n.innerHTML=this.opts.invisibleSpace,e(t).replaceWith(n),this.caret.setStart(n),this.code.sync(),!1}this.opts.cleanStyleOnEnter&&"P"==t.tagName&&e(t).removeAttr("class").removeAttr("style")},insertParagraph:function(e){e.preventDefault(),this.selection.get();var t=document.createElement("p");return t.innerHTML=this.opts.invisibleSpace,this.range.deleteContents(),this.range.insertNode(t),this.caret.setStart(t),this.code.sync(),!1},exitFromBlockquote:function(t){if(this.utils.isEndOfElement()){var i=e.trim(e(this.keydown.block).html());if(-1!=i.search(/(<br\s?\/?>){2}$/i)){if(t.preventDefault(),this.opts.linebreaks){var n=document.createElement("br");e(this.keydown.blockquote).after(n),this.caret.setBefore(n),e(this.keydown.block).html(i.replace(/<br\s?\/?>$/i,""))}else{var r=e(this.opts.emptyHtml);e(this.keydown.blockquote).after(r),this.caret.setStart(r)}return!0}}},insertAfterLastElement:function(t){if(this.utils.isEndOfElement())if(this.buffer.set(),this.opts.linebreaks){var i=e("<div>").append(e.trim(this.$editor.html())).contents(),n=i.last()[0];if("SPAN"==n.tagName&&""===n.innerHTML&&(n=i.prev()[0]),this.utils.getOuterHtml(n)!=this.utils.getOuterHtml(t))return;var r=document.createElement("br");e(t).after(r),this.caret.setAfter(r)}else{if(this.$editor.contents().last()[0]!==t)return;var s=e(this.opts.emptyHtml);e(t).after(s),this.caret.setStart(s)}},insertNewLine:function(e){e.preventDefault();var t=document.createTextNode("\n");return this.selection.get(),this.range.deleteContents(),this.range.insertNode(t),this.caret.setAfter(t),this.code.sync(),!1},insertBreakLine:function(e){return this.keydown.insertBreakLineProcessing(e)},insertDblBreakLine:function(e){return this.keydown.insertBreakLineProcessing(e,!0)},insertBreakLineProcessing:function(t,i){t.stopPropagation(),this.selection.get();var n=document.createElement("br");if(this.utils.browser("msie")?(this.range.collapse(!1),this.range.setEnd(this.range.endContainer,this.range.endOffset)):this.range.deleteContents(),this.range.insertNode(n),i===!0){var r=e(n).next();if(0!==r.length&&"BR"===r[0].tagName&&this.utils.isEndOfEditor())return this.caret.setAfter(n),this.code.sync(),!1;var s=document.createElement("br");this.range.insertNode(s),this.caret.setAfter(s)}else this.keydown.insertBreakLineProcessingAfter(n);return this.code.sync(),!1},insertBreakLineProcessingAfter:function(t){var i=this.utils.createSpaceElement();e(t).after(i),this.selection.selectElement(i),e(i).replaceWith(function(){return e(this).contents()})},removeInvisibleSpace:function(){var t=e(this.keydown.current);0===t.text().search(/^\u200B$/g)&&t.remove()},removeEmptyListInTable:function(t){var i=e(this.keydown.current),n=e(this.keydown.parent),r=i.closest("td");if(0!==r.length&&i.closest("li")&&1===n.children("li").length){if(!this.utils.isEmpty(i.text()))return;t.preventDefault(),i.remove(),n.remove(),this.caret.setStart(r)}}}},keyup:function(){return{init:function(t){if(!this.rtePaste){var i=t.which;this.keyup.current=this.selection.getCurrent(),this.keyup.parent=this.selection.getParent();var n=this.utils.isRedactorParent(e(this.keyup.parent).parent()),r=this.core.setCallback("keyup",t);return r===!1?(t.preventDefault(),!1):(!this.opts.linebreaks&&3==this.keyup.current.nodeType&&this.keyup.current.length<=1&&(this.keyup.parent===!1||"BODY"==this.keyup.parent.tagName)&&this.keyup.replaceToParagraph(),!this.opts.linebreaks&&this.utils.isRedactorParent(this.keyup.current)&&"DIV"===this.keyup.current.tagName&&this.keyup.replaceToParagraph(!1),this.opts.linebreaks||!e(this.keyup.parent).hasClass("redactor-invisible-space")||n!==!1&&"BODY"!=n[0].tagName||(e(this.keyup.parent).contents().unwrap(),this.keyup.replaceToParagraph()),this.keyup.isLinkify(i)&&(this.formatLinkify(this.opts.linkProtocol,this.opts.convertLinks,this.opts.convertUrlLinks,this.opts.convertImageLinks,this.opts.convertVideoLinks,this.opts.linkSize),this.observe.load(),this.code.sync()),i===this.keyCode.DELETE||i===this.keyCode.BACKSPACE?(this.clean.clearUnverified(),this.observe.image?(t.preventDefault(),this.image.hideResize(),this.buffer.set(),this.image.remove(this.observe.image),this.observe.image=!1,!1):(this.$editor.find("p").each(e.proxy(this.utils.removeEmpty,this)),this.opts.linebreaks&&this.keyup.current&&"DIV"==this.keyup.current.tagName&&this.utils.isEmpty(this.keyup.current.innerHTML)&&(e(this.keyup.current).after(this.selection.getMarkerAsHtml()),this.selection.restore(),e(this.keyup.current).remove()),this.keyup.formatEmpty(t))):void 0)}},isLinkify:function(e){return this.opts.convertLinks&&(this.opts.convertUrlLinks||this.opts.convertImageLinks||this.opts.convertVideoLinks)&&e===this.keyCode.ENTER&&!this.utils.isCurrentOrParent("PRE")},replaceToParagraph:function(t){var i,n=e(this.keyup.current);i=e("<p>").append(t===!1?n.html():n.clone()),n.replaceWith(i);var r=e(i).next();"undefined"!=typeof r[0]&&"BR"==r[0].tagName&&r.remove(),this.caret.setEnd(i)},formatEmpty:function(t){var i=e.trim(this.$editor.html());if(this.utils.isEmpty(i))return t.preventDefault(),this.opts.linebreaks?(this.$editor.html(this.selection.getMarkerAsHtml()),this.selection.restore()):(i="<p><br /></p>",this.$editor.html(i),this.focus.setStart()),this.code.sync(),!1}}},lang:function(){return{load:function(){this.opts.curLang=this.opts.langs[this.opts.lang]},get:function(e){return"undefined"!=typeof this.opts.curLang[e]?this.opts.curLang[e]:""}}},line:function(){return{insert:function(){this.buffer.set();var e=this.selection.getBlocks();return e[0]!==!1&&this.line.isExceptLastOrFirst(e)?void(this.utils.browser("msie")||this.$editor.focus()):void(this.utils.browser("msie")?this.line.insertInIe():this.line.insertInOthersBrowsers())},isExceptLastOrFirst:function(t){var i=["li","td","th","blockquote","figcaption","pre","dl","dt","dd"],n=t[0].tagName.toLowerCase(),r=this.selection.getLastBlock();r="undefined"==typeof r?n:r.tagName.toLowerCase();var s=-1!=e.inArray(n,i),o=-1!=e.inArray(r,i);return s&&o||s?!0:void 0},insertInIe:function(){this.utils.saveScroll(),this.buffer.set(),this.insert.node(document.createElement("hr")),this.utils.restoreScroll(),this.code.sync()},insertInOthersBrowsers:function(){this.buffer.set();var e='<p id="redactor-insert-line"><br /></p>';this.opts.linebreaks&&(e='<br id="redactor-insert-line">'),document.execCommand("insertHTML",!1,"<hr>"+e),this.line.setFocus(),this.code.sync()},setFocus:function(){var t=this.$editor.find("#redactor-insert-line"),i=e(t).next()[0];i?(this.caret.setAfter(t),t.remove()):t.removeAttr("id")}}},link:function(){return{show:function(t){"undefined"!=typeof t&&t.preventDefault&&t.preventDefault(),this.modal.load("link",this.lang.get("link_insert"),600),this.modal.createCancelButton(),this.link.buttonInsert=this.modal.createActionButton(this.lang.get("insert")),this.selection.get(),this.link.getData(),this.link.cleanUrl(),"_blank"==this.link.target&&e("#redactor-link-blank").prop("checked",!0),this.link.$inputUrl=e("#redactor-link-url"),this.link.$inputText=e("#redactor-link-url-text"),this.link.$inputText.val(this.link.text),this.link.$inputUrl.val(this.link.url),this.link.buttonInsert.on("click",e.proxy(this.link.insert,this)),e(".redactor-link-tooltip").remove(),this.selection.save(),this.modal.show(),this.link.$inputUrl.focus()},cleanUrl:function(){var e=self.location.href.replace(/\/$/i,"");if(this.link.url=this.link.url.replace(e,""),this.link.url=this.link.url.replace(/^\/#/,"#"),this.link.url=this.link.url.replace("mailto:",""),!this.opts.linkProtocol){var t=new RegExp("^(http|ftp|https)://"+self.location.host,"i");this.link.url=this.link.url.replace(t,"")}},getData:function(){this.link.$node=!1;var t=e(this.selection.getCurrent()).closest("a");0!==t.length&&"A"===t[0].tagName?(this.link.$node=t,this.link.url=t.attr("href"),this.link.text=t.text(),this.link.target=t.attr("target")):(this.link.text=this.sel.toString(),this.link.url="",this.link.target="")},insert:function(){var t="",i=this.link.$inputUrl.val(),n=this.link.$inputText.val();if(""===e.trim(i))return void this.link.$inputUrl.addClass("redactor-input-error").on("keyup",function(){e(this).removeClass("redactor-input-error"),e(this).off("keyup")});if(-1!=i.search("@")&&/(http|ftp|https):\/\//i.test(i)===!1)i="mailto:"+i;else if(0!==i.search("#")){e("#redactor-link-blank").prop("checked")&&(t="_blank");var r="((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}",s=new RegExp("^(http|ftp|https)://"+r,"i"),o=new RegExp("^"+r,"i"),a=new RegExp(".(html|php)$","i");-1==i.search(s)&&-1==i.search(a)&&0===i.search(o)&&this.opts.linkProtocol&&(i=this.opts.linkProtocol+"://"+i)}this.link.set(n,i,t),this.modal.close()},set:function(t,i,n){if(t=e.trim(t.replace(/<|>/g,"")),this.selection.restore(),""!==t||""!==i){if(""===t&&""!==i&&(t=i),this.link.$node)this.buffer.set(),this.link.$node.text(t).attr("href",i),""!==n?this.link.$node.attr("target",n):this.link.$node.removeAttr("target"),this.code.sync();else{if(this.utils.browser("mozilla")&&""===this.link.text){var r=e("<a />").attr("href",i).text(t);""!==n&&r.attr("target",n),this.insert.node(r),this.selection.selectElement(r)}else{var r;this.utils.browser("msie")?(r=e('<a href="'+i+'">').text(t),""!==n&&r.attr("target",n),r=e(this.insert.node(r)),this.selection.selectElement(r)):(document.execCommand("createLink",!1,i),r=e(this.selection.getCurrent()).closest("a"),this.utils.browser("mozilla")&&(r=e('a[_moz_dirty=""]')),""!==n&&r.attr("target",n),r.removeAttr("style").removeAttr("_moz_dirty"),(""!==this.link.text||this.link.text!=t)&&(r.text(t),this.selection.selectElement(r)))}this.code.sync(),this.core.setCallback("insertedLink",r)}setTimeout(e.proxy(function(){this.observe.links()},this),5)}},unlink:function(t){"undefined"!=typeof t&&t.preventDefault&&t.preventDefault();var i=this.selection.getNodes();if(i){this.buffer.set();for(var n=i.length,r=0;n>r;r++){var s=e(i[r]).closest("a");s.replaceWith(s.contents())}e(".redactor-link-tooltip").remove(),this.code.sync()}},toggleClass:function(e){this.link.setClass(e,"toggleClass")},addClass:function(e){this.link.setClass(e,"addClass")},removeClass:function(e){this.link.setClass(e,"removeClass")},setClass:function(t,i){var n=this.selection.getInlinesTags(["a"]);n!==!1&&e.each(n,function(){e(this)[i](t)})}}},list:function(){return{toggle:function(t){this.placeholder.remove(),this.utils.browser("msie")||this.$editor.focus(),this.buffer.set(),this.selection.save();var i=this.selection.getParent(),n=e(i).closest("ol, ul");this.utils.isRedactorParent(n)||0===n.length||(n=!1);var r,s,o=!1;if(n&&n.length){o=!0;var a=n[0].tagName;r="orderedlist"===t&&"UL"===a,s="unorderedlist"===t&&"OL"===a}r?this.utils.replaceToTag(n,"ol"):s?this.utils.replaceToTag(n,"ul"):o?this.list.remove(t):this.list.insert(t),this.selection.restore(),this.code.sync()},insert:function(t){var i=this.selection.getParent(),n=this.selection.getCurrent(),r=e(n).closest("td, th");this.utils.browser("msie")&&this.opts.linebreaks?this.list.insertInIe(t):document.execCommand("insert"+t);var s=e(this.selection.getParent()).closest("ol, ul");if(0!==r.length){var o=r.prev(),a=r.html();r.html(""),!o||1!==o.length||"TD"!==o[0].tagName&&"TH"!==o[0].tagName?e(i).prepend(r):e(o).after(r),r.html(a)}if(this.utils.isEmpty(s.find("li").text())){var l=s.children("li");l.find("br").remove(),l.append(this.selection.getMarkerAsHtml())}if(s.length){var c=s.parent();this.utils.isRedactorParent(c)&&"LI"!=c[0].tagName&&this.utils.isBlock(c[0])&&c.replaceWith(c.contents())}this.utils.browser("msie")||this.$editor.focus(),this.clean.clearUnverified()},insertInIe:function(t){var i=this.selection.wrap("div"),n=e(i).html(),r=e("orderedlist"==t?"<ol>":"<ul>"),s=e("<li>");if(""===e.trim(n))s.append(this.selection.getMarkerAsHtml()),r.append(s),this.$editor.find("#selection-marker-1").replaceWith(r);else{var o=n.split(/<br\s?\/?>/gi);if(o)for(var a=0;a<o.length;a++)""!==e.trim(o[a])&&r.append(e("<li>").html(o[a]));else s.append(n),r.append(s);e(i).replaceWith(r)}},remove:function(t){document.execCommand("insert"+t);var i=e(this.selection.getCurrent());this.indent.fixEmptyIndent(),this.opts.linebreaks||0!==i.closest("li, th, td").length||(document.execCommand("formatblock",!1,"p"),this.$editor.find("ul, ol, blockquote").each(e.proxy(this.utils.removeEmpty,this)));var n=e(this.selection.getCurrent()).closest("table"),r=n.prev();this.opts.linebreaks||0===n.length||0===r.length||"BR"!=r[0].tagName||r.remove(),this.clean.clearUnverified()}}},modal:function(){return{callbacks:{},loadTemplates:function(){this.opts.modal={imageEdit:String()+'<section id="redactor-modal-image-edit"><label>'+this.lang.get("title")+'</label><input type="text" id="redactor-image-title" /><label class="redactor-image-link-option">'+this.lang.get("link")+'</label><input type="text" id="redactor-image-link" class="redactor-image-link-option" /><label class="redactor-image-link-option"><input type="checkbox" id="redactor-image-link-blank"> '+this.lang.get("link_new_tab")+'</label><label class="redactor-image-position-option">'+this.lang.get("image_position")+'</label><select class="redactor-image-position-option" id="redactor-image-align"><option value="none">'+this.lang.get("none")+'</option><option value="left">'+this.lang.get("left")+'</option><option value="center">'+this.lang.get("center")+'</option><option value="right">'+this.lang.get("right")+"</option></select></section>",image:String()+'<section id="redactor-modal-image-insert"><div id="redactor-modal-image-droparea"></div></section>',file:String()+'<section id="redactor-modal-file-insert"><div id="redactor-modal-file-upload-box"><label>'+this.lang.get("filename")+'</label><input type="text" id="redactor-filename" /><br><br><div id="redactor-modal-file-upload"></div></div></section>',link:String()+'<section id="redactor-modal-link-insert"><label>URL</label><input type="url" id="redactor-link-url" /><label>'+this.lang.get("text")+'</label><input type="text" id="redactor-link-url-text" /><label><input type="checkbox" id="redactor-link-blank"> '+this.lang.get("link_new_tab")+"</label></section>"},e.extend(this.opts,this.opts.modal)},addCallback:function(e,t){this.modal.callbacks[e]=t},createTabber:function(t){this.modal.$tabber=e("<div>").attr("id","redactor-modal-tabber"),t.prepend(this.modal.$tabber)},addTab:function(t,i,n){var r=e('<a href="#" rel="tab'+t+'">').text(i);n&&r.addClass("active");var s=this;r.on("click",function(t){t.preventDefault(),e(".redactor-tab").hide(),e(".redactor-"+e(this).attr("rel")).show(),s.modal.$tabber.find("a").removeClass("active"),e(this).addClass("active")}),this.modal.$tabber.append(r)},addTemplate:function(e,t){this.opts.modal[e]=t},getTemplate:function(e){return this.opts.modal[e]},getModal:function(){return this.$modalBody.find("section")},load:function(e,t,i){this.modal.templateName=e,this.modal.width=i,this.modal.build(),this.modal.enableEvents(),this.modal.setTitle(t),this.modal.setDraggable(),this.modal.setContent(),"undefined"!=typeof this.modal.callbacks[e]&&this.modal.callbacks[e].call(this)},show:function(){this.utils.isMobile()&&!this.utils.browser("msie")&&document.activeElement.blur(),e(document.body).removeClass("body-redactor-hidden"),this.modal.bodyOveflow=e(document.body).css("overflow"),e(document.body).css("overflow","hidden"),this.utils.isMobile()?this.modal.showOnMobile():this.modal.showOnDesktop(),this.$modalOverlay.show(),this.$modalBox.show(),this.modal.setButtonsWidth(),this.utils.saveScroll(),this.utils.isMobile()||(setTimeout(e.proxy(this.modal.showOnDesktop,this),0),e(window).on("resize.redactor-modal",e.proxy(this.modal.resize,this))),this.core.setCallback("modalOpened",this.modal.templateName,this.$modal),e(document).off("focusin.modal"),this.$modal.find("input[type=text],input[type=url],input[type=email]").on("keydown.redactor-modal",e.proxy(this.modal.setEnter,this))},showOnDesktop:function(){var t=this.$modal.outerHeight(),i=e(window).height(),n=e(window).width();return this.modal.width>n?void this.$modal.css({width:"96%",marginTop:i/2-t/2+"px"}):void this.$modal.css(t>i?{width:this.modal.width+"px",marginTop:"20px"}:{width:this.modal.width+"px",marginTop:i/2-t/2+"px"})},showOnMobile:function(){this.$modal.css({width:"96%",marginTop:"2%"})},resize:function(){this.utils.isMobile()?this.modal.showOnMobile():this.modal.showOnDesktop()},setTitle:function(e){this.$modalHeader.html(e)},setContent:function(){this.$modalBody.html(this.modal.getTemplate(this.modal.templateName))},setDraggable:function(){"undefined"!=typeof e.fn.draggable&&(this.$modal.draggable({handle:this.$modalHeader}),this.$modalHeader.css("cursor","move"))},setEnter:function(e){13==e.which&&(e.preventDefault(),this.$modal.find("button.redactor-modal-action-btn").click())},createCancelButton:function(){var t=e("<button>").addClass("redactor-modal-btn redactor-modal-close-btn").html(this.lang.get("cancel"));t.on("click",e.proxy(this.modal.close,this)),this.$modalFooter.append(t)},createDeleteButton:function(e){return this.modal.createButton(e,"delete")},createActionButton:function(e){return this.modal.createButton(e,"action")},createButton:function(t,i){var n=e("<button>").addClass("redactor-modal-btn").addClass("redactor-modal-"+i+"-btn").html(t);return this.$modalFooter.append(n),n},setButtonsWidth:function(){var e=this.$modalFooter.find("button"),t=e.length;0!==t&&e.css("width",100/t+"%")},build:function(){this.modal.buildOverlay(),this.$modalBox=e('<div id="redactor-modal-box" />').hide(),this.$modal=e('<div id="redactor-modal" />'),this.$modalHeader=e("<header />"),this.$modalClose=e('<span id="redactor-modal-close" />').html("&times;"),this.$modalBody=e('<div id="redactor-modal-body" />'),this.$modalFooter=e("<footer />"),this.$modal.append(this.$modalHeader),this.$modal.append(this.$modalClose),this.$modal.append(this.$modalBody),this.$modal.append(this.$modalFooter),this.$modalBox.append(this.$modal),this.$modalBox.appendTo(document.body)},buildOverlay:function(){this.$modalOverlay=e('<div id="redactor-modal-overlay">').hide(),e("body").prepend(this.$modalOverlay)},enableEvents:function(){this.$modalClose.on("click.redactor-modal",e.proxy(this.modal.close,this)),e(document).on("keyup.redactor-modal",e.proxy(this.modal.closeHandler,this)),this.$editor.on("keyup.redactor-modal",e.proxy(this.modal.closeHandler,this)),this.$modalBox.on("click.redactor-modal",e.proxy(this.modal.close,this))},disableEvents:function(){this.$modalClose.off("click.redactor-modal"),e(document).off("keyup.redactor-modal"),this.$editor.off("keyup.redactor-modal"),this.$modalBox.off("click.redactor-modal"),e(window).off("resize.redactor-modal")},closeHandler:function(e){e.which==this.keyCode.ESC&&this.modal.close(!1)},close:function(t){if(t){if(!e(t.target).hasClass("redactor-modal-close-btn")&&t.target!=this.$modalClose[0]&&t.target!=this.$modalBox[0])return;t.preventDefault()}this.$modalBox&&(this.modal.disableEvents(),this.$modalOverlay.remove(),this.$modalBox.fadeOut("fast",e.proxy(function(){this.$modalBox.remove(),setTimeout(e.proxy(this.utils.restoreScroll,this),0),void 0!==t&&this.selection.restore(),e(document.body).css("overflow",this.modal.bodyOveflow),this.core.setCallback("modalClosed",this.modal.templateName)},this)))}}},observe:function(){return{load:function(){this.observe.images(),this.observe.links()},buttons:function(t,i){var n=this.selection.getCurrent(),r=this.selection.getParent();if(t!==!1?this.button.setInactiveAll():this.button.setInactiveAll(i),t===!1&&"html"!==i)return void(-1!=e.inArray(i,this.opts.activeButtons)&&this.button.toggleActive(i));e.each(this.opts.activeButtonsStates,e.proxy(function(t,i){var s=e(r).closest(t),o=e(n).closest(t);(0===s.length||this.utils.isRedactorParent(s))&&this.utils.isRedactorParent(o)&&(0!==s.length||0!==o.closest(t).length)&&this.button.setActive(i)},this));var s=e(r).closest(this.opts.alignmentTags.toString().toLowerCase());if(this.utils.isRedactorParent(r)&&s.length){var o=""===s.css("text-align")?"left":s.css("text-align");this.button.setActive("align"+o)}},addButton:function(e,t){this.opts.activeButtons.push(t),this.opts.activeButtonsStates[e]=t},images:function(){this.$editor.find("img").each(e.proxy(function(t,i){var n=e(i);n.closest("a").on("click",function(e){e.preventDefault()}),this.utils.browser("msie")&&n.attr("unselectable","on"),this.image.setEditable(n)},this)),e(document).on("click.redactor-image-delete."+this.uuid,e.proxy(function(e){this.observe.image=!1,"IMG"==e.target.tagName&&this.utils.isRedactorParent(e.target)&&(this.observe.image=this.observe.image&&this.observe.image==e.target?!1:e.target)},this))},links:function(){this.opts.linkTooltip&&(this.$editor.find("a").on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,e.proxy(this.observe.showTooltip,this)),this.$editor.on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,e.proxy(this.observe.closeTooltip,this)),e(document).on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,e.proxy(this.observe.closeTooltip,this)))},getTooltipPosition:function(e){return e.offset()},showTooltip:function(t){var i=e(t.target),n=i.closest("a"),r=0!==i.length?i[0].tagName:!1;if("A"===n[0].tagName){if("IMG"===r)return;"A"!==r&&(i=n)}if("A"===r){var s=this.observe.getTooltipPosition(i),o=e('<span class="redactor-link-tooltip"></span>'),a=i.attr("href");void 0===a&&(a=""),a.length>24&&(a=a.substring(0,24)+"...");var l=e('<a href="'+i.attr("href")+'" target="_blank" />').html(a).addClass("redactor-link-tooltip-action"),c=e('<a href="#" />').html(this.lang.get("edit")).on("click",e.proxy(this.link.show,this)).addClass("redactor-link-tooltip-action"),u=e('<a href="#" />').html(this.lang.get("unlink")).on("click",e.proxy(this.link.unlink,this)).addClass("redactor-link-tooltip-action");o.append(l).append(" | ").append(c).append(" | ").append(u),o.css({top:s.top+parseInt(i.css("line-height"),10)+"px",left:s.left+"px"}),e(".redactor-link-tooltip").remove(),e("body").append(o)}},closeTooltip:function(t){t=t.originalEvent||t;var i=t.target,n=e(i).closest("a");(0===n.length||"A"!==n[0].tagName||"A"===i.tagName)&&("A"===i.tagName&&this.utils.isRedactorParent(i)||e(i).hasClass("redactor-link-tooltip-action")||e(".redactor-link-tooltip").remove())}}},paragraphize:function(){return{load:function(t){return this.opts.linebreaks?t:""===t||"<p></p>"===t?this.opts.emptyHtml:(this.paragraphize.blocks=["table","div","pre","form","ul","ol","h1","h2","h3","h4","h5","h6","dl","blockquote","figcaption","address","section","header","footer","aside","article","object","style","script","iframe","select","input","textarea","button","option","map","area","math","hr","fieldset","legend","hgroup","nav","figure","details","menu","summary","p"],t+="\n",this.paragraphize.safes=[],this.paragraphize.z=0,t=t.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>"),t=this.paragraphize.getSafes(t),t=this.paragraphize.getSafesComments(t),t=this.paragraphize.replaceBreaksToNewLines(t),t=this.paragraphize.replaceBreaksToParagraphs(t),t=this.paragraphize.clear(t),t=this.paragraphize.restoreSafes(t),t=t.replace(new RegExp("<br\\s?/?>\n?<("+this.paragraphize.blocks.join("|")+")(.*?[^>])>","gi"),"<p><br /></p>\n<$1$2>"),e.trim(t))},getSafes:function(t){var i=e("<div />").append(t);return i.find("blockquote p").replaceWith(function(){return e(this).append("<br />").contents()}),t=i.html(),i.find(this.paragraphize.blocks.join(", ")).each(e.proxy(function(e,i){this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i.outerHTML,t=t.replace(i.outerHTML,"\n{replace"+this.paragraphize.z+"}")},this)),t},getSafesComments:function(t){var i=t.match(/<!--([\w\W]*?)-->/gi);return i?(e.each(i,e.proxy(function(e,i){this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i,t=t.replace(i,"\n{replace"+this.paragraphize.z+"}")},this)),t):t},restoreSafes:function(t){return e.each(this.paragraphize.safes,function(e,i){i="undefined"!=typeof i?i.replace(/\$/g,"&#36;"):i,t=t.replace("{replace"+e+"}",i)}),t},replaceBreaksToParagraphs:function(e){var t=e.split(new RegExp("\n","g"),-1);if(e="",t)for(var i=t.length,n=0;i>n;n++){if(!t.hasOwnProperty(n))return;-1==t[n].search("{replace")?(t[n]=t[n].replace(/<p>\n\t?<\/p>/gi,""),t[n]=t[n].replace(/<p><\/p>/gi,""),""!==t[n]&&(e+="<p>"+t[n].replace(/^\n+|\n+$/g,"")+"</p>")):e+=t[n]}return e},replaceBreaksToNewLines:function(e){return e=e.replace(/<br \/>\s*<br \/>/gi,"\n\n"),e=e.replace(/<br\s?\/?>\n?<br\s?\/?>/gi,"\n<br /><br />"),e=e.replace(new RegExp("\r\n","g"),"\n"),e=e.replace(new RegExp("\r","g"),"\n"),e=e.replace(new RegExp("/\n\n+/"),"g","\n\n")},clear:function(e){return e=e.replace(new RegExp("</blockquote></p>","gi"),"</blockquote>"),e=e.replace(new RegExp("<p></blockquote>","gi"),"</blockquote>"),e=e.replace(new RegExp("<p><blockquote>","gi"),"<blockquote>"),e=e.replace(new RegExp("<blockquote></p>","gi"),"<blockquote>"),e=e.replace(new RegExp("<p><p ","gi"),"<p "),e=e.replace(new RegExp("<p><p>","gi"),"<p>"),e=e.replace(new RegExp("</p></p>","gi"),"</p>"),e=e.replace(new RegExp("<p>\\s?</p>","gi"),""),e=e.replace(new RegExp("\n</p>","gi"),"</p>"),e=e.replace(new RegExp("<p>	?	?\n?<p>","gi"),"<p>"),e=e.replace(new RegExp("<p>	*</p>","gi"),"")}}},paste:function(){return{init:function(t){return this.opts.cleanOnPaste?(this.rtePaste=!0,this.buffer.set(),this.selection.save(),this.utils.saveScroll(),this.paste.createPasteBox(),e(window).on("scroll.redactor-freeze",e.proxy(function(){e(window).scrollTop(this.saveBodyScroll)},this)),void setTimeout(e.proxy(function(){var t=this.$pasteBox.html();this.$pasteBox.remove(),this.selection.restore(),this.utils.restoreScroll(),this.paste.insert(t),e(window).off("scroll.redactor-freeze")},this),1)):void setTimeout(e.proxy(this.code.sync,this),1)},createPasteBox:function(){this.$pasteBox=e("<div>").html("").attr("contenteditable","true").css({position:"fixed",width:0,top:0,left:"-9999px"}),e("body").append(this.$pasteBox),this.$pasteBox.focus()},insert:function(t){t=this.core.setCallback("pasteBefore",t),t=this.utils.isSelectAll()?this.clean.onPaste(t,!1):this.clean.onPaste(t),t=this.core.setCallback("paste",t),this.utils.isSelectAll()?this.insert.set(t,!1):this.insert.html(t,!1),this.utils.disableSelectAll(),this.rtePaste=!1,setTimeout(e.proxy(this.clean.clearUnverified,this),10),setTimeout(e.proxy(function(){var t=this.$editor.find("span");e.each(t,function(t,i){var n=i.innerHTML.replace(/[\u200B-\u200D\uFEFF]/,"");""===n&&0===i.attributes.length&&e(i).remove()})},this),10)}}},placeholder:function(){return{enable:function(){this.placeholder.is()&&(this.$editor.attr("placeholder",this.$element.attr("placeholder")),this.placeholder.toggle(),this.$editor.on("keyup.redactor-placeholder",e.proxy(this.placeholder.toggle,this)))},toggle:function(){var e="removeClass";this.utils.isEmpty(this.$editor.html(),!1)&&(e="addClass"),this.$editor[e]("redactor-placeholder")},remove:function(){this.$editor.removeClass("redactor-placeholder")},is:function(){return this.opts.placeholder?this.$element.attr("placeholder",this.opts.placeholder):!("undefined"==typeof this.$element.attr("placeholder")||""===this.$element.attr("placeholder"))}}},progress:function(){return{show:function(){e(document.body).append(e('<div id="redactor-progress"><span></span></div>')),e("#redactor-progress").fadeIn()},hide:function(){e("#redactor-progress").fadeOut(1500,function(){e(this).remove()})}}},selection:function(){return{get:function(){this.sel=document.getSelection(),this.range=document.getSelection&&this.sel.getRangeAt&&this.sel.rangeCount?this.sel.getRangeAt(0):document.createRange()},addRange:function(){try{this.sel.removeAllRanges()}catch(e){}this.sel.addRange(this.range)},getCurrent:function(){var e=!1;return this.selection.get(),this.sel&&this.sel.rangeCount>0&&(e=this.sel.getRangeAt(0).startContainer),this.utils.isRedactorParent(e)},getParent:function(t){return t=t||this.selection.getCurrent(),t?this.utils.isRedactorParent(e(t).parent()[0]):!1},getBlock:function(t){for(t=t||this.selection.getCurrent();t;){if(this.utils.isBlockTag(t.tagName))return e(t).hasClass("redactor-editor")?!1:t;t=t.parentNode}return!1},getInlines:function(t,i){if(this.selection.get(),this.range&&this.range.collapsed)return!1;var n=[];t="undefined"==typeof t||t===!1?this.selection.getNodes():t;var r=this.opts.inlineTags;if(r.push("span"),"undefined"!=typeof i)for(var s=0;s<i.length;s++)r.push(i[s]);return e.each(t,e.proxy(function(t,i){-1!=e.inArray(i.tagName.toLowerCase(),r)&&n.push(i)},this)),0===n.length?!1:n},getInlinesTags:function(t){if(this.selection.get(),this.range&&this.range.collapsed)return!1;var i=[],n=this.selection.getNodes();return e.each(n,e.proxy(function(n,r){-1!=e.inArray(r.tagName.toLowerCase(),t)&&i.push(r)},this)),0===i.length?!1:i},getBlocks:function(t){if(this.selection.get(),this.range&&this.range.collapsed)return[this.selection.getBlock()];var i=[];return t="undefined"==typeof t?this.selection.getNodes():t,e.each(t,e.proxy(function(e,t){this.utils.isBlock(t)&&(this.selection.lastBlock=t,i.push(t))},this)),0===i.length?[this.selection.getBlock()]:i},getLastBlock:function(){return this.selection.lastBlock},getNodes:function(){this.selection.get();var t=this.selection.getNodesMarker(1),i=this.selection.getNodesMarker(2),n=this.range.cloneRange();if(this.range.collapsed===!1){var r=n.startContainer,s=n.startOffset;this.selection.setNodesMarker(n,i,!1),n.setStart(r,s),this.selection.setNodesMarker(n,t,!0)}else this.selection.setNodesMarker(n,t,!0),i=t;var o=[],a=0,l=this;this.$editor.find("*").each(function(){if(this==t){var n=e(this).parent();0!==n.length&&"BODY"!=n[0].tagName&&l.utils.isRedactorParent(n[0])&&o.push(n[0]),o.push(this),a=1}else a>0&&(o.push(this),a+=1);return this==i?!1:void 0});for(var c=[],u=o.length,d=0;u>d;d++)"nodes-marker-1"!=o[d].id&&"nodes-marker-2"!=o[d].id&&c.push(o[d]);return this.selection.removeNodesMarkers(),c},getNodesMarker:function(t){return e('<span id="nodes-marker-'+t+'" class="redactor-nodes-marker" data-verified="redactor">'+this.opts.invisibleSpace+"</span>")[0]},setNodesMarker:function(e,t,i){try{e.collapse(i),e.insertNode(t)}catch(n){}},removeNodesMarkers:function(){e(document).find("span.redactor-nodes-marker").remove(),this.$editor.find("span.redactor-nodes-marker").remove()},fromPoint:function(e,t){this.caret.setOffset(e,t)},wrap:function(e){if(this.selection.get(),this.range.collapsed)return!1;var t=document.createElement(e);return t.appendChild(this.range.extractContents()),this.range.insertNode(t),t},selectElement:function(e){this.caret.set(e,0,e,1)},selectAll:function(){this.selection.get(),this.range.selectNodeContents(this.$editor[0]),this.selection.addRange()},remove:function(){this.selection.get(),this.sel.removeAllRanges()},save:function(){this.selection.createMarkers()},createMarkers:function(){this.selection.get();var e=this.selection.getMarker(1);if(this.selection.setMarker(this.range,e,!0),this.range.collapsed===!1){var t=this.selection.getMarker(2);this.selection.setMarker(this.range,t,!1)}this.savedSel=this.$editor.html()},getMarker:function(t){return"undefined"==typeof t&&(t=1),e('<span id="selection-marker-'+t+'" class="redactor-selection-marker"  data-verified="redactor">'+this.opts.invisibleSpace+"</span>")[0]},getMarkerAsHtml:function(e){return this.utils.getOuterHtml(this.selection.getMarker(e))},setMarker:function(e,t,i){e=e.cloneRange();try{e.collapse(i),e.insertNode(t)}catch(n){this.focus.setStart()}},restore:function(){var e=this.$editor.find("span#selection-marker-1"),t=this.$editor.find("span#selection-marker-2");0!==e.length&&0!==t.length?this.caret.set(e,0,t,0):0!==e.length?this.caret.set(e,0,e,0):this.$editor.focus(),
this.selection.removeMarkers(),this.savedSel=!1},removeMarkers:function(){this.$editor.find("span.redactor-selection-marker").each(function(t,i){var n=e(i).text().replace(/[\u200B-\u200D\uFEFF]/g,"");""===n?e(i).remove():e(i).replaceWith(function(){return e(this).contents()})})},getText:function(){return this.selection.get(),this.sel.toString()},getHtml:function(){var e="";if(this.selection.get(),this.sel.rangeCount){for(var t=document.createElement("div"),i=this.sel.rangeCount,n=0;i>n;++n)t.appendChild(this.sel.getRangeAt(n).cloneContents());e=t.innerHTML}return this.clean.onSync(e)},replaceWithHtml:function(e){if(e=this.selection.getMarkerAsHtml(1)+e+this.selection.getMarkerAsHtml(2),this.selection.get(),window.getSelection&&window.getSelection().getRangeAt){this.range.deleteContents();var t=document.createElement("div");t.innerHTML=e;for(var i,n=document.createDocumentFragment();i=t.firstChild;)n.appendChild(i);this.range.insertNode(n)}else document.selection&&document.selection.createRange&&this.range.pasteHTML(e);this.selection.restore(),this.code.sync()}}},shortcuts:function(){return{init:function(t,i){return this.opts.shortcuts?void e.each(this.opts.shortcuts,e.proxy(function(i,n){for(var r=i.split(","),s=r.length,o=0;s>o;o++)"string"==typeof r[o]&&this.shortcuts.handler(t,e.trim(r[o]),e.proxy(function(){var e;"-1"!=n.func.search(/\./)?(e=n.func.split("."),"undefined"!=typeof this[e[0]]&&this[e[0]][e[1]].apply(this,n.params)):this[n.func].apply(this,n.params)},this))},this)):(!t.ctrlKey&&!t.metaKey||66!==i&&73!==i||t.preventDefault(),!1)},handler:function(t,i,n){var r={8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},s={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"};i=i.toLowerCase().split(" ");var o=r[t.keyCode],a=String.fromCharCode(t.which).toLowerCase(),l="",c={};e.each(["alt","ctrl","meta","shift"],function(e,i){t[i+"Key"]&&o!==i&&(l+=i+"+")}),o&&(c[l+o]=!0),a&&(c[l+a]=!0,c[l+s[a]]=!0,"shift+"===l&&(c[s[a]]=!0));for(var u=0,d=i.length;d>u;u++)if(c[i[u]])return t.preventDefault(),n.apply(this,arguments)}}},tabifier:function(){return{get:function(e){if(!this.opts.tabifier)return e;var t=["area","body","head","hr","i?frame","link","meta","noscript","style","script","table","tbody","thead","tfoot"],i=["li","dt","dt","h[1-6]","option","script"],n=["p","blockquote","div","dl","fieldset","form","frameset","map","ol","pre","select","td","th","tr","ul"];this.tabifier.lineBefore=new RegExp("^<(/?"+t.join("|/?")+"|"+i.join("|")+")[ >]"),this.tabifier.lineAfter=new RegExp("^<(br|/?"+t.join("|/?")+"|/"+i.join("|/")+")[ >]"),this.tabifier.newLevel=new RegExp("^</?("+n.join("|")+")[ >]");var r=0,s=e.length,o=0,a=null,l=null,c="",u="",d="";for(this.tabifier.cleanlevel=0;s>r;r++){if(o=r,-1==e.substr(r).indexOf("<"))return u+=e.substr(r),this.tabifier.finish(u);for(;s>o&&"<"!=e.charAt(o);)o++;for(r!=o&&(d=e.substr(r,o-r),d.match(/^\s{2,}$/g)||("\n"==u.charAt(u.length-1)?u+=this.tabifier.getTabs():"\n"==d.charAt(0)&&(u+="\n"+this.tabifier.getTabs(),d=d.replace(/^\s+/,"")),u+=d),d.match(/\n/)&&(u+="\n"+this.tabifier.getTabs())),a=o;s>o&&">"!=e.charAt(o);)o++;c=e.substr(a,o-a),r=o;var h;if("!--"==c.substr(1,3)){if(!c.match(/--$/)){for(;"-->"!=e.substr(o,3);)o++;o+=2,c=e.substr(a,o-a),r=o}"\n"!=u.charAt(u.length-1)&&(u+="\n"),u+=this.tabifier.getTabs(),u+=c+">\n"}else"!"==c[1]?u=this.tabifier.placeTag(c+">",u):"?"==c[1]?u+=c+">\n":(h=c.match(/^<(script|style|pre)/i))?(h[1]=h[1].toLowerCase(),c=this.tabifier.cleanTag(c),u=this.tabifier.placeTag(c,u),l=String(e.substr(r+1)).toLowerCase().indexOf("</"+h[1]),l&&(d=e.substr(r+1,l),r+=l,u+=d)):(c=this.tabifier.cleanTag(c),u=this.tabifier.placeTag(c,u))}return this.tabifier.finish(u)},getTabs:function(){for(var e="",t=0;t<this.tabifier.cleanlevel;t++)e+="	";return e},finish:function(e){return e=e.replace(/\n\s*\n/g,"\n"),e=e.replace(/^[\s\n]*/,""),e=e.replace(/[\s\n]*$/,""),e=e.replace(/<script(.*?)>\n<\/script>/gi,"<script$1></script>"),this.tabifier.cleanlevel=0,e},cleanTag:function(e){var t="";e=e.replace(/\n/g," "),e=e.replace(/\s{2,}/g," "),e=e.replace(/^\s+|\s+$/g," ");var i="";e.match(/\/$/)&&(i="/",e=e.replace(/\/+$/,""));for(var n;n=/\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/.exec(e);)n[2]?t+=n[1].toLowerCase()+"="+n[2]:n[1]&&(t+=n[1].toLowerCase()),t+=" ",e=e.substr(n[0].length);return t.replace(/\s*$/,"")+i+">"},placeTag:function(e,t){var i=e.match(this.tabifier.newLevel);return(e.match(this.tabifier.lineBefore)||i)&&(t=t.replace(/\s*$/,""),t+="\n"),i&&"/"==e.charAt(1)&&this.tabifier.cleanlevel--,"\n"==t.charAt(t.length-1)&&(t+=this.tabifier.getTabs()),i&&"/"!=e.charAt(1)&&this.tabifier.cleanlevel++,t+=e,(e.match(this.tabifier.lineAfter)||e.match(this.tabifier.newLevel))&&(t=t.replace(/ *$/,"")),t}}},tidy:function(){return{setupAllowed:function(){if(this.opts.allowedTags&&(this.opts.deniedTags=!1),this.opts.allowedAttr&&(this.opts.removeAttr=!1),!this.opts.linebreaks){var e=["p","section"];this.opts.allowedTags&&this.tidy.addToAllowed(e),this.opts.deniedTags&&this.tidy.removeFromDenied(e)}},addToAllowed:function(t){for(var i=t.length,n=0;i>n;n++)-1==e.inArray(t[n],this.opts.allowedTags)&&this.opts.allowedTags.push(t[n])},removeFromDenied:function(t){for(var i=t.length,n=0;i>n;n++){var r=e.inArray(t[n],this.opts.deniedTags);-1!=r&&this.opts.deniedTags.splice(r,1)}},load:function(t,i){return this.tidy.settings={deniedTags:this.opts.deniedTags,allowedTags:this.opts.allowedTags,removeComments:this.opts.removeComments,replaceTags:this.opts.replaceTags,replaceStyles:this.opts.replaceStyles,removeDataAttr:this.opts.removeDataAttr,removeAttr:this.opts.removeAttr,allowedAttr:this.opts.allowedAttr,removeWithoutAttr:this.opts.removeWithoutAttr,removeEmpty:this.opts.removeEmpty},e.extend(this.tidy.settings,i),t=this.tidy.removeComments(t),this.tidy.$div=e("<div />").append(t),this.tidy.replaceTags(),this.tidy.replaceStyles(),this.tidy.removeTags(),this.tidy.removeAttr(),this.tidy.removeEmpty(),this.tidy.removeParagraphsInLists(),this.tidy.removeDataAttr(),this.tidy.removeWithoutAttr(),t=this.tidy.$div.html(),this.tidy.$div.remove(),t},removeComments:function(e){return this.tidy.settings.removeComments?e.replace(/<!--[\s\S]*?-->/gi,""):e},replaceTags:function(t){if(!this.tidy.settings.replaceTags)return t;for(var i=this.tidy.settings.replaceTags.length,n=[],r=[],s=0;i>s;s++)r.push(this.tidy.settings.replaceTags[s][1]),n.push(this.tidy.settings.replaceTags[s][0]);return this.tidy.$div.find(n.join(",")).each(e.proxy(function(t,i){var n=r[t];e(i).replaceWith(function(){for(var t=e("<"+n+" />").append(e(this).contents()),i=0;i<this.attributes.length;i++)t.attr(this.attributes[i].name,this.attributes[i].value);return t})},this)),t},replaceStyles:function(){if(this.tidy.settings.replaceStyles){var t=this.tidy.settings.replaceStyles.length;this.tidy.$div.find("span").each(e.proxy(function(i,n){for(var r=e(n),s=r.attr("style"),o=0;t>o;o++)if(s&&s.match(new RegExp("^"+this.tidy.settings.replaceStyles[o][0],"i"))){var a=this.tidy.settings.replaceStyles[o][1];r.replaceWith(function(){var t=document.createElement(a);return e(t).append(e(this).contents())})}},this))}},removeTags:function(){!this.tidy.settings.deniedTags&&this.tidy.settings.allowedTags&&this.tidy.$div.find("*").not(this.tidy.settings.allowedTags.join(",")).each(function(t,i){""===i.innerHTML?e(i).remove():e(i).contents().unwrap()}),this.tidy.settings.deniedTags&&this.tidy.$div.find(this.tidy.settings.deniedTags.join(",")).each(function(t,i){""===i.innerHTML?e(i).remove():e(i).contents().unwrap()})},removeAttr:function(){var t;if(!this.tidy.settings.removeAttr&&this.tidy.settings.allowedAttr){var i=[],n=[];t=this.tidy.settings.allowedAttr.length;for(var r=0;t>r;r++)i.push(this.tidy.settings.allowedAttr[r][0]),n.push(this.tidy.settings.allowedAttr[r][1]);this.tidy.$div.find("*").each(e.proxy(function(t,r){var s=e(r),o=e.inArray(s[0].tagName.toLowerCase(),i),a=this.tidy.removeAttrGetRemoves(o,n,s);a&&e.each(a,function(e,t){s.removeAttr(t)})},this))}if(this.tidy.settings.removeAttr){t=this.tidy.settings.removeAttr.length;for(var r=0;t>r;r++){var s=this.tidy.settings.removeAttr[r][1];e.isArray(s)&&(s=s.join(" ")),this.tidy.$div.find(this.tidy.settings.removeAttr[r][0]).removeAttr(s)}}},removeAttrGetRemoves:function(t,i,n){var r=[];return-1==t?e.each(n[0].attributes,function(e,t){r.push(t.name)}):"*"==i[t]?r=[]:e.each(n[0].attributes,function(n,s){e.isArray(i[t])?-1==e.inArray(s.name,i[t])&&r.push(s.name):i[t]!=s.name&&r.push(s.name)}),r},removeAttrs:function(t,i){return i=new RegExp(i,"g"),t.each(function(){for(var t=e(this),n=this.attributes.length-1,r=n;r>=0;r--){var s=this.attributes[r];s&&s.specified&&s.name.search(i)>=0&&t.removeAttr(s.name)}})},removeEmpty:function(){this.tidy.settings.removeEmpty&&this.tidy.$div.find(this.tidy.settings.removeEmpty.join(",")).each(function(){var t=e(this),i=t.text();i=i.replace(/[\u200B-\u200D\uFEFF]/g,""),i=i.replace(/&nbsp;/gi,""),i=i.replace(/\s/g,""),""===i&&0===t.children().length&&t.remove()})},removeParagraphsInLists:function(){this.tidy.$div.find("li p").contents().unwrap()},removeDataAttr:function(){if(this.tidy.settings.removeDataAttr){var t=this.tidy.settings.removeDataAttr;e.isArray(this.tidy.settings.removeDataAttr)&&(t=this.tidy.settings.removeDataAttr.join(",")),this.tidy.removeAttrs(this.tidy.$div.find(t),"^(data-)")}},removeWithoutAttr:function(){this.tidy.settings.removeWithoutAttr&&this.tidy.$div.find(this.tidy.settings.removeWithoutAttr.join(",")).each(function(){0===this.attributes.length&&e(this).contents().unwrap()})}}},toolbar:function(){return{init:function(){return{html:{title:this.lang.get("html"),func:"code.toggle"},formatting:{title:this.lang.get("formatting"),dropdown:{p:{title:this.lang.get("paragraph"),func:"block.format"},blockquote:{title:this.lang.get("quote"),func:"block.format"},pre:{title:this.lang.get("code"),func:"block.format"},h1:{title:this.lang.get("header1"),func:"block.format"},h2:{title:this.lang.get("header2"),func:"block.format"},h3:{title:this.lang.get("header3"),func:"block.format"},h4:{title:this.lang.get("header4"),func:"block.format"},h5:{title:this.lang.get("header5"),func:"block.format"}}},bold:{title:this.lang.get("bold"),func:"inline.format"},italic:{title:this.lang.get("italic"),func:"inline.format"},deleted:{title:this.lang.get("deleted"),func:"inline.format"},underline:{title:this.lang.get("underline"),func:"inline.format"},unorderedlist:{title:"&bull; "+this.lang.get("unorderedlist"),func:"list.toggle"},orderedlist:{title:"1. "+this.lang.get("orderedlist"),func:"list.toggle"},outdent:{title:"< "+this.lang.get("outdent"),func:"indent.decrease"},indent:{title:"> "+this.lang.get("indent"),func:"indent.increase"},image:{title:this.lang.get("image"),func:"image.show"},file:{title:this.lang.get("file"),func:"file.show"},link:{title:this.lang.get("link"),dropdown:{link:{title:this.lang.get("link_insert"),func:"link.show"},unlink:{title:this.lang.get("unlink"),func:"link.unlink"}}},alignment:{title:this.lang.get("alignment"),dropdown:{left:{title:this.lang.get("align_left"),func:"alignment.left"},center:{title:this.lang.get("align_center"),func:"alignment.center"},right:{title:this.lang.get("align_right"),func:"alignment.right"},justify:{title:this.lang.get("align_justify"),func:"alignment.justify"}}},horizontalrule:{title:this.lang.get("horizontalrule"),func:"line.insert"}}},build:function(){this.toolbar.hideButtons(),this.toolbar.hideButtonsOnMobile(),this.toolbar.isButtonSourceNeeded(),0!==this.opts.buttons.length&&(this.$toolbar=this.toolbar.createContainer(),this.toolbar.setOverflow(),this.toolbar.append(),this.toolbar.setFormattingTags(),this.toolbar.loadButtons(),this.toolbar.setFixed(),this.opts.activeButtons&&this.$editor.on("mouseup.redactor keyup.redactor focus.redactor",e.proxy(this.observe.buttons,this)))},createContainer:function(){return e("<ul>").addClass("redactor-toolbar").attr("id","redactor-toolbar-"+this.uuid)},setFormattingTags:function(){e.each(this.opts.toolbar.formatting.dropdown,e.proxy(function(t,i){-1==e.inArray(t,this.opts.formatting)&&delete this.opts.toolbar.formatting.dropdown[t]},this))},loadButtons:function(){e.each(this.opts.buttons,e.proxy(function(t,i){if(this.opts.toolbar[i]){if("file"===i){if(this.opts.fileUpload===!1)return;if(!this.opts.fileUpload&&this.opts.s3===!1)return}if("image"===i){if(this.opts.imageUpload===!1)return;if(!this.opts.imageUpload&&this.opts.s3===!1)return}var n=this.opts.toolbar[i];this.$toolbar.append(e("<li>").append(this.button.build(i,n)))}},this))},append:function(){this.opts.toolbarExternal?(this.$toolbar.addClass("redactor-toolbar-external"),e(this.opts.toolbarExternal).html(this.$toolbar)):this.$box.prepend(this.$toolbar)},setFixed:function(){this.utils.isDesktop()&&(this.opts.toolbarExternal||this.opts.toolbarFixed&&(this.toolbar.observeScroll(),e(this.opts.toolbarFixedTarget).on("scroll.redactor."+this.uuid,e.proxy(this.toolbar.observeScroll,this))))},setOverflow:function(){this.utils.isMobile()&&this.opts.toolbarOverflow&&this.$toolbar.addClass("redactor-toolbar-overflow")},isButtonSourceNeeded:function(){if(!this.opts.source){var e=this.opts.buttons.indexOf("html");-1!==e&&this.opts.buttons.splice(e,1)}},hideButtons:function(){0!==this.opts.buttonsHide.length&&e.each(this.opts.buttonsHide,e.proxy(function(e,t){var i=this.opts.buttons.indexOf(t);this.opts.buttons.splice(i,1)},this))},hideButtonsOnMobile:function(){this.utils.isMobile()&&0!==this.opts.buttonsHideOnMobile.length&&e.each(this.opts.buttonsHideOnMobile,e.proxy(function(e,t){var i=this.opts.buttons.indexOf(t);this.opts.buttons.splice(i,1)},this))},observeScroll:function(){var t=e(this.opts.toolbarFixedTarget).scrollTop(),i=1;this.opts.toolbarFixedTarget===document&&(i=this.$box.offset().top),t>i?this.toolbar.observeScrollEnable(t,i):this.toolbar.observeScrollDisable()},observeScrollEnable:function(e,t){var i=this.opts.toolbarFixedTopOffset+e-t,n=0,r=t+this.$box.height()-32,s=this.$box.innerWidth();this.$toolbar.addClass("toolbar-fixed-box"),this.$toolbar.css({position:"absolute",width:s,top:i+"px",left:n}),this.toolbar.setDropdownsFixed(),this.$toolbar.css("visibility",r>e?"visible":"hidden")},observeScrollDisable:function(){this.$toolbar.css({position:"relative",width:"auto",top:0,left:0,visibility:"visible"}),this.toolbar.unsetDropdownsFixed(),this.$toolbar.removeClass("toolbar-fixed-box")},setDropdownsFixed:function(){var t=this.$toolbar.innerHeight()+this.opts.toolbarFixedTopOffset,i="fixed";this.opts.toolbarFixedTarget!==document&&(t=this.$toolbar.innerHeight()+this.$toolbar.offset().top+this.opts.toolbarFixedTopOffset,i="absolute"),e(".redactor-dropdown-"+this.uuid).each(function(){e(this).css({position:i,top:t+"px"})})},unsetDropdownsFixed:function(){var t=this.$toolbar.innerHeight()+this.$toolbar.offset().top;e(".redactor-dropdown-"+this.uuid).each(function(){e(this).css({position:"absolute",top:t+"px"})})}}},upload:function(){return{init:function(t,i,n){this.upload.direct=!1,this.upload.callback=n,this.upload.url=i,this.upload.$el=e(t),this.upload.$droparea=e('<div id="redactor-droparea" />'),this.upload.$placeholdler=e('<div id="redactor-droparea-placeholder" />').text(this.lang.get("upload_label")),this.upload.$input=e('<input type="file" name="file" />'),this.upload.$placeholdler.append(this.upload.$input),this.upload.$droparea.append(this.upload.$placeholdler),this.upload.$el.append(this.upload.$droparea),this.upload.$droparea.off("redactor.upload"),this.upload.$input.off("redactor.upload"),this.upload.$droparea.on("dragover.redactor.upload",e.proxy(this.upload.onDrag,this)),this.upload.$droparea.on("dragleave.redactor.upload",e.proxy(this.upload.onDragLeave,this)),this.upload.$input.on("change.redactor.upload",e.proxy(function(e){e=e.originalEvent||e,this.upload.traverseFile(this.upload.$input[0].files[0],e)},this)),this.upload.$droparea.on("drop.redactor.upload",e.proxy(function(e){e.preventDefault(),this.upload.$droparea.removeClass("drag-hover").addClass("drag-drop"),this.upload.onDrop(e)},this))},directUpload:function(e,t){this.upload.direct=!0,this.upload.traverseFile(e,t)},onDrop:function(e){e=e.originalEvent||e;var t=e.dataTransfer.files;this.upload.traverseFile(t[0],e)},traverseFile:function(e,t){if(this.opts.s3)return this.upload.setConfig(e),void this.upload.s3uploadFile(e);var i=window.FormData?new FormData:null;if(window.FormData){this.upload.setConfig(e);var n="image"==this.upload.type?this.opts.imageUploadParam:this.opts.fileUploadParam;i.append(n,e)}this.progress.show(),this.core.setCallback("uploadStart",t,i),this.upload.sendData(i,t)},setConfig:function(e){this.upload.getType(e),this.upload.direct&&(this.upload.url="image"==this.upload.type?this.opts.imageUpload:this.opts.fileUpload,this.upload.callback="image"==this.upload.type?this.image.insert:this.file.insert)},getType:function(e){this.upload.type="image",-1==this.opts.imageTypes.indexOf(e.type)&&(this.upload.type="file")},getHiddenFields:function(t,i){return t===!1||"object"!=typeof t?i:(e.each(t,e.proxy(function(t,n){null!==n&&0===n.toString().indexOf("#")&&(n=e(n).val()),i.append(t,n)},this)),i)},sendData:function(t,i){"image"==this.upload.type?(t=this.upload.getHiddenFields(this.opts.uploadImageFields,t),t=this.upload.getHiddenFields(this.upload.imageFields,t)):(t=this.upload.getHiddenFields(this.opts.uploadFileFields,t),t=this.upload.getHiddenFields(this.upload.fileFields,t));var n=new XMLHttpRequest;n.open("POST",this.upload.url),n.onreadystatechange=e.proxy(function(){if(4==n.readyState){var t=n.responseText;t=t.replace(/^\[/,""),t=t.replace(/\]$/,"");var r;try{r="string"==typeof t?e.parseJSON(t):t}catch(s){r={error:!0}}this.progress.hide(),this.upload.direct||this.upload.$droparea.removeClass("drag-drop"),this.upload.callback(r,this.upload.direct,i)}},this),n.send(t)},onDrag:function(e){e.preventDefault(),this.upload.$droparea.addClass("drag-hover")},onDragLeave:function(e){e.preventDefault(),this.upload.$droparea.removeClass("drag-hover")},clearImageFields:function(){this.upload.imageFields={}},addImageFields:function(e,t){this.upload.imageFields[e]=t},removeImageFields:function(e){delete this.upload.imageFields[e]},clearFileFields:function(){this.upload.fileFields={}},addFileFields:function(e,t){this.upload.fileFields[e]=t},removeFileFields:function(e){delete this.upload.fileFields[e]},s3uploadFile:function(t){this.upload.s3executeOnSignedUrl(t,e.proxy(function(e){this.upload.s3uploadToS3(t,e)},this))},s3executeOnSignedUrl:function(e,t){var i=new XMLHttpRequest,n="?";"-1"!=this.opts.s3.search(/\?/)&&(n="&"),i.open("GET",this.opts.s3+n+"name="+e.name+"&type="+e.type,!0),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined");var r=this;i.onreadystatechange=function(e){4==this.readyState&&200==this.status?(r.progress.show(),t(decodeURIComponent(this.responseText))):4==this.readyState&&200!=this.status},i.send()},s3createCORSRequest:function(e,t){var i=new XMLHttpRequest;return"withCredentials"in i?i.open(e,t,!0):"undefined"!=typeof XDomainRequest?(i=new XDomainRequest,i.open(e,t)):i=null,i},s3uploadToS3:function(t,i){var n=this.upload.s3createCORSRequest("PUT",i);n&&(n.onload=e.proxy(function(){if(200==n.status){this.progress.hide();var e=i.split("?");if(!e[0])return!1;this.upload.direct||this.upload.$droparea.removeClass("drag-drop");var t={filelink:e[0]};if("file"==this.upload.type){var r=e[0].split("/");t.filename=r[r.length-1]}this.upload.callback(t,this.upload.direct,!1)}},this),n.onerror=function(){},n.upload.onprogress=function(e){},n.setRequestHeader("Content-Type",t.type),n.setRequestHeader("x-amz-acl","public-read"),n.send(t))}}},utils:function(){return{isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},isDesktop:function(){return!/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent)},isString:function(e){return"[object String]"==Object.prototype.toString.call(e)},isEmpty:function(t,i){return t=t.replace(/[\u200B-\u200D\uFEFF]/g,""),t=t.replace(/&nbsp;/gi,""),t=t.replace(/<\/?br\s?\/?>/g,""),t=t.replace(/\s/g,""),t=t.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,""),t=t.replace(/<iframe(.*?[^>])>$/i,"iframe"),t=t.replace(/<source(.*?[^>])>$/i,"source"),i!==!1&&(t=t.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),t=t.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"")),t=e.trim(t),""===t},normalize:function(e){return"undefined"==typeof e?0:parseInt(e.replace("px",""),10)},hexToRgb:function(e){if("undefined"!=typeof e){if(-1==e.search(/^#/))return e;var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,i,n){return t+t+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgb("+parseInt(i[1],16)+", "+parseInt(i[2],16)+", "+parseInt(i[3],16)+")"}},getOuterHtml:function(t){return e("<div>").append(e(t).eq(0).clone()).html()},getAlignmentElement:function(t){return-1!==e.inArray(t.tagName,this.opts.alignmentTags)?e(t):e(t).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0])},removeEmptyAttr:function(t,i){var n=e(t);return"undefined"==typeof n.attr(i)?!0:""===n.attr(i)?(n.removeAttr(i),!0):!1},removeEmpty:function(t,i){var n=e(i);if(n.find(".redactor-invisible-space").removeAttr("style").removeAttr("class"),0===n.find("hr, br, img, iframe, source").length){var r=e.trim(n.text());this.utils.isEmpty(r,!1)&&n.remove()}},saveScroll:function(){this.saveEditorScroll=this.$editor.scrollTop(),this.saveBodyScroll=e(window).scrollTop(),this.opts.scrollTarget&&(this.saveTargetScroll=e(this.opts.scrollTarget).scrollTop())},restoreScroll:function(){("undefined"!=typeof this.saveScroll||"undefined"!=typeof this.saveBodyScroll)&&(e(window).scrollTop(this.saveBodyScroll),this.$editor.scrollTop(this.saveEditorScroll),this.opts.scrollTarget&&e(this.opts.scrollTarget).scrollTop(this.saveTargetScroll))},createSpaceElement:function(){var e=document.createElement("span");return e.className="redactor-invisible-space",e.innerHTML=this.opts.invisibleSpace,e},removeInlineTags:function(t){var i=this.opts.inlineTags;i.push("span"),"PRE"==t.tagName&&i.push("a"),e(t).find(i.join(",")).not("span.redactor-selection-marker").contents().unwrap()},replaceWithContents:function(t,i){var n=this;return e(t).replaceWith(function(){return i===!0&&n.utils.removeInlineTags(this),e(this).contents()}),e(t)},replaceToTag:function(t,i,n){var r,s=this;return e(t).replaceWith(function(){r=e("<"+i+" />").append(e(this).contents());for(var t=0;t<this.attributes.length;t++)r.attr(this.attributes[t].name,this.attributes[t].value);return n===!0&&s.utils.removeInlineTags(r),r}),r},isStartOfElement:function(){var e=this.selection.getBlock();if(!e)return!1;var t=this.caret.getOffsetOfElement(e);return 0===t?!0:!1},isEndOfElement:function(t){if("undefined"==typeof t){var t=this.selection.getBlock();if(!t)return!1}var i=this.caret.getOffsetOfElement(t),n=e.trim(e(t).text()).replace(/\n\r\n/g,"");return i==n.length?!0:!1},isEndOfEditor:function(){var t=this.$editor[0],i=this.caret.getOffsetOfElement(t),n=e.trim(e(t).html().replace(/(<([^>]+)>)/gi,""));return i==n.length?!0:!1},isBlock:function(e){return e=e[0]||e,e&&this.utils.isBlockTag(e.tagName)},isBlockTag:function(e){return"undefined"==typeof e?!1:this.reIsBlock.test(e)},isTag:function(t,i){var n=e(t).closest(i);return 1==n.length?n[0]:!1},isSelectAll:function(){return this.selectAll},enableSelectAll:function(){this.selectAll=!0},disableSelectAll:function(){this.selectAll=!1},isRedactorParent:function(t){return t?0===e(t).parents(".redactor-editor").length||e(t).hasClass("redactor-editor")?!1:t:!1},isCurrentOrParentHeader:function(){return this.utils.isCurrentOrParent(["H1","H2","H3","H4","H5","H6"])},isCurrentOrParent:function(t){var i=this.selection.getParent(),n=this.selection.getCurrent();if(e.isArray(t)){var r=0;return e.each(t,e.proxy(function(e,t){this.utils.isCurrentOrParentOne(n,i,t)&&r++},this)),0===r?!1:!0}return this.utils.isCurrentOrParentOne(n,i,t)},isCurrentOrParentOne:function(e,t,i){return i=i.toUpperCase(),t&&t.tagName===i?t:e&&e.tagName===i?e:!1},isOldIe:function(){return this.utils.browser("msie")&&parseInt(this.utils.browser("version"),10)<9?!0:!1},isLessIe10:function(){return this.utils.browser("msie")&&parseInt(this.utils.browser("version"),10)<10?!0:!1},isIe11:function(){return!!navigator.userAgent.match(/Trident\/7\./)},browser:function(e){var t=navigator.userAgent.toLowerCase(),i=/(opr)[\/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return"safari"==e?"undefined"!=typeof i[3]?"safari"==i[3]:!1:"version"==e?i[2]:"webkit"==e?"chrome"==i[1]||"opr"==i[1]||"webkit"==i[1]:"rv"==i[1]?"msie"==e:"opr"==i[1]?"webkit"==e:e==i[1]}}}},e(window).on("load.tools.redactor",function(){e('[data-tools="redactor"]').redactor()}),t.prototype.init.prototype=t.prototype,e.Redactor.fn.formatLinkify=function(t,i,s,o,a,l){for(var c="((?:http[s]?:\\/\\/(?:www\\.)?|www\\.){1}(?:[0-9A-Za-z\\-%_]+\\.)+[a-zA-Z]{2,}(?::[0-9]+)?(?:(?:/[0-9A-Za-z\\-#\\.%+_]*)+)?(?:\\?(?:[0-9A-Za-z\\-\\.%_]+(?:=[0-9A-Za-z\\-\\.%_\\+]*)?)?(?:&(?:[0-9A-Za-z\\-\\.%_]+(?:=[0-9A-Za-z\\-\\.%_\\+]*)?)?)*)?(?:#[0-9A-Za-z\\-\\.%_\\+=\\?&;]*)?)",u=new RegExp(c,"gi"),d=/(https?|ftp):\/\//i,h=new RegExp("(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*\\.(?:jpg|gif|png))(?:\\?([^#]*))?(?:#(.*))?","gi"),p=(this.$editor?this.$editor[0]:this).childNodes,f=p.length;f--;){var g=p[f];if(3===g.nodeType&&"PRE"!==g.parentNode){var m=g.nodeValue;if(a&&m){var v='<iframe width="500" height="281" src="',b='" frameborder="0" allowfullscreen></iframe>';m.match(n)?(m=m.replace(n,v+"//www.youtube.com/embed/$1"+b),e(g).after(m).remove()):m.match(r)&&(m=m.replace(r,v+"//player.vimeo.com/video/$2"+b),e(g).after(m).remove())}if(o&&m&&m.match(h)){var y=m.match(h);return m=m.replace(h,'<img src="'+y+'" />'),void e(g).after(m).remove()}-1!=m.search(/\$/g)&&(m=m.replace(/\$/g,"&#36;"));var y=m.match(u);if(s&&m&&y){for(var k=y.length,x=0;k>x;x++){null!==y[x].match(/\.$/)&&(y[x]=y[x].replace(/\.$/,""));var w=y[x],C=w,T="";null!==w.match(/\s$/)&&(T=" ");var E=t+"://";null!==w.match(d)&&(E=""),C.length>l&&(C=C.substring(0,l)+"..."),C=C.replace(/&#36;/g,"$").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");var S=[],$=m.match("<a(.*?)</a>");if(null!==$){var k=$.length;for(f=0;k>f;f++)S[f]=$[f],m=m.replace($[f],"{abuffer"+f+"}")}m=m.replace(w,'<a href="'+E+e.trim(w)+'">'+e.trim(C)+"</a>"+T),e.each(S,function(e,t){m=m.replace("{abuffer"+e+"}",t)})}e(g).after(m).remove()}}else 1!==g.nodeType||/^(pre|a|button|textarea)$/i.test(g.tagName)||e.Redactor.fn.formatLinkify.call(g,t,i,s,o,a,l)}}}(jQuery),$().ready(function(){$(document).foundation({equalizer:{equalize_on_stack:!1}});$("input[type=color]").spectrum({preferredFormat:"hex",chooseText:"Select",showInitial:!0,clickoutFiresChange:!0,showInput:!0}),$(".wysiwyg").redactor({buttons:["bold","italic","link"],tabKey:!1}),$(".delete-action").click(function(e){e.preventDefault();var t=$(this).attr("data-popup"),i=$(this).attr("data-id");$("#"+t+" #delete-id").val(i),$("#"+t).foundation("reveal","open")})});